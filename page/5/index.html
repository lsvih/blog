<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lsvih.com","root":"/","scheme":"Pisces","version":"8.0.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"algolia":{"appID":"6U6P1RGK4F","apiKey":"b14e73cdd627eabe947b5decbe14850f","indexName":"lsvih","hits":{"per_page":10}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="My note">
<meta property="og:url" content="https://lsvih.com/page/5/index.html">
<meta property="og:site_name" content="My note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="lsvih">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lsvih.com/page/5/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>My note - lsvih</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142893470-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-142893470-1');
      }
    </script>






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="My note" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">My note</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">lsvih</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="https://cv.lsvih.com/" rel="noopener" target="_blank"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lsvih</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">162</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">205</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lsvih" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;lsvih" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lsvih@qq.com" title="E-Mail â†’ mailto:lsvih@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/02/28/%E4%B8%80%E4%BB%BD%E4%B8%BA-Node-js-%E5%BA%94%E7%94%A8%E5%87%86%E5%A4%87%E7%9A%84-Dockerfile-%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/28/%E4%B8%80%E4%BB%BD%E4%B8%BA-Node-js-%E5%BA%94%E7%94%A8%E5%87%86%E5%A4%87%E7%9A%84-Dockerfile-%E6%8C%87%E5%8D%97/" class="post-title-link" itemprop="url">ä¸€ä»½ä¸º Node.js åº”ç”¨å‡†å¤‡çš„ Dockerfile æŒ‡å—</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-02-28 11:55:00" itemprop="dateCreated datePublished" datetime="2018-02-28T11:55:00+08:00">2018-02-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Translate/" itemprop="url" rel="index"><span itemprop="name">Translate</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/images/pasted-306.png" alt="upload successful"></p>
<h3 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h3><p>æœ¬æ–‡æ¶µç›–äº†ä»åˆ›å»ºç®€å•çš„ Dockerfile åˆ°ç”Ÿäº§ç¯å¢ƒå¤šçº§æ„å»º Node.js Web åº”ç”¨çš„ä¾‹å­ã€‚ä»¥ä¸‹ä¸ºæœ¬æŒ‡å—çš„å†…å®¹æ‘˜è¦ï¼š</p>
<ul>
<li>ä½¿ç”¨åˆé€‚çš„åŸºç¡€é•œåƒï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ carbonï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ alpineï¼‰ã€‚</li>
<li>åœ¨å¼€å‘æ—¶ä½¿ç”¨ <code>nodemon</code> è¿›è¡Œçƒ­åŠ è½½ã€‚</li>
<li>ä¼˜åŒ– Docker çš„ cache layerï¼ˆç¼“å­˜å±‚ï¼‰â€”â€” æŒ‰ç…§æ­£ç¡®çš„é¡ºåºä½¿ç”¨å‘½ä»¤ï¼Œä»…åœ¨éœ€è¦æ—¶è¿è¡Œ <code>npm install</code>ã€‚</li>
<li>ä½¿ç”¨ <code>serve</code> åŒ…éƒ¨ç½²é™æ€æ–‡ä»¶ï¼ˆæ¯”å¦‚ Reactã€Vueã€Angular ç”Ÿæˆçš„ bundleï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>alpine</code> è¿›è¡Œç”Ÿäº§ç¯å¢ƒä¸‹çš„å¤šçº§æ„å»ºï¼Œå‡å°‘æœ€ç»ˆé•œåƒæ–‡ä»¶çš„å¤§å°ã€‚</li>
<li>#å»ºè®®â€Šâ€”â€Š1) ä½¿ç”¨ COPY ä»£æ›¿ ADD 2) ä½¿ç”¨ <code>init</code> æ ‡è¯†ï¼Œå¤„ç† CTRL-C ç­‰å†…æ ¸ä¿¡å·ã€‚</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/02/28/%E4%B8%80%E4%BB%BD%E4%B8%BA-Node-js-%E5%BA%94%E7%94%A8%E5%87%86%E5%A4%87%E7%9A%84-Dockerfile-%E6%8C%87%E5%8D%97/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/02/22/%E5%9C%A8-Swift-playground-%E4%B8%AD%E7%BC%96%E5%86%99%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/22/%E5%9C%A8-Swift-playground-%E4%B8%AD%E7%BC%96%E5%86%99%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">åœ¨ Swift playground ä¸­ç¼–å†™å•å…ƒæµ‹è¯•</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-02-22 14:48:00" itemprop="dateCreated datePublished" datetime="2018-02-22T14:48:00+08:00">2018-02-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Translate/" itemprop="url" rel="index"><span itemprop="name">Translate</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Swift playground å¯¹äº<a target="_blank" rel="noopener" href="https://github.com/johnsundell/testdrive">è¯•ç”¨æ–°çš„ framework</a>ã€<a target="_blank" rel="noopener" href="https://github.com/ole/whats-new-in-swift-4">æ¢ç´¢è¯­è¨€çš„æ–°ç‰¹æ€§</a>æ¥è¯´ååˆ†æœ‰ç”¨ã€‚å®ƒæä¾›çš„å®æ—¶åé¦ˆèƒ½è®©ä½ å¿«é€Ÿå°è¯•æ–°çš„æƒ³æ³•ä¸è§£å†³æ–¹æ¡ˆï¼Œå¤§å¤§æé«˜ç”Ÿäº§åŠ›ã€‚</p>
<p>è‡ª Swift é—®ä¸–ä»¥æ¥ï¼Œæ— è®ºæ˜¯è®¾è®¡ framework APIï¼Œè¿˜æ˜¯ç»™ app å¼€å‘æ–°åŠŸèƒ½ï¼Œæˆ‘ä¸€ç›´åœ¨ä¸åœåœ°ä½¿ç”¨ playgroundï¼Œå¸Œæœ›æ‰¾åˆ°å°†å®ƒæ•´åˆè¿›å·¥ä½œæµçš„åŠæ³•ã€‚</p>
<p>æœ¬å‘¨ï¼Œè®©æˆ‘ä»¬æ¥äº†è§£å¦‚ä½•å°† Swift playground åº”ç”¨äºç¼–å†™å•å…ƒæµ‹è¯•ï¼Œä»¥åŠå¦‚ä½•è®© <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Test-driven_development">TDD - æµ‹è¯•é©±åŠ¨å¼€å‘</a>ï¼ˆishï¼‰å·¥ä½œæµå˜å¾—æ›´åŠ é¡ºç•…ã€‚</p>
<!--- more --->
<h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><p>å®é™…ä¸Šåœ¨ playground ç¼–å†™æµ‹è¯•ä¸ç¼–å†™ test target åŸºæœ¬ä¸€è‡´ã€‚ä½ å¯ä»¥å…ˆå¯¼å…¥ <code>XCTest</code>ï¼Œç„¶ååˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">import</span> XCTest</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManagerTests</span>: <span class="title">XCTestCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> manager: <span class="type">UserManager!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">setUp</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.setUp()</span><br><span class="line">        manager = <span class="type">UserManager</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testLoggingIn</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="type">XCTAssertNil</span>(manager.user)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> user = <span class="type">User</span>(id: <span class="number">7</span>, name: <span class="string">&quot;John&quot;</span>)</span><br><span class="line">        manager.login(user: user)</span><br><span class="line">        <span class="type">XCTAssertEqual</span>(manager.user, user)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•è®¿é—®ä½ çš„ä»£ç "><a href="#å¦‚ä½•è®¿é—®ä½ çš„ä»£ç " class="headerlink" title="å¦‚ä½•è®¿é—®ä½ çš„ä»£ç "></a>å¦‚ä½•è®¿é—®ä½ çš„ä»£ç </h2><p>ä¸è¿‡ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®ç°ç›´æ¥åœ¨ playground ä¸­æµ‹è¯•çš„ä»£ç ï¼Œé‚£ä¹ˆåœ¨åˆšå¼€å§‹æ—¶è®¿é—®ä»£ç å¯èƒ½ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚ä½ å¿…é¡»æ ¹æ®ä»£ç çš„æ¥æºï¼ˆ app è¿˜æ˜¯ framework ï¼‰ï¼Œè€Œé€‰æ‹©ä¸åŒçš„æ–¹å¼æ¥è®¿é—®å°†è¦æµ‹è¯•çš„ä»£ç </p>
<p><strong>æµ‹è¯• app ä»£ç </strong></p>
<p>ç”±äºå¯ä»¥åœ¨ç¼–å†™ playground æ—¶ä¸ç›´æ¥å¯¼å…¥ app targetï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‡ ç§æ–¹æ³•æµ‹è¯• app ä»£ç ï¼š</p>
<p><strong>1) å¤åˆ¶ä»£ç </strong> è¿™å¤§æ¦‚æ˜¯æœ€ç®€å•çš„æ–¹æ³•äº†ã€‚å°†æƒ³æµ‹è¯•çš„ä»£ç å¤åˆ¶è‡³ playground è¿è¡Œï¼Œæœ€åå†æ‹·å›å»ã€‚è¿™ä¸ªæ–¹æ³•ç®€å•ç²—æš´ã€‚</p>
<p><strong>2) å¤åˆ¶æ–‡ä»¶</strong> å¦‚æœä½ ä¸æƒ³ç›´æ¥å°†è¦æµ‹è¯•çš„ä»£ç æ”¾åˆ° playground ä¸­ï¼Œä¹Ÿå¯ä»¥å°†éœ€è¦çš„æºæ–‡ä»¶å¤åˆ¶åˆ° playground çš„ <code>Sources</code> ç›®å½•ä¸­ï¼ˆä½¿ç”¨ <code>âŒ˜ + 0</code> æ˜¾ç¤º organizerï¼Œç„¶åå°†æ–‡ä»¶æ‹–è¿›å»ï¼‰ã€‚æ¥ä¸‹æ¥åŒä¸Šï¼Œåœ¨è¿è¡Œæµ‹è¯•ä¹‹åå†å°†æ”¹å˜åçš„æ–‡ä»¶æ‹·å›è¦†ç›–æºæ–‡ä»¶ã€‚</p>
<p><strong>3) åˆ›å»º framework target</strong> å¦‚æœä½ è®¨åŒå¤åˆ¶æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«éœ€è¦æµ‹è¯•ä»£ç çš„ frameworkã€‚åœ¨ Xcode ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ frameworkï¼ˆæˆ–ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/johnsundell/swiftplate"><strong>SwiftPlate</strong></a> åˆ›å»ºä¸€ä¸ªè·¨å¹³å° frameworkï¼‰ï¼Œæ¥ç€æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ“ä½œã€‚</p>
<p><strong>æµ‹è¯• framework ä»£ç </strong></p>
<p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œå°†ä»»æ„ framework åŠ å…¥ playgroundï¼š</p>
<ul>
<li>å°† framework çš„ Xcode å·¥ç¨‹æ‹–å…¥ playground çš„ organizer ä¸­ã€‚</li>
<li>ç³»ç»Ÿå°†æç¤ºä½ å°† playground ä¿å­˜ä¸ºä¸€ä¸ªå·¥ä½œåŒºï¼Œç…§åšå³å¯ï¼ˆè¯·æ³¨æ„ä¸è¦å°† playground çš„å†…éƒ¨å·¥ä½œåŒºè¦†ç›–æ‰ï¼Œè€Œåº”è¯¥åœ¨ playground æ–‡ä»¶å¤¹å¤–å»åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œåŒºï¼‰ã€‚</li>
<li>æ‰“å¼€æ­¤å·¥ä½œåŒºã€‚</li>
<li>é€‰æ‹©ä½ çš„ framework çš„ schemeï¼Œå¯¹å…¶è¿›è¡Œæ„å»ºã€‚</li>
<li>ç°åœ¨ï¼Œå¯ä»¥ <code>import</code> ä½ çš„ frameworkï¼Œå¼€å§‹ç¼–ç äº†ï¼</li>
</ul>
<p>å¦‚æœä½ å¸Œæœ›è‡ªåŠ¨æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨æˆ‘å†™çš„è„šæœ¬ - <a target="_blank" rel="noopener" href="https://github.com/johnsundell/playground"><strong>Playground</strong></a>ï¼Œå®ƒèƒ½è®©ä½ é€šè¿‡ä¸€è¡Œå‘½ä»¤å®Œæˆä¸Šè¿°é™¤äº† framework çš„æ„å»ºä¸ import ä¹‹å¤–çš„æ‰€æœ‰æ“ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ playground -d /Path/To/Framework/Project.xcodeproj</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œæµ‹è¯•"><a href="#è¿è¡Œæµ‹è¯•" class="headerlink" title="è¿è¡Œæµ‹è¯•"></a>è¿è¡Œæµ‹è¯•</h2><p>ç°åœ¨å·²ç»å¯ä»¥è®¿é—®éœ€è¦æµ‹è¯•çš„ä»£ç äº†ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜ä¸ºå…¶ç¼–å†™å¥½äº†ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚ç°åœ¨è¯•ç€è¿è¡Œè¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼<br> ğŸš€</p>
<p>åœ¨ä¸€èˆ¬çš„ test target ä¸­ï¼Œä½ ä¸€èˆ¬ä¼šä½¿ç”¨ <code>âŒ˜ + U</code> æ¥è¿è¡Œä½ çš„æµ‹è¯•ï¼›ä½†åœ¨ playground ä¸­ï¼Œæˆ‘å¸Œæœ› Xcode èƒ½è‡ªåŠ¨è¿è¡Œæµ‹è¯•ï¼ˆä»¥è·å¾—èˆ’çˆ½çš„å®æ—¶åé¦ˆï¼‰ã€‚æœ€ç®€å•çš„å®ç°æ–¹å¼å°±æ˜¯ä¸ºä½ çš„æµ‹è¯•ç”¨ä¾‹è¿è¡Œ <code>defaultTestSuite</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UserManagerTests</span>.defaultTestSuite().run()</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸Šé¢çš„æ“ä½œä¼šè¿è¡Œæµ‹è¯•ï¼Œå¹¶å°†æµ‹è¯•ç»“æœè½¬å‚¨è‡³æ§åˆ¶å°ï¼ˆå¯ä½¿ç”¨ <code>âŒ˜ + â‡§ + C</code> å‘¼å‡ºï¼‰ã€‚è¿™æ ·åšè™½ç„¶æ²¡é—®é¢˜ï¼Œä½†å¾ˆå®¹æ˜“é”™è¿‡é”™è¯¯ä¿¡æ¯ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•è§‚å¯Ÿè€…ï¼ˆtest observerï¼‰ï¼Œåœ¨æµ‹è¯•å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ä¸€ä¸ªæ–­è¨€å¤±è´¥ï¼ˆassertionFailureï¼‰é”™è¯¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestObserver</span>: <span class="title">NSObject</span>, <span class="title">XCTestObservation</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testCase</span><span class="params">(<span class="number">_</span> testCase: XCTestCase,</span></span></span><br><span class="line"><span class="function"><span class="params">                  didFailWithDescription description: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                  inFile filePath: String?,</span></span></span><br><span class="line"><span class="function"><span class="params">                  atLine lineNumber: UInt)</span></span> &#123;</span><br><span class="line">        <span class="built_in">assertionFailure</span>(description, line: lineNumber)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> testObserver = <span class="type">TestObserver</span>()</span><br><span class="line"><span class="type">XCTestObservationCenter</span>.shared().addTestObserver(testObserver)</span><br></pre></td></tr></table></figure>
<p>åœ¨å¼€å§‹æµ‹è¯•å‡ºç°å¤±è´¥æ—¶ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ç¼–è¾‘å™¨æç¤ºä¸€ä¸ªè¡Œå†…é”™è¯¯ ğŸ‰</p>
<p><strong>å¦‚æœä½ ç”¨çš„æ˜¯ Swift 4ï¼Œéœ€è¦å°†ä¸Šé¢çš„ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestObserver</span>: <span class="title">NSObject</span>, <span class="title">XCTestObservation</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">testCase</span><span class="params">(<span class="number">_</span> testCase: XCTestCase,</span></span></span><br><span class="line"><span class="function"><span class="params">                  didFailWithDescription description: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                  inFile filePath: String?,</span></span></span><br><span class="line"><span class="function"><span class="params">                  atLine lineNumber: Int)</span></span> &#123;</span><br><span class="line">        <span class="built_in">assertionFailure</span>(description, line: <span class="type">UInt</span>(lineNumber))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> testObserver = <span class="type">TestObserver</span>()</span><br><span class="line"><span class="type">XCTestObservationCenter</span>.shared.addTestObserver(testObserver)</span><br><span class="line"><span class="type">UserManagerTests</span>.defaultTestSuite.run()</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è™½ç„¶éœ€è¦é¢å¤–åšä¸€äº›è®¾ç½®ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆå–œæ¬¢ä½¿ç”¨ Swift playground è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚æˆ‘è§‰å¾—è¿™æ ·é€šè¿‡å¿«é€Ÿçš„åé¦ˆå¹¶è½»æ¾è¿›è¡Œä¿®æ”¹ï¼Œæ›´åŠ æ¥è¿‘ç†æƒ³ä¸­çš„<a target="_blank" rel="noopener" href="http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html">çº¢ç»¿é‡æ„</a>ã€‚è¿™ä¹Ÿå¯ä»¥æ„å»ºæ›´å¥å£®çš„æµ‹è¯•ä¸æ›´é«˜çš„æµ‹è¯•è¦†ç›–ç‡ã€‚</p>
<p>æˆ‘ä¸ªäººå€¾å‘äºä¸ºæ­£åœ¨å¼€å‘çš„ app ä¸ framework å‡†å¤‡å¥½ä¸€ä¸ª playgroundï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°æ·±å…¥è°ƒè¯•ã€‚æ­¤å¤–ï¼Œæˆ‘è¿˜å€¾å‘äºå›´ç»• framework æ„å»º appï¼Œè¿™æ ·åªéœ€ç®€å•å°†ä»£ç å¼•å…¥ playground å°±èƒ½å¼€å§‹ç¼–ç ã€‚æˆ‘ä¼šåœ¨ä¹‹åçš„åšæ–‡ä¸­è®¨è®ºè¿™äº›ç»“æ„ä¸è®¾ç½®çš„ç»†èŠ‚ã€‚</p>
<p>ä½ æ€ä¹ˆçœ‹ï¼Ÿä½ æ˜¯å¦å‡†å¤‡ä½¿ç”¨ playground è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿæˆ–è€…ä½ æ˜¯å¦åœ¨å°è¯•å…¶å®ƒæ–¹æ³•ï¼Ÿè¯·é€šè¿‡è¯„è®ºæˆ– Twitter <a target="_blank" rel="noopener" href="https://twitter.com/johnsundell">@johnsundell</a> è®©ä½œè€…çŸ¥é“ä½ çš„æ„è§ã€é—®é¢˜ä¸åé¦ˆã€‚</p>
<p>æ„Ÿè°¢æ‚¨çš„é˜…è¯» ğŸš€</p>
<blockquote>
<p>æœ¬æ–‡å‘å¸ƒäºæ˜é‡‘ <a target="_blank" rel="noopener" href="https://juejin.im/post/5a8e66276fb9a0633c661f3f">https://juejin.im/post/5a8e66276fb9a0633c661f3f</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/02/06/%E5%A6%82%E4%BD%95%E4%B8%BA-Flask-Web-%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-Nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/06/%E5%A6%82%E4%BD%95%E4%B8%BA-Flask-Web-%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-Nginx/" class="post-title-link" itemprop="url">å¦‚ä½•ä¸º Flask Web åº”ç”¨é…ç½® Nginx</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-02-06 16:04:00" itemprop="dateCreated datePublished" datetime="2018-02-06T16:04:00+08:00">2018-02-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Translate/" itemprop="url" rel="index"><span itemprop="name">Translate</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a><strong>ç®€ä»‹</strong></h3><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä»€ä¹ˆæ˜¯ <a target="_blank" rel="noopener" href="https://www.nginx.com/">Nginx</a> ä»¥åŠå¦‚ä½•ä¸º Flask Web åº”ç”¨é…ç½® Nginxã€‚æœ¬æ–‡æ˜¯<a target="_blank" rel="noopener" href="http://www.patricksoftwareblog.com/all-posts/">ã€Šéƒ¨ç½² Flask åº”ç”¨ã€‹</a>ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘æ›¾æ‰¾åˆ°è¿‡å¤šä»½å…³äº Nginx åŠå…¶é…ç½®çš„æ–‡ç« ï¼Œä½†æˆ‘å¸Œæœ›èƒ½æ›´æ·±å…¥å…¶ç»†èŠ‚ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨ Nginx ä¸º Flask Web åº”ç”¨æœåŠ¡ä»¥åŠå¦‚ä½•ä¸ºæ­¤è¿›è¡Œé…ç½®ã€‚Nginx çš„é…ç½®æ–‡ä»¶æœ‰ç‚¹è®©äººå›°æƒ‘ï¼Œå› ä¸ºå¤§å¤šæ•°çš„æ–‡æ¡£ä»…ä»…æ˜¯ç®€å•ç½—åˆ—äº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè€Œæ²¡æœ‰å¯¹é…ç½®ä¸­æ¯ä¸€æ­¥åšäº†ä»€ä¹ˆè¿›è¡Œä»»ä½•è§£é‡Šã€‚å¸Œæœ›æœ¬æ–‡èƒ½è®©ä½ æ¸…æ™°åœ°ç†è§£å¦‚ä½•ä¸ºä½ çš„åº”ç”¨é…ç½® Nginxã€‚</p>
<!--- more --->
<h3 id="ä»€ä¹ˆæ˜¯-Nginxï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Nginxï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Nginxï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯ Nginxï¼Ÿ</strong></h3><p>åœ¨ Nginxï¼ˆå‘éŸ³ä¸ºâ€œengine-Xâ€ï¼‰çš„å®˜ç½‘ä¸­ï¼Œæœ‰ç€è¿™ä¸ªå·¥å…·çš„æ¦‚è¦æè¿°ï¼š</p>
<p>Nginx æ˜¯ä¸€æ¬¾å…è´¹ã€å¼€æºã€é«˜æ€§èƒ½çš„ HTTP æœåŠ¡å™¨ä»¥åŠåå‘ä»£ç†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸º IMAP/POP3 ä»£ç†æœåŠ¡å™¨ã€‚Nginx ä»¥å…¶é«˜æ€§èƒ½ã€ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½ã€ç®€å•çš„é…ç½®ã€ä½èµ„æºæ¶ˆè€—è€Œé—»åã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ‹“å±•ç†è§£æ­¤è¯´æ˜â€¦â€¦ Nginx æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºä½ çš„ Web åº”ç”¨å¤„ç† <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> è¯·æ±‚çš„æœåŠ¡å™¨ã€‚å¯¹äºå…¸å‹çš„ Web åº”ç”¨ï¼ŒNginx å¯ä»¥é…ç½®ä¸º HTTP è¯·æ±‚è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>å°†è¯·æ±‚ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Reverse_proxy">åå‘ä»£ç†</a> è‡³ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ Gunicornã€uWsgiã€Apache ç­‰ï¼‰ã€‚</li>
<li>ä¸ºé™æ€èµ„æºï¼ˆJavascript æ–‡ä»¶ã€CSS æ–‡ä»¶ã€å›¾åƒã€æ–‡æ¡£ã€é™æ€ HTML æ–‡ä»¶ï¼‰æä¾›æœåŠ¡ã€‚</li>
</ul>
<p>åŒæ—¶ Nginx ä¹Ÿæä¾›äº†<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/load_balancing.html">è´Ÿè½½å‡è¡¡</a>åŠŸèƒ½ï¼Œå¯ä»¥è®©å¤šä¸ªä¸Šæ¸¸æœåŠ¡å™¨ä¸ºè¯·æ±‚æä¾›æœåŠ¡ï¼Œä¸è¿‡åœ¨æœ¬æ–‡ä¸­æš‚ä¸è®¨è®ºæ­¤åŠŸèƒ½ã€‚</p>
<p>ä¸‹å›¾ä¸ºæè¿° Nginx å¦‚ä½•ä¸º Flask Web åº”ç”¨æä¾›æœåŠ¡çš„ç®€å›¾ï¼š</p>
<p><img src="/images/pasted-305.png" alt="upload successful"></p>
<p>Nginx ä¼šå¤„ç†æ¥è‡ªå› ç‰¹ç½‘ï¼ˆæ¯”å¦‚æ¥è‡ªä½ åº”ç”¨çš„ç”¨æˆ·ï¼‰çš„ Http è¯·æ±‚ã€‚æ ¹æ®ä½ å¯¹ Nginx çš„é…ç½®ï¼Œå®ƒå¯ä»¥ç›´æ¥æä¾›å¹¶å‘è¯·æ±‚æºè¿”å›é™æ€å†…å®¹ï¼ˆJavascript æ–‡ä»¶ã€CSS æ–‡ä»¶ã€å›¾åƒã€æ–‡æ¡£ã€é™æ€ HTML æ–‡ä»¶ï¼‰ã€‚æ­¤å¤–ï¼Œå®ƒä¹Ÿèƒ½å°†è¯·æ±‚åå‘ä»£ç†è‡³ WSGIï¼ˆ<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Web_Server_Gateway_Interface">Web Server Gateway Interface</a>ï¼‰ä»¥è®©ä½ åœ¨ Flask Web åº”ç”¨ä¸­ç”ŸæˆåŠ¨æ€å†…å®¹ï¼ˆHTMLï¼‰å¹¶è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>ä¸Šé¢çš„ç¤ºæ„å›¾å‡å®šç”¨æˆ·ä½¿ç”¨äº† Dockerï¼Œä½†ä¸ä½¿ç”¨ Docker æ—¶ Nginx çš„é…ç½®ä¹Ÿä¸æ­¤ååˆ†ç›¸ä¼¼ï¼ˆä»…ä»…çœç•¥äº†å›¾ä¸­å®¹å™¨çš„æ¦‚å¿µï¼‰ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆä½ éœ€è¦-Nginx-ä¸-Gunicornï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½ éœ€è¦-Nginx-ä¸-Gunicornï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½ éœ€è¦ Nginx ä¸ Gunicornï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½ éœ€è¦ Nginx ä¸ Gunicornï¼Ÿ</h3><p>Nginx ä½œä¸ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œåœ¨è®¸å¤šåº”ç”¨ä¸­éƒ½è¢«ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://www.nginx.com/resources/wiki/start/#pre-canned-configurations">åˆ—è¡¨</a>ã€‚å®ƒæä¾›äº†è®¸å¤šçš„åŠŸèƒ½ï¼Œä½†æ— æ³•ç›´æ¥ä¸º Flask åº”ç”¨æä¾›æœåŠ¡ã€‚è€Œ <a target="_blank" rel="noopener" href="http://gunicorn.org/">Gunicorn</a> å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚Nginx æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ Gunicorn äº¤ç”±ä½ çš„ Flask åº”ç”¨è¿›è¡Œå¤„ç†ï¼ˆæ¯”å¦‚ä½ åœ¨ view.py ä¸­å®šä¹‰çš„è·¯ç”±ï¼‰ã€‚Gunicorn æ˜¯ä¸€ä¸ª WSGI æœåŠ¡å™¨ï¼Œå¯ä»¥å¤„ç† HTTP è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬é€šè¿‡è·¯ç”±äº¤ç»™ä»»ä½•æ”¯æŒ WSGI çš„ python åº”ç”¨å¤„ç†ï¼ˆæ¯”å¦‚ Flaskã€Djangoã€Pyramid ç­‰ï¼‰ã€‚</p>
<h3 id="Nginx-é…ç½®æ–‡ä»¶çš„ç»“æ„"><a href="#Nginx-é…ç½®æ–‡ä»¶çš„ç»“æ„" class="headerlink" title="Nginx é…ç½®æ–‡ä»¶çš„ç»“æ„"></a><strong>Nginx é…ç½®æ–‡ä»¶çš„ç»“æ„</strong></h3><p>æ³¨æ„ï¼šæœ¬æ–‡åº”ç”¨çš„æ˜¯ Nginx v1.11.3ï¼Œé…ç½®æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®æ ¹æ®ä½  Nginx ç‰ˆæœ¬çš„ä¸åŒä¼šæœ‰æ‰€å˜åŒ–ï¼Œæ¯”å¦‚ /opt/nginx/conf/ã€‚</p>
<p>æ ¹æ®ä½ å®‰è£…ã€ä½¿ç”¨ Nginx æ–¹å¼çš„ä¸åŒï¼Œé…ç½®æ–‡ä»¶çš„ç»“æ„ä¼šç•¥æœ‰ä¸åŒã€‚å¤§å¤šæ•°çš„é…ç½®ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<h4 id="ç»“æ„-1"><a href="#ç»“æ„-1" class="headerlink" title="ç»“æ„ 1"></a>ç»“æ„ 1</h4><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ä»æºä»£ç ç¼–è¯‘å¾—åˆ°çš„ Nginx æˆ–è€…å®˜æ–¹çš„ Docker é•œåƒï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶åœ¨ /etc/nginx/ ä¸­ï¼Œä¸»é…ç½®æ–‡ä»¶ä¸º /etc/nginx/nginx.confã€‚åœ¨ /etc/nginx/nginx.conf çš„æœ€ä¸‹é¢çš„ä¸€è¡Œä¼šå°†ä½äº /etc/nginx/conf.d/ ç›®å½•ä¸‹çš„å…¶ä½™é…ç½®æ–‡ä»¶å†…å®¹è½½å…¥é…ç½®ä¸­ï¼š</p>
<ul>
<li>include /etc/nginx/conf.d/*.conf;</li>
</ul>
<h4 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="headerlink" title="ç»“æ„ 2"></a>ç»“æ„ 2</h4><p>å¦‚æœä½ æ˜¯é€šè¿‡åŒ…ç®¡ç†å™¨ï¼ˆæ¯”å¦‚ Ubuntu çš„ apt-getï¼‰å®‰è£…çš„ Nginxï¼Œé‚£ä¹ˆä½ çš„ /etc/nginx/ ä¸‹ä¼šæœ‰ä¸‹é¢ä¸¤ä¸ªå­ç›®å½•ï¼š</p>
<ul>
<li>sites-available â€“ åŒ…å«ä¸ºå¤šä¸ªç½‘ç«™å‡†å¤‡çš„å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚</li>
<li>sites-enabled â€“ åŒ…å«ä¸€ä¸ªæŒ‡å‘ sites-available ç›®å½•ä¸­é…ç½®æ–‡ä»¶çš„è½¯é“¾æ¥ã€‚</li>
</ul>
<p>è¿™ä¸¤ä¸ªç›®å½•ç»§æ‰¿äº Apacheï¼Œå°†åº”ç”¨äº Nginx çš„é…ç½®ã€‚</p>
<p>ç”±äºæˆ‘çš„ Flask åº”ç”¨ä½¿ç”¨çš„æ˜¯ Docker éƒ¨ç½²ï¼Œå› æ­¤åœ¨æœ¬æ–‡å°†ä¸»è¦å…³æ³¨ä¸Šé¢çš„ç»“æ„ 1ã€‚</p>
<h3 id="Nginx-çš„é…ç½®"><a href="#Nginx-çš„é…ç½®" class="headerlink" title="Nginx çš„é…ç½®"></a><strong>Nginx çš„é…ç½®</strong></h3><p>Nginx çš„é¡¶å±‚é…ç½®æ–‡ä»¶æ˜¯ nginx.confã€‚Nginx æ¥å—å¤šå±‚çº§çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¹Ÿä½¿å¾—ç”¨æˆ·å¯ä»¥é’ˆå¯¹è‡ªå·±çš„åº”ç”¨è¿›è¡Œå¼¹æ€§çš„é…ç½®ã€‚å¦‚éœ€äº†è§£é…ç½®æ–‡ä»¶ä¸­å„å‚æ•°çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚é˜… <a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html">Nginx å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p>åœ¨ Nginx ä¸­ï¼Œç”±é…ç½®å—ï¼ˆblockï¼‰æ¥ç»„ç»‡å„ä¸ªé…ç½®å‚æ•°ã€‚ä»¥ä¸‹ä¸ºåœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†æåˆ°çš„é…ç½®å—ï¼š</p>
<ul>
<li>Main â€“ å®šä¹‰äº nginx.confï¼ˆæ‰€æœ‰ä¸å±äºé…ç½®å—çš„å‚æ•°å‡å± Main å—ï¼‰</li>
<li>Events â€“ å®šä¹‰äº nginx.conf</li>
<li>Http â€“ å®šä¹‰äº nginx.conf</li>
<li>Server â€“ å®šä¹‰äº _application_name_.conf</li>
</ul>
<p>å°†è¿™äº›é…ç½®å—æ‹†åˆ†è‡³ä¸åŒçš„æ–‡ä»¶ï¼Œå¯ä»¥è®©ä½ åœ¨ nginx.conf ä¸­å®šä¹‰ Nginx çš„é«˜çº§åˆ«é…ç½®ï¼Œåœ¨å…¶å®ƒçš„ *.conf æ–‡ä»¶ä¸­ä¸ºä½ çš„åº”ç”¨å®šä¹‰è™šæ‹Ÿä¸»æœºæˆ–æœåŠ¡å™¨çš„å‚æ•°ã€‚</p>
<h4 id="nginx-conf-è¯¦ç»†è¯´æ˜"><a href="#nginx-conf-è¯¦ç»†è¯´æ˜" class="headerlink" title="nginx.conf è¯¦ç»†è¯´æ˜"></a>nginx.conf è¯¦ç»†è¯´æ˜</h4><p>å®‰è£… Nginx æ—¶è‡ªå¸¦çš„é»˜è®¤ nginx.conf æ–‡ä»¶å¯ä»¥é€‚ç”¨äºå¤§å¤šæ•°æœåŠ¡å™¨çš„åˆæ­¥é…ç½®ã€‚è®©æˆ‘ä»¬ä»”ç»†æ¢æŸ¥ nginx.conf çš„å†…å®¹ï¼Œå¹¶æ€è€ƒå¦‚ä½•æ‹“å±•è¿™é‡Œçš„é»˜è®¤è®¾ç½®ã€‚</p>
<h5 id="Main-éƒ¨åˆ†"><a href="#Main-éƒ¨åˆ†" class="headerlink" title="Main éƒ¨åˆ†"></a>Main éƒ¨åˆ†</h5><p>nginx.conf çš„ main é…ç½®å—ï¼ˆå³é‚£äº›ä¸åœ¨é…ç½®å—ä¸­çš„å‚æ•°ï¼‰ä¸ºï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user  nginx;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">error_log  <span class="regexp">/var/</span>log<span class="regexp">/nginx/</span>error.log warn;</span><br><span class="line">pid        <span class="regexp">/var/</span>run/nginx.pid;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#user">user</a>ï¼‰å°†å®šä¹‰ Nginx æœåŠ¡å™¨çš„æ‹¥æœ‰è€…ä»¥åŠè¿è¡Œç”¨æˆ·ã€‚å½“ Nginx é€šè¿‡ Docker å®¹å™¨è¿è¡Œæ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼å°±å¤Ÿäº†ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#worker_processes">worker_processes</a>ï¼‰å®šä¹‰äº† worker processesï¼ˆå·¥ä½œè¿›ç¨‹ï¼‰çš„æ•°é‡ã€‚æ­¤å‚æ•°æ¨èçš„é»˜è®¤å€¼ä¸ºå½“å‰æœåŠ¡å™¨ä½¿ç”¨å†…æ ¸çš„æ•°é‡ã€‚å¯¹äºåŸºç¡€çš„è™šæ‹Ÿç§æœ‰æœåŠ¡å™¨ï¼ˆVPSï¼‰æ¥è¯´ï¼Œé»˜è®¤å€¼ 1 å°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å½“ä½ æ‹“å±• VPS æ€§èƒ½æ—¶å¯ä»¥å¢åŠ è¿™ä¸ªæ•°å­—ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#error_log">error_log</a>ï¼‰å®šä¹‰äº†é”™è¯¯æ—¥å¿—åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å­˜æ”¾çš„ä½ç½®ï¼Œå¹¶èƒ½é¢å¤–å®šä¹‰ä¸€ä¸ªå‚æ•°æ¥è§„å®šéœ€è¦è®°å½•æ—¥å¿—çš„æœ€å°é”™è¯¯ç­‰çº§ã€‚è¿™ä¸ªå‚æ•°ä½¿ç”¨é»˜è®¤å€¼å³å¯ã€‚</p>
<p>ç¬¬å››ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#pid">pid</a>ï¼‰å®šä¹‰äº†ç”¨äºå­˜å‚¨ Nginx ä¸»è¿›ç¨‹ pid çš„æ–‡ä»¶ä½ç½®ã€‚è¿™ä¸ªå‚æ•°ä½¿ç”¨é»˜è®¤å€¼å³å¯ã€‚</p>
<h4 id="events-é…ç½®å—"><a href="#events-é…ç½®å—" class="headerlink" title="events é…ç½®å—"></a>events é…ç½®å—</h4><p>events é…ç½®å—å®šä¹‰äº†ä¸€äº›ä¼šå½±å“è¿æ¥å¤„ç†çš„å‚æ•°ã€‚å®ƒä¹Ÿæ˜¯ Nginx.conf æ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªé…ç½®å—ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªé…ç½®å—ä¸­ä»…æœ‰ä¸€ä¸ªå•ç‹¬çš„å‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#worker_connections">worker_connections</a>ï¼‰ï¼Œå®šä¹‰äº†å·¥ä½œè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚é»˜è®¤å€¼å®šä¹‰äº†æ€»å…±å¯ç”¨ 1024 ä¸ªè¿æ¥ï¼Œæ— éœ€æ›´æ”¹ï¼ˆä½†ä½ éœ€è¦è®¡ç®—ç”¨æˆ·è¯·æ±‚ç«™ç‚¹åŠè¯·æ±‚ WSGI æœåŠ¡å™¨çš„è¿æ¥æ•°ï¼‰ã€‚</p>
<h4 id="http-é…ç½®å—"><a href="#http-é…ç½®å—" class="headerlink" title="http é…ç½®å—"></a>http é…ç½®å—</h4><p>http é…ç½®å—å®šä¹‰äº†ä¸€äº›å…³äº Nginx å¦‚ä½•å¤„ç† HTTP Web æµé‡çš„å‚æ•°ã€‚å®ƒæ˜¯ nginx.conf æ–‡ä»¶ä¸­ç¬¬äºŒä¸ªé…ç½®å—ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">log_format</span>  main  <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;<span class="variable">$http_user_agent</span>&quot; &quot;<span class="variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#include">include</a>ï¼‰æŒ‡å®šäº†éœ€è¦å¼•å…¥çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨æ­¤å¼•å…¥çš„æ˜¯ä½äº /etc/nginx/ çš„ mime.types æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å„ç§ Nginx æ”¯æŒçš„æ–‡ä»¶ç±»å‹ã€‚æ­¤å‚æ•°åº”è¯¥ä¿æŒé»˜è®¤å€¼ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#default_type">default_type</a>ï¼‰æŒ‡å®šäº†é»˜è®¤ç»™ç”¨æˆ·è¿”å›çš„æ–‡ä»¶ç±»å‹ã€‚å¯¹äº Flask åº”ç”¨æ¥è¯´ï¼Œè¿”å›çš„æ˜¯åŠ¨æ€ç”Ÿæˆçš„ HTML æ–‡ä»¶ï¼Œå› æ­¤è¿™ä¸ªå‚æ•°åº”æ”¹ä¸º <code>default_type text/html</code>;</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format">log_format</a>ï¼‰æŒ‡å®šäº†æ—¥å¿—çš„æ ¼å¼ï¼Œåº”å½“ä¿æŒé»˜è®¤å€¼ã€‚</p>
<p>ç¬¬å››ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_log_module.html#access_log">access_log</a>ï¼‰æŒ‡å®šäº† Nginx æ—¥å¿—çš„è®¿é—®ä½ç½®ï¼Œåº”å½“ä¿æŒé»˜è®¤å€¼ã€‚</p>
<p>ç¬¬äº”ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#sendfile">send_file</a>ï¼‰ä»¥åŠç¬¬å…­ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#tcp_nopush">tcp_nopush</a>ï¼‰ç¨å¾®æœ‰ç‚¹å¤æ‚ã€‚å¯ä»¥å‚é˜…<a target="_blank" rel="noopener" href="https://t37.net/nginx-optimization-understanding-sendfile-tcp_nodelay-and-tcp_nopush.html">ã€Šä¼˜åŒ– Nginxã€‹</a>ä¸€æ–‡æ¥äº†è§£è¿™äº›å‚æ•°ï¼ˆåŒ…æ‹¬ <a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#tcp_nodelay">tcp_nodelay</a>ï¼‰çš„è¯¦ç»†æƒ…å†µã€‚ç”±äºæˆ‘ä»¬æ‰“ç®—ç”¨ Nginx æ¥ä¼ é€’é™æ€å†…å®¹ï¼Œå› æ­¤å¯ä»¥è¿™ä¹ˆè®¾ç½®è¿™äº›å‚æ•°ï¼š</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sendfile        <span class="keyword">on</span>;</span><br><span class="line">tcp_nopush     <span class="keyword">on</span>;</span><br><span class="line">tcp_nodelay    <span class="keyword">on</span>;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸ƒä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_timeout">keepalive_timeout</a>ï¼‰å®šä¹‰äº†ä¸å®¢æˆ·ç«¯ä¿æŒè¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼Œåº”å½“ä¿æŒé»˜è®¤å€¼ã€‚</p>
<p>ç¬¬å…«ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html">gzip</a>ï¼‰å®šä¹‰äº† gzip å‹ç¼©ç®—æ³•çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»¥å‡å°‘ä¼ è¾“æ•°æ®é‡ã€‚è™½ç„¶æ•°æ®é‡å‡å°‘äº†ï¼Œä½†ä¹Ÿå› æ­¤å¢åŠ å¹³å°åœ¨å‹ç¼©è¿‡ç¨‹ä¸­çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¥½å¤„ä¸¤ä¸¤æŠµæ¶ˆï¼Œå› æ­¤ä¿æŒå®ƒçš„é»˜è®¤å€¼ï¼ˆoffï¼‰ã€‚</p>
<p>ç¬¬ä¹ä¸ªï¼Œä¹Ÿæ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/ngx_core_module.html#include">include</a>ï¼‰å®šä¹‰äº†ä½äº /etc/nginx/conf.d/ ä¸‹åç¼€åä¸º .conf çš„å…¶å®ƒé…ç½®æ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨è¿™äº›é…ç½®æ–‡ä»¶å®šä¹‰é™æ€å†…å®¹æœåŠ¡å™¨ä»¥åŠ WSGI æœåŠ¡å™¨çš„åå‘ä»£ç†ã€‚</p>
<h4 id="nginx-conf-çš„æœ€ç»ˆé…ç½®"><a href="#nginx-conf-çš„æœ€ç»ˆé…ç½®" class="headerlink" title="nginx.conf çš„æœ€ç»ˆé…ç½®"></a>nginx.conf çš„æœ€ç»ˆé…ç½®</h4><p>åœ¨ nginx.conf é»˜è®¤è®¾ç½®ä¹‹ä¸Šï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®éœ€è¦è°ƒæ•´ä¸€äº›å‚æ•°ï¼ˆå¹¶åŠ ä¸Šæ³¨é‡Šï¼‰ï¼Œä¸‹é¢ä¸ºæœ€ç»ˆç‰ˆæœ¬çš„ nginx.confï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define the user that will own and run the Nginx server</span></span><br><span class="line"><span class="attribute">user</span>  nginx;</span><br><span class="line"><span class="comment"># Define the number of worker processes; recommended value is the number of</span></span><br><span class="line"><span class="comment"># cores that are being used by your server</span></span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the location on the file system of the error log, plus the minimum</span></span><br><span class="line"><span class="comment"># severity to log messages for</span></span><br><span class="line"><span class="attribute">error_log</span>  /var/log/nginx/error.log <span class="literal">warn</span>;</span><br><span class="line"><span class="comment"># Define the file that will store the process ID of the main NGINX process</span></span><br><span class="line"><span class="attribute">pid</span>        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="comment"># events block defines the parameters that affect connection processing.</span></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">   <span class="comment"># Define the maximum number of simultaneous connections that can be opened by a worker process</span></span><br><span class="line">   <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># http block defines the parameters for how NGINX should handle HTTP web traffic</span></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">   <span class="comment"># Include the file defining the list of file types that are supported by NGINX</span></span><br><span class="line">   <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">   <span class="comment"># Define the default file type that is returned to the user</span></span><br><span class="line">   <span class="attribute">default_type</span>  text/html;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the format of log messages.</span></span><br><span class="line">   <span class="attribute">log_format</span>  main  <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">                     <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &#x27;</span></span><br><span class="line">                     <span class="string">&#x27;&quot;<span class="variable">$http_user_agent</span>&quot; &quot;<span class="variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the location of the log of access attempts to NGINX</span></span><br><span class="line">   <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the parameters to optimize the delivery of static content</span></span><br><span class="line">   <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">   <span class="attribute">tcp_nopush</span>     <span class="literal">on</span>;</span><br><span class="line">   <span class="attribute">tcp_nodelay</span>    <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the timeout value for keep-alive connections with the client</span></span><br><span class="line">   <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the usage of the gzip compression algorithm to reduce the amount of data to transmit</span></span><br><span class="line">   <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># Include additional parameters for virtual host(s)/server(s)</span></span><br><span class="line">   <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸ºé™æ€å†…å®¹éƒ¨ç½²åŠåå‘ä»£ç†é…ç½®-Nginx"><a href="#ä¸ºé™æ€å†…å®¹éƒ¨ç½²åŠåå‘ä»£ç†é…ç½®-Nginx" class="headerlink" title="ä¸ºé™æ€å†…å®¹éƒ¨ç½²åŠåå‘ä»£ç†é…ç½® Nginx"></a>ä¸ºé™æ€å†…å®¹éƒ¨ç½²åŠåå‘ä»£ç†é…ç½® Nginx</h5><p>å¦‚æœä½ æŸ¥çœ‹é»˜è®¤çš„ /etc/nginx/conf.g/default.confï¼Œå¯ä»¥çœ‹åˆ°å®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨é…ç½®å—ï¼Œå¹¶ç»™äº†è®¸å¤šå–æ¶ˆæ³¨é‡Šå³å¯ä½¿ç”¨çš„å¯é€‰é…ç½®ã€‚æˆ‘ä»¬ä¸ä¼šæŒ¨ä¸ªå»ç ”ç©¶è¿™ä¸ªæ–‡ä»¶ä¸­çš„é…ç½®ï¼Œè€Œæ˜¯ç›´æ¥æ¢è®¨å¯¹äºæˆ‘ä»¬éƒ¨ç½²é™æ€å†…å®¹ä»¥åŠ WSGI åå‘ä»£ç†æœ‰ç”¨çš„å…³é”®å‚æ•°ã€‚ä»¥ä¸‹æ˜¯æ¨èçš„ _application_name_.conf é…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define the parameters for a specific virtual host/server</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">   <span class="comment"># Define the directory where the contents being requested are stored</span></span><br><span class="line">   <span class="comment"># root /usr/src/app/project/;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the default page that will be served If no page was requested</span></span><br><span class="line">   <span class="comment"># (ie. if www.kennedyfamilyrecipes.com is requested)</span></span><br><span class="line">   <span class="comment"># index index.html;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the server name, IP address, and/or port of the server</span></span><br><span class="line">   <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">   <span class="comment"># server_name xxx.yyy.zzz.aaa</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the specified charset to the â€œContent-Typeâ€ response header field</span></span><br><span class="line">   <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Configure NGINX to deliver static content from the specified folder</span></span><br><span class="line">   <span class="attribute">location</span> /static &#123;</span><br><span class="line">       <span class="attribute">alias</span> /usr/src/app/project/static;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># Configure NGINX to reverse proxy HTTP requests to the upstream server (Gunicorn (WSGI server))</span></span><br><span class="line">   <span class="attribute">location</span> / &#123;</span><br><span class="line">       <span class="comment"># Define the location of the proxy server to send the request to</span></span><br><span class="line">       <span class="attribute">proxy_pass</span> http://web:8000;</span><br><span class="line"></span><br><span class="line">       <span class="comment"># Redefine the header fields that NGINX sends to the upstream server</span></span><br><span class="line">       <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">       <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">       <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment"># Define the maximum file size on file uploads</span></span><br><span class="line">       <span class="attribute">client_max_body_size</span> <span class="number">5M</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœåŠ¡å™¨é…ç½®å—ä¸ºç‰¹å®šçš„è™šæ‹Ÿä¸»æœºæˆ–æœåŠ¡å™¨å®šä¹‰äº†å‚æ•°ã€‚é€šå¸¸ä¸ºä½ åœ¨ VPS ä¸Šéƒ¨ç½²çš„å•ä¸ª Web åº”ç”¨ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#root">root</a>ï¼‰å®šä¹‰äº†è¢«è¯·æ±‚çš„å†…å®¹æ‰€å­˜å‚¨çš„ä½ç½®ã€‚å½“ Nginx æ”¶åˆ°ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œå®ƒä¾¿ä¼šåœ¨æ­¤ç›®å½•ä¸­æŸ¥æ‰¾ã€‚ç”±äºåœ¨é»˜è®¤çš„â€/â€œè·¯å¾„ä¸­å®šä¹‰è¿‡äº†ï¼Œå› æ­¤å¯ä»¥æ³¨é‡Šæ‰è¿™ä¸ªä¸å¿…è¦çš„å‚æ•°ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_index_module.html">index</a>ï¼‰å®šä¹‰äº†åœ¨è¯·æ±‚æœªæŒ‡å®šé¡µé¢æ—¶ï¼ˆæ¯”å¦‚è®¿é—® www.kennedyfamilyrecipes.comï¼‰æ‰€å¾—åˆ°çš„é»˜è®¤é¡µé¢ã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Flask Web åº”ç”¨ç”Ÿæˆçš„åŠ¨æ€å†…å®¹ï¼Œå› æ­¤éœ€è¦æ³¨é‡Šæ‰è¿™ä¸ªå‚æ•°ã€‚</p>
<p>å‰ä¸¤ä¸ªå‚æ•°ï¼ˆroot å’Œ indexï¼‰éƒ½åŒ…å«åœ¨æ­¤é…ç½®æ–‡ä»¶ä¸­ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹å¯ä»¥ç”¨äº Nginx çš„é…ç½®ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name">server_name</a>ï¼‰å’Œç¬¬å››ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#listen">listen</a>ï¼‰éœ€è¦ä¸€åŒä½¿ç”¨ã€‚å¦‚æœä½ çš„ Web åº”ç”¨ç¨‹åºå·²ç»éƒ¨ç½²å¥½äº†ï¼Œé‚£ä¹ˆä½ éœ€è¦è®¾ç½®è¿™äº›å‚æ•°ä¸ºï¼šï¼ˆæ³¨ï¼Œç«¯å£é»˜è®¤ä¸º 80ï¼Œæ­¤æ—¶ä¸éœ€è¦å¡«ï¼‰</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">   â€¦</span><br><span class="line">   Listen <span class="number">192.241</span><span class="number">.229</span><span class="number">.181</span>;</span><br><span class="line">   â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ é™¤äº† www.kennedyfamilyrecipes.com ä¹‹å¤–è¿˜è¦éƒ¨ç½²å¦ä¸€ä¸ª Flask åº”ç”¨ blog.kennedyfamilyrecipes.comï¼Œé‚£ä¹ˆä½ éœ€è¦å°†â€serverâ€œé…ç½®å—æ‹†å¼€ï¼Œåˆ†åˆ«é…ç½®â€user_nameâ€œå’Œâ€listenâ€œï¼š</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name *.kennedyfamilyrecipes.com;</span><br><span class="line"></span><br><span class="line">    . . .</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name blog.kennedyfamilyrecipes.com;</span><br><span class="line"></span><br><span class="line">    . . .</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Nginx å°†é€‰æ‹©æœ€åŒ¹é…è¯·æ±‚çš„â€server_nameâ€œã€‚ä¹Ÿå°±æ˜¯è¯´å¯¹â€blog.kennedyfamilyrecipes.comâ€œçš„è¯·æ±‚ä¼šä¼˜å…ˆåŒ¹é…â€blog.kennedyfamilyrecipes.comâ€œè€Œä¸æ˜¯â€*.kennedyfamilyrecipes.comâ€œã€‚</p>
<p>ç¬¬äº”ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_charset_module.html">charset</a>ï¼‰å®šä¹‰äº†å“åº”å¤´â€Content-Typeâ€œçš„å­—ç¬¦é›†å€¼ï¼Œåº”å½“è®¾ç½®ä¸ºâ€utf-8â€œã€‚</p>
<p>ç¬¬ä¸€ä¸ªâ€locationâ€œé…ç½®å—å®šä¹‰äº† Nginx éœ€è¦é€’é€ä½äºä»¥ä¸‹ä½ç½®çš„é™æ€å†…å®¹ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /<span class="keyword">static</span> &#123;</span><br><span class="line">     alias <span class="regexp">/usr/</span>src<span class="regexp">/app/</span><span class="keyword">project</span>/<span class="keyword">static</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location">location</a> é…ç½®å—å®šä¹‰äº†å¦‚ä½•å¤„ç†è¯·æ±‚çš„ URIï¼ˆåŸŸåæˆ– IPã€ç«¯å£å·ä¹‹åçš„éƒ¨åˆ†ï¼‰ã€‚åœ¨è¿™ç¬¬ä¸€ä¸ª location é…ç½®å—ï¼ˆ/staticï¼‰ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† Nginx å°†ä¼šå¤„ç†æ¥è‡ª www.kennedyfamilyrecipes.com/static/ çš„è¯·æ±‚ï¼Œæ£€ç´¢ä½äº /usr/src/app/project/static ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œè¯·æ±‚ www.kennedyfamilyrecipes.com/static/img/img_1203.jpg å°†ä¼šè¿”å›ä½äº /usr/src/app/project/static/img/img_1203.jpg çš„å›¾ç‰‡æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™å‘ç”¨æˆ·è¿”å› 404 é”™è¯¯ç ï¼ˆNOT FOUNDï¼‰ã€‚</p>
<p>ç¬¬äºŒä¸ª location é…ç½®å—ï¼ˆâ€/â€œï¼‰å®šä¹‰åå‘ä»£ç†ã€‚è¿™ä¸ª location é…ç½®å—ä¼šå®šä¹‰ Nginx å¦‚ä½•å°†è¯·æ±‚ä¼ é€’ç»™ æˆ‘ä»¬çš„ Flask åº”ç”¨æ¥å£æ‰€åœ¨çš„ WSGIï¼ˆGunicornï¼‰æœåŠ¡å™¨ã€‚ä»”ç»†çœ‹çœ‹å…¶ä¸­çš„æ¯ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="attribute">location</span> / &#123;</span><br><span class="line">       <span class="attribute">proxy_pass</span> http://web:8000;</span><br><span class="line">       <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">       <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">       <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">       <span class="attribute">client_max_body_size</span> <span class="number">5M</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass">proxy_pass</a>ï¼‰å®šä¹‰äº†æ¥æ”¶è½¬å‘è¯·æ±‚çš„ä»£ç†æœåŠ¡å™¨çš„ä½ç½®ã€‚å¦‚æœä½ æƒ³å°†è¯·æ±‚è½¬å‘è‡³æœ¬æœºçš„æœåŠ¡å™¨æ—¶å¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_pass http:<span class="regexp">//</span>localhost:<span class="number">8000</span>/;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ å¸Œæœ›å°†è¯·æ±‚è½¬å‘ç»™æŒ‡å®šçš„ Unix socket æ—¶ï¼ˆæ¯”å¦‚å’Œ Nginx è¿è¡Œåœ¨åŒä¸€å°æœºå™¨ä¸­çš„ Gunicorn æœåŠ¡å™¨ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_pass http:<span class="regexp">//u</span>nix:<span class="regexp">/tmp/</span>backend.socket:/</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä½¿ç”¨ Docker å®¹å™¨è¿è¡Œçš„ Nginxï¼Œå¸Œæœ›ä¸å®¹å™¨ä¸­çš„ Gunicorn è¿›è¡Œé€šä¿¡ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨è¿è¡Œ Gunicorn çš„å®¹å™¨åç§°ï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_pass http:<span class="regexp">//</span>web:<span class="number">8000</span>;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass_header">proxy_pass_header</a>ï¼‰å¯ä»¥è®©ä½ é‡æ–°å®šä¹‰å‘å¾€ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæ¯”å¦‚ Gunicornï¼‰çš„è¯·æ±‚çš„å¤´éƒ¨ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥è¿›è¡Œä»¥ä¸‹å››æ¬¡è®¾ç½®ï¼š</p>
<ul>
<li>Nginx æœåŠ¡å™¨çš„åç§°åŠç«¯å£ï¼ˆHost $hostï¼‰</li>
<li>åŸå§‹å®¢æˆ·ç«¯è¯·æ±‚çš„æ¨¡å¼ï¼ˆæ¯”å¦‚æ˜¯ http è¯·æ±‚è¿˜æ˜¯ https è¯·æ±‚ï¼‰ï¼ˆX-Forwarded-Proto $schemeï¼‰</li>
<li>ç”¨æˆ·çš„ IP åœ°å€ï¼ˆX-Real-IP $remote_addrï¼‰</li>
<li>è‡³å½“å‰èŠ‚ç‚¹ä½ç½®ï¼Œå®¢æˆ·ç«¯ç»è¿‡çš„æ‰€æœ‰ä»£ç†çš„ IP åœ°å€ï¼ˆX-Forwarded-For $proxy_add_x_forwarded_forï¼‰</li>
</ul>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆ<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size">client_max_body_size</a>ï¼‰å®šä¹‰äº†æ–‡ä»¶ä¸Šä¼ å…è®¸çš„æœ€å¤§å¤§å°ï¼Œå¯¹äºéœ€è¦ä¸Šä¼ æ–‡ä»¶çš„ Web åº”ç”¨æ¥è¯´éå¸¸é‡è¦ã€‚ç”±äºå›¾åƒå¤§å°ä¸€èˆ¬åœ¨ 2 MB å†…ï¼Œå› æ­¤åœ¨è¿™å„¿è®¾ç½® 5 MB åŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³ä»»ä½•å›¾åƒã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><p>æœ¬æ–‡ä»‹ç»äº†ä»€ä¹ˆæ˜¯ Nginx æœåŠ¡å™¨ï¼Œä»¥åŠå¦‚ä½•ä¸ºä¸€ä¸ª Flask åº”ç”¨å¯¹å…¶è¿›è¡Œé…ç½®ã€‚Nginx æ˜¯å¤§å¤šæ•° Web åº”ç”¨çš„å…³é”®ç»„ä»¶ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›é™æ€å†…å®¹ã€åå‘ä»£ç†è¯·æ±‚è‡³ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆåœ¨æˆ‘ä»¬çš„ Flask Web åº”ç”¨ä¸­æ˜¯ WSGIï¼‰ï¼Œä»¥åŠè´Ÿè½½å‡è¡¡ï¼ˆæœ¬æ–‡æœªæåŠï¼‰ã€‚å¸Œæœ›çœ‹å®Œæœ¬æ–‡åä½ èƒ½æ›´è½»æ¾åœ°ç†è§£ Nginx çš„é…ç½®ï¼</p>
<h3 id="å¼•ç”¨èµ„æ–™"><a href="#å¼•ç”¨èµ„æ–™" class="headerlink" title="å¼•ç”¨èµ„æ–™"></a><strong>å¼•ç”¨èµ„æ–™</strong></h3><p><a target="_blank" rel="noopener" href="https://www.linode.com/docs/websites/nginx/how-to-configure-nginx">How to Configure NGINX (Linode)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.nginx.com/resources/wiki/">NGINX Wiki</a></p>
<p><a target="_blank" rel="noopener" href="https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/">NGINX Pitfalls and Common Mistakes</a></p>
<p><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-configure-the-nginx-web-server-on-a-virtual-private-server">How to Configure the NGINX Web Server on a VPS (DigitalOcean)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms">Understanding NGINX Server and Location Block Selection Algorithms (DigitalOcean)</a></p>
<p><a target="_blank" rel="noopener" href="https://t37.net/nginx-optimization-understanding-sendfile-tcp_nodelay-and-tcp_nopush.html">NGINX Optimization: Understanding sendfile, tcp_nodelay, and tcp_nopush</a></p>
<blockquote>
<p>æœ¬æ–‡å‘å¸ƒäºæ˜é‡‘ <a target="_blank" rel="noopener" href="https://juejin.im/post/5a795febf265da4e94499949">https://juejin.im/post/5a795febf265da4e94499949</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/01/16/TML-5-2-%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B0%E5%86%85%E5%AE%B9%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/16/TML-5-2-%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B0%E5%86%85%E5%AE%B9%EF%BC%9F/" class="post-title-link" itemprop="url">HTML 5.2 æœ‰å“ªäº›æ–°å†…å®¹ï¼Ÿ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-01-16 15:40:08" itemprop="dateCreated datePublished" datetime="2018-01-16T15:40:08+08:00">2018-01-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Translate/" itemprop="url" rel="index"><span itemprop="name">Translate</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>å°±åœ¨ä¸åˆ°ä¸€ä¸ªæœˆå‰ï¼ŒHTML 5.2 æ­£å¼æˆä¸ºäº† W3C çš„æ¨èæ ‡å‡†ï¼ˆRECï¼‰ã€‚å½“ä¸€ä¸ªè§„èŒƒåˆ°è¾¾ REC é˜¶æ®µï¼Œå°±æ„å‘³ç€å®ƒå·²ç»æ­£å¼å¾—åˆ°äº† W3C æˆå‘˜å’Œç†äº‹é•¿çš„è®¤å¯ã€‚å¹¶ä¸” W3C å°†æ­£å¼æ¨èæµè§ˆå™¨å‚å•†éƒ¨ç½²ã€web å¼€å‘è€…å®ç°æ­¤è§„èŒƒã€‚</p>
<p>åœ¨ REC é˜¶æ®µæœ‰ä¸ªåŸåˆ™å«åš<a target="_blank" rel="noopener" href="https://www.slideshare.net/rachelandrew/where-does-css-come-from/27?src=clipshare">â€œä»»ä½•æ–°äº‹ç‰©éƒ½è‡³å°‘è¦æœ‰ä¸¤ç§ç‹¬ç«‹çš„å®ç°â€</a>ï¼Œè¿™å¯¹äºæˆ‘ä»¬ web å¼€å‘è€…æ¥è¯´æ˜¯ä¸€ä¸ªå®è·µæ–°ç‰¹æ€§çš„ç»ä½³æœºä¼šã€‚</p>
<p>åœ¨ HTML 5.2 ä¸­æœ‰ä¸€äº›æ·»åŠ å’Œåˆ é™¤ï¼Œå…·ä½“æ”¹å˜å¯ä»¥å‚è€ƒå®˜æ–¹çš„ <a target="_blank" rel="noopener" href="https://www.w3.org/TR/html52/changes.html#changes">HTML 5.2 å˜åŠ¨å†…å®¹</a>ç½‘é¡µã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€äº›æˆ‘è®¤ä¸ºä¸æˆ‘çš„å¼€å‘æœ‰å…³çš„æ”¹åŠ¨ã€‚</p>
<h2 id="æ–°ç‰¹æ€§"><a href="#æ–°ç‰¹æ€§" class="headerlink" title="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§</h2><h3 id="åŸç”Ÿçš„-lt-dialog-gt-å…ƒç´ "><a href="#åŸç”Ÿçš„-lt-dialog-gt-å…ƒç´ " class="headerlink" title="åŸç”Ÿçš„ &lt;dialog&gt; å…ƒç´ "></a>åŸç”Ÿçš„ <code>&lt;dialog&gt;</code> å…ƒç´ </h3><p>åœ¨ HTML 5.2 çš„æ‰€æœ‰æ”¹åŠ¨ä¸­ï¼Œæœ€è®©æˆ‘æ¿€åŠ¨çš„å°±æ˜¯å…³äº <a target="_blank" rel="noopener" href="https://www.w3.org/TR/html52/interactive-elements.html#elementdef-dialog"><code>&lt;dialog&gt;</code> å…ƒç´ </a>è¿™ä¸ªåŸç”Ÿå¯¹è¯æ¡†çš„ä»‹ç»ã€‚åœ¨ web ä¸­ï¼Œå¯¹è¯æ¡†æ¯”æ¯”çš†æ˜¯ï¼Œä½†æ˜¯å®ƒä»¬çš„å®ç°æ–¹å¼éƒ½å„æœ‰ä¸åŒã€‚å¯¹è¯æ¡†å¾ˆéš¾å®ç°å¯è®¿é—®æ€§ï¼Œè¿™å¯¼è‡´å¤§å¤šæ•°çš„å¯¹è¯æ¡†å¯¹é‚£äº›ä¸æ–¹ä¾¿ä»¥è§†è§‰æ–¹å¼è®¿é—®ç½‘é¡µçš„ç”¨æˆ·æ¥è¯´éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚</p>
<p>æ–°çš„ <code>&lt;dialog&gt;</code> å…ƒç´ æ—¨åœ¨æ”¹å˜è¿™ç§çŠ¶å†µï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥å®ç°æ¨¡æ€å¯¹è¯æ¡†ã€‚ä¹‹åæˆ‘ä¼šå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« ä¸“é—¨ä»‹ç»è¿™ä¸ªå…ƒç´ çš„å·¥ä½œæ–¹å¼ï¼Œåœ¨æ­¤å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p>
<p>ç”±ä¸€ä¸ª <code>&lt;dialog&gt;</code> å…ƒç´ åˆ›å»ºå¯¹è¯æ¡†ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dialog</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Dialog Title<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Dialog content and other stuff will go here<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dialog</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹è¯æ¡†ä¼šåœ¨è§†å›¾ä¸­ï¼ˆä»¥åŠ DOM è®¿é—®ä¸­ï¼‰éšè—ï¼Œåªæœ‰è®¾ç½® open å±æ€§åï¼Œå¯¹è¯æ¡†æ‰ä¼šæ˜¾ç¤ºã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dialog</span> <span class="attr">open</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p><code>open</code> å±æ€§å¯ä»¥é€šè¿‡è°ƒç”¨ <code>show()</code> ä¸ <code>close()</code> æ–¹æ³•å¼€å¯æˆ–å…³é—­ï¼Œä»»ä½• <code>HTMLDialogElement</code> éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;open&quot;</span>&gt;</span>Open Dialog<span class="tag">&lt;/<span class="name">button</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;close&quot;</span>&gt;</span>Close Dialog<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dialog</span> <span class="attr">id</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Dialog Title<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Dialog content and other stuff will go here<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="javascript"><span class="keyword">const</span> dialog = <span class="built_in">document</span>.getElementById(<span class="string">&quot;dialog&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">&quot;open&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;  </span></span><br><span class="line">  dialog.show();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">&quot;close&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;  </span></span><br><span class="line">  dialog.close();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>ç›®å‰ï¼ŒChrome æµè§ˆå™¨å·²ç»æ”¯æŒ <code>&lt;dialog&gt;</code> å…ƒç´ ï¼ŒFirefox ä¹Ÿå³å°†æ”¯æŒï¼ˆbehind a flagï¼‰ã€‚ </p>
<p><img src="/images/pasted-304.png" alt="upload successful"></p>
<p>ä¸Šå›¾ä¸º caniuse.com å…³äº dialog ç‰¹æ€§ä¸»æµæµè§ˆå™¨å…¼å®¹æƒ…å†µçš„æ•°æ®</p>
<h3 id="åœ¨-iFrame-ä¸­ä½¿ç”¨-Payment-Request-APIï¼ˆæ”¯ä»˜è¯·æ±‚-APIï¼‰"><a href="#åœ¨-iFrame-ä¸­ä½¿ç”¨-Payment-Request-APIï¼ˆæ”¯ä»˜è¯·æ±‚-APIï¼‰" class="headerlink" title="åœ¨ iFrame ä¸­ä½¿ç”¨ Payment Request APIï¼ˆæ”¯ä»˜è¯·æ±‚ APIï¼‰"></a>åœ¨ iFrame ä¸­ä½¿ç”¨ Payment Request APIï¼ˆæ”¯ä»˜è¯·æ±‚ APIï¼‰</h3><p><a target="_blank" rel="noopener" href="https://www.w3.org/TR/payment-request/">Payment Request API</a> æ˜¯æ”¯ä»˜ç»“ç®—è¡¨å•çš„åŸç”Ÿæ›¿ä»£æ–¹æ¡ˆã€‚å®ƒå°†æ”¯ä»˜ä¿¡æ¯ç½®äºæµè§ˆå™¨å¤„ç†ï¼Œç”¨æ¥ä»£æ›¿ä¹‹å‰å„ä¸ªç½‘ç«™å„ä¸ç›¸åŒçš„ç»“ç®—è¡¨å•ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¸€ç§æ ‡å‡†ã€ä¸€è‡´çš„æ”¯ä»˜æ–¹å¼ã€‚</p>
<p>åœ¨ HTML 5.2 ä¹‹å‰ï¼Œè¿™ç§æ”¯ä»˜è¯·æ±‚æ— æ³•åœ¨æ–‡æ¡£åµŒå…¥çš„ iframe ä¸­ä½¿ç”¨ï¼Œå¯¼è‡´ç¬¬ä¸‰æ–¹åµŒå…¥å¼æ”¯ä»˜è§£å†³æ–¹æ¡ˆï¼ˆå¦‚ Stripe, Paystackï¼‰åŸºæœ¬ä¸å¯èƒ½ä½¿ç”¨è¿™ä¸ª APIï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯åœ¨ iframe ä¸­å¤„ç†æ”¯ä»˜æ¥å£ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒHTML 5.2 å¼•å…¥äº†ç”¨äº iframe çš„ <code>allowpaymentrequest</code> å±æ€§ï¼Œå…è®¸ç”¨æˆ·åœ¨å®¿ä¸»ç½‘é¡µä¸­è®¿é—® iframe çš„ Payment Request APIã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">allowpaymentrequest</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<h3 id="è‹¹æœçš„å›¾æ ‡å°ºå¯¸"><a href="#è‹¹æœçš„å›¾æ ‡å°ºå¯¸" class="headerlink" title="è‹¹æœçš„å›¾æ ‡å°ºå¯¸"></a>è‹¹æœçš„å›¾æ ‡å°ºå¯¸</h3><p>å¦‚è¦å®šä¹‰ç½‘é¡µå›¾æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡æ¡£çš„ head ä¸­ä½¿ç”¨ <code>&lt;link rel=&quot;icon&quot;&gt;</code> å…ƒç´ ã€‚å¦‚æœè¦å®šä¹‰ä¸åŒå°ºå¯¸çš„å›¾æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>sizes</code> å±æ€§ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;16x16&quot;</span> <span class="attr">href</span>=<span class="string">&quot;path/to/icon16.png&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;32x32&quot;</span> <span class="attr">href</span>=<span class="string">&quot;path/to/icon32.png&quot;</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå±æ€§è™½ç„¶çº¯ç²¹æ˜¯ä¸ªå»ºè®®ï¼Œä½†å¦‚æœæä¾›äº†å¤šç§å°ºå¯¸çš„å›¾æ ‡ï¼Œå¯ä»¥è®©ç”¨æˆ·ä»£ç†ï¼ˆUAï¼‰å†³å®šä½¿ç”¨å“ªç§å°ºå¯¸çš„å›¾æ ‡ã€‚åœ¨å¤§å¤šæ•°è®¾å¤‡æœ‰ç€ä¸åŒçš„â€œæœ€ä½³â€å›¾æ ‡å°ºå¯¸æ—¶å°¤ä¸ºé‡è¦ã€‚</p>
<p>åœ¨ HTML 5.2 ä¹‹å‰ï¼Œ<code>sizes</code> å±æ€§ä»…èƒ½ç”¨äº rel ä¸º <code>icon</code> çš„ link å…ƒç´ ä¸­ã€‚ç„¶è€Œï¼Œè‹¹æœçš„ iOS è®¾å¤‡ä¸æ”¯æŒ <code>sizes</code> å±æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè‹¹æœè‡ªå·±å¼•å…¥äº†ä¸€ä¸ªä»–ä»¬è®¾å¤‡ä¸“ç”¨çš„ rel <code>appple-touch-icon</code> ç”¨äºå®šä¹‰ä»–ä»¬è®¾å¤‡ä¸Šä½¿ç”¨çš„å›¾æ ‡ã€‚</p>
<p>åœ¨ HTML 5.2 ä¸­ï¼Œè§„èŒƒå®šä¹‰äº† <code>sizes</code> å±æ€§<strong>ä¸å†ä»…ä»…</strong>å¯ç”¨äº rel ä¸º <code>icon</code> çš„å…ƒç´ ï¼Œä¹Ÿèƒ½ç”¨äº rel ä¸º <code>apple-touch-icon</code> çš„å…ƒç´ ã€‚è¿™æ ·å¯ä»¥è®©æˆ‘ä»¬ä¸ºä¸åŒçš„è‹¹æœè®¾å¤‡æä¾›ä¸åŒå°ºå¯¸çš„å›¾æ ‡ã€‚ä¸è¿‡ç›´åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ®æˆ‘æ‰€çŸ¥è‹¹æœçš„è®¾å¤‡è¿˜æ˜¯ä¸æ”¯æŒ <code>sizes</code> å±æ€§ã€‚åœ¨å°†æ¥è‹¹æœæœ€ç»ˆæ”¯æŒæ­¤è§„èŒƒæ—¶ï¼Œå®ƒå°†æ´¾ä¸Šç”¨åœºã€‚</p>
<h2 id="æ–°çš„æœ‰æ•ˆå®è·µ"><a href="#æ–°çš„æœ‰æ•ˆå®è·µ" class="headerlink" title="æ–°çš„æœ‰æ•ˆå®è·µ"></a>æ–°çš„æœ‰æ•ˆå®è·µ</h2><p>é™¤äº†æ–°ç‰¹æ€§ä¹‹å¤–ï¼ŒHTML 5.2 è¿˜å°†ä¸€äº›ä¹‹å‰æ— æ•ˆçš„ HTML å†™æ³•è®¤å®šä¸ºæœ‰æ•ˆã€‚</p>
<h3 id="å¤šä¸ª-lt-main-gt-å…ƒç´ "><a href="#å¤šä¸ª-lt-main-gt-å…ƒç´ " class="headerlink" title="å¤šä¸ª &lt;main&gt; å…ƒç´ "></a>å¤šä¸ª <code>&lt;main&gt;</code> å…ƒç´ </h3><p><code>&lt;main&gt;</code> å…ƒç´ ä»£è¡¨ç½‘é¡µçš„ä¸»è¦å†…å®¹ã€‚è™½ç„¶ä¸åŒç½‘é¡µçš„é‡å¤å†…å®¹å¯ä»¥æ”¾åœ¨ headerã€section æˆ–è€…å…¶å®ƒå…ƒç´ ä¸­ï¼Œä½† <code>&lt;main&gt;</code> å…ƒç´ æ˜¯ä¸ºé¡µé¢ä¸Šçš„ç‰¹å®šå†…å®¹ä¿ç•™çš„ã€‚å› æ­¤åœ¨ HTML 5.2 ä¹‹å‰ï¼Œ<code>&lt;main&gt;</code> å…ƒç´ åœ¨ DOM ä¸­å¿…é¡»å”¯ä¸€æ‰èƒ½ä»¤é¡µé¢æœ‰æ•ˆã€‚</p>
<p>éšç€å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰çš„æ™®åŠï¼Œè¦åšæŒè¿™ä¸ªåŸåˆ™å˜å¾—å›°éš¾èµ·æ¥ã€‚åœ¨åŒä¸€ä¸ªç½‘é¡µçš„ DOM ä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ª <code>&lt;main&gt;</code> å…ƒç´ ï¼Œä½†åœ¨ä»»æ„æ—¶åˆ»åªèƒ½ç»™ç”¨æˆ·å±•ç¤ºå…¶ä¸­çš„ä¸€ä¸ªã€‚</p>
<p>ä½¿ç”¨ HTML 5.2ï¼Œæˆ‘ä»¬åªè¦ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ª <code>&lt;main&gt;</code> å…ƒç´ å¯è§ï¼Œå°±èƒ½åœ¨æˆ‘ä»¬çš„æ ‡ç­¾ä¸­ä½¿ç”¨å¤šä¸ª <code>&lt;main&gt;</code> å…ƒç´ ã€‚ä¸æ­¤åŒæ—¶å…¶å®ƒçš„ <code>&lt;main&gt;</code> å…ƒç´ å¿…é¡»ä½¿ç”¨ <code>hidden</code> å±æ€§è¿›è¡Œéšè—ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">hidden</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">hidden</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ<a target="_blank" rel="noopener" href="https://bitsofco.de/hiding-elements-with-css/">é€šè¿‡ CSS æ¥éšè—å…ƒç´ çš„æ–¹æ³•æœ‰å¾ˆå¤š</a>ï¼Œä½†å¤šä½™çš„ <code>&lt;main&gt;</code> å…ƒç´ å¿…é¡»ä½¿ç”¨ <code>hidden</code> å±æ€§è¿›è¡Œéšè—ã€‚ä»»ä½•å…¶å®ƒéšè—æ­¤å…ƒç´ çš„æ–¹æ³•ï¼ˆå¦‚ <code>display: none;</code> å’Œ <code>visibility: hidden;</code>ï¼‰éƒ½å°†æ— æ•ˆã€‚</p>
<h3 id="åœ¨-lt-body-gt-ä¸­å†™æ ·å¼"><a href="#åœ¨-lt-body-gt-ä¸­å†™æ ·å¼" class="headerlink" title="åœ¨ &lt;body&gt; ä¸­å†™æ ·å¼"></a>åœ¨ <code>&lt;body&gt;</code> ä¸­å†™æ ·å¼</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨<code>&lt;style&gt;</code>å…ƒç´ å®šä¹‰çš„å†…è” CSS æ ·å¼ä¼šæ”¾ç½®åœ¨ HTML æ–‡æ¡£çš„ <code>&lt;head&gt;</code> ä¸­ã€‚éšç€ç»„ä»¶åŒ–å¼€å‘çš„æµè¡Œï¼Œå¼€å‘è€…å·²ç»å‘ç°ç¼–å†™ style å¹¶æ”¾ç½®åœ¨ä¸å…¶ç›¸å…³çš„ html ä¸­æ›´åŠ æœ‰ç›Šã€‚</p>
<p>åœ¨ HTML 5.2 ä¸­ï¼Œå¯ä»¥åœ¨ HTML æ–‡æ¡£ <code>&lt;body&gt;</code> å†…çš„ä»»ä½•åœ°æ–¹å®šä¹‰å†…è” <code>&lt;style&gt;</code> æ ·å¼å—ã€‚è¿™æ„å‘³ç€æ ·å¼å®šä¹‰å¯ä»¥ç¦»å®ƒä»¬è¢«ä½¿ç”¨çš„åœ°æ–¹æ›´è¿‘ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Iâ€™m cornflowerblue!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123; <span class="attribute">color</span>: cornflowerblue; &#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Iâ€™m cornflowerblue!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œä»éœ€æ³¨æ„çš„æ˜¯ï¼Œ<strong>ç”±äºæ€§èƒ½é—®é¢˜ï¼Œæ ·å¼è¿˜æ˜¯åº”å½“ä¼˜å…ˆè€ƒè™‘æ”¾åœ¨ <code>&lt;head&gt;</code> ä¸­</strong>ã€‚å‚è§ <a target="_blank" rel="noopener" href="https://www.w3.org/TR/html52/document-metadata.html#elementdef-style">è§„èŒƒ</a>ï¼Œ</p>
<blockquote>
<p>æ ·å¼å…ƒç´ æœ€å¥½ç”¨äºæ–‡æ¡£çš„ head ä¸­ã€‚åœ¨æ–‡æ¡£çš„ body ä¸­ä½¿ç”¨æ ·å¼å¯èƒ½å¯¼è‡´é‡å¤å®šä¹‰æ ·å¼ï¼Œè§¦å‘é‡å¸ƒå±€ã€å¯¼è‡´é‡ç»˜ï¼Œå› æ­¤éœ€è¦å°å¿ƒä½¿ç”¨ã€‚</p>
</blockquote>
<p>æ­¤å¤–è¿˜åº”è¯¥æ³¨æ„çš„æ˜¯å¦‚ç¤ºä¾‹æ‰€ç¤ºï¼Œæ ·å¼ä¸å­˜åœ¨ä½œç”¨åŸŸã€‚åæ¥åœ¨ HTML æ–‡æ¡£ä¸­å®šä¹‰çš„å†…è”æ ·å¼ä»ç„¶ä¼šåº”ç”¨äºä¹‹å‰å®šä¹‰çš„å…ƒç´ ï¼Œæ‰€ä»¥å®ƒå¯èƒ½ä¼šè§¦å‘é‡ç»˜ã€‚</p>
<h3 id="lt-legend-gt-ä¸­çš„æ ‡é¢˜å…ƒç´ "><a href="#lt-legend-gt-ä¸­çš„æ ‡é¢˜å…ƒç´ " class="headerlink" title="&lt;legend&gt; ä¸­çš„æ ‡é¢˜å…ƒç´ "></a><code>&lt;legend&gt;</code> ä¸­çš„æ ‡é¢˜å…ƒç´ </h3><p>åœ¨è¡¨å•ä¸­ï¼Œ<code>&lt;legend&gt;</code> å…ƒç´ è¡¨ç¤º <code>&lt;fieldset&gt;</code> è¡¨å•åŸŸä¸­çš„æ ‡é¢˜ã€‚åœ¨ HTML 5.2 å‰ï¼Œlegend å…ƒç´ çš„å†…å®¹å¿…é¡»ä¸ºçº¯æ–‡æœ¬ã€‚è€Œç°åœ¨ï¼Œå®ƒå¯ä»¥åŒ…å«æ ‡é¢˜å…ƒç´ ï¼ˆ<code>&lt;h1&gt;</code>ç­‰ï¼‰äº†ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Basic Information<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Form fields for basic information --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Contact Information<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Form fields for contact information --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æƒ³ç”¨ <code>fieldset</code> å¯¹è¡¨å•ä¸­ä¸åŒéƒ¨åˆ†è¿›è¡Œåˆ†ç»„æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§éå¸¸æœ‰ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨æ ‡é¢˜å…ƒç´ æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºè¿™èƒ½è®©é‚£äº›ä¾èµ–äºæ–‡æ¡£å¤§çº²çš„ç”¨æˆ·å¯ä»¥è½»æ¾å¯¼èˆªè‡³è¡¨å•çš„å¯¹åº”éƒ¨åˆ†ã€‚</p>
<h2 id="ç§»é™¤çš„ç‰¹æ€§"><a href="#ç§»é™¤çš„ç‰¹æ€§" class="headerlink" title="ç§»é™¤çš„ç‰¹æ€§"></a>ç§»é™¤çš„ç‰¹æ€§</h2><p>åœ¨ HTML 5.2 ä¸­ç§»é™¤äº†ä¸€äº›å…ƒç´ ï¼Œå…·ä½“ä¸ºï¼š</p>
<ul>
<li><code>keygen</code>ï¼šæ›¾ç»ç”¨äºå¸®åŠ©è¡¨å•ç”Ÿæˆå…¬é’¥</li>
<li><code>menu</code> ä¸ <code>menuitem</code>ï¼šæ›¾ç»ç”¨äºåˆ›å»ºå¯¼èˆªä¸å†…å®¹èœå•</li>
</ul>
<h2 id="æ–°çš„æ— æ•ˆå®è·µ"><a href="#æ–°çš„æ— æ•ˆå®è·µ" class="headerlink" title="æ–°çš„æ— æ•ˆå®è·µ"></a>æ–°çš„æ— æ•ˆå®è·µ</h2><p>æœ€åï¼Œä¸€äº›å¼€å‘å®è·µæ–¹å¼è¢«è§„å®šä¸å†æœ‰æ•ˆã€‚</p>
<h3 id="åœ¨-lt-p-gt-ä¸­ä¸å†èƒ½åŒ…å«è¡Œå†…ã€æµ®åŠ¨ã€å—ç±»å‹çš„å­å…ƒç´ "><a href="#åœ¨-lt-p-gt-ä¸­ä¸å†èƒ½åŒ…å«è¡Œå†…ã€æµ®åŠ¨ã€å—ç±»å‹çš„å­å…ƒç´ " class="headerlink" title="åœ¨ &lt;p&gt; ä¸­ä¸å†èƒ½åŒ…å«è¡Œå†…ã€æµ®åŠ¨ã€å—ç±»å‹çš„å­å…ƒç´ "></a>åœ¨ <code>&lt;p&gt;</code> ä¸­ä¸å†èƒ½åŒ…å«è¡Œå†…ã€æµ®åŠ¨ã€å—ç±»å‹çš„å­å…ƒç´ </h3><p>åœ¨ HTML 5.2 ä¸­ï¼Œ<code>&lt;p&gt;</code> å…ƒç´ ä¸­å”¯ä¸€åˆæ³•çš„å­å…ƒç´ åªèƒ½æ˜¯æ–‡å­—å†…å®¹ã€‚è¿™ä¹Ÿæ„å‘³ç€ä»¥ä¸‹ç±»å‹çš„å…ƒç´ ä¸å†èƒ½åµŒå¥—äºæ®µè½æ ‡ç­¾ <code>&lt;p&gt;</code> å†…ï¼š</p>
<ul>
<li>è¡Œå†…å—ï¼ˆInline blocksï¼‰</li>
<li>è¡Œå†…è¡¨æ ¼ï¼ˆInline tablesï¼‰</li>
<li>æµ®åŠ¨å—ä¸å›ºå®šä½ç½®å—</li>
</ul>
<h3 id="ä¸å†æ”¯æŒä¸¥æ ¼æ–‡æ¡£ç±»å‹ï¼ˆStrict-Doctypesï¼‰"><a href="#ä¸å†æ”¯æŒä¸¥æ ¼æ–‡æ¡£ç±»å‹ï¼ˆStrict-Doctypesï¼‰" class="headerlink" title="ä¸å†æ”¯æŒä¸¥æ ¼æ–‡æ¡£ç±»å‹ï¼ˆStrict Doctypesï¼‰"></a>ä¸å†æ”¯æŒä¸¥æ ¼æ–‡æ¡£ç±»å‹ï¼ˆStrict Doctypesï¼‰</h3><p>æœ€åï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥å’Œè¿™äº›æ–‡æ¡£ç±»å‹è¯´å†è§äº†ï¼</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//W3C//DTD HTML 4.01//EN&quot;</span> <span class="meta-string">&quot;http://www.w3.org/TR/html4/strict.dtd&quot;</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span> <span class="meta-string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ¬æ–‡å‘å¸ƒäºæ˜é‡‘ <a target="_blank" rel="noopener" href="https://juejin.im/post/5a5dab05518825734107edda#comment">https://juejin.im/post/5a5dab05518825734107edda#comment</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/01/16/%E8%BF%9E%E6%8E%A5-cisco-anyconnect-%E5%90%8E%E7%BD%91%E7%BB%9C%E5%8F%97%E9%99%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/16/%E8%BF%9E%E6%8E%A5-cisco-anyconnect-%E5%90%8E%E7%BD%91%E7%BB%9C%E5%8F%97%E9%99%90/" class="post-title-link" itemprop="url">è¿æ¥ cisco anyconnect åç½‘ç»œå—é™</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-01-16 01:47:00" itemprop="dateCreated datePublished" datetime="2018-01-16T01:47:00+08:00">2018-01-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tool/" itemprop="url" rel="index"><span itemprop="name">Tool</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>åŸå› æ˜¯æœåŠ¡ç«¯æœªå¼€å¯ NAT</p>
<p>è§£å†³æ–¹æ¡ˆ</p>
<p>1ã€å…³é—­ ocservï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/ocserv stop</span><br></pre></td></tr></table></figure></p>
<p>2ã€å¼€å¯ NAT</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A POSTROUTING -j MASQUERADE</span><br></pre></td></tr></table></figure>
<p>3ã€å¼€å¯ ocservï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ocserv -c /etc/ocserv/config</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/ocserv start</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/01/03/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB%E5%8F%8A%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/03/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB%E5%8F%8A%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">ç¼–è¾‘è·ç¦»åŠç¼–è¾‘è·ç¦»ç®—æ³•</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-01-03 15:00:00" itemprop="dateCreated datePublished" datetime="2018-01-03T15:00:00+08:00">2018-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ç¼–è¾‘è·ç¦»åˆç§°ä¸º Levenshtein è·ç¦»ï¼ŒæŒ‡ä¸¤ä¸ªå­—ä¸²ä¹‹é—´ï¼Œç”±ä¸€ä¸ªè½¬æˆå¦ä¸€ä¸ªæ‰€éœ€çš„æœ€å°‘ç¼–è¾‘æ“ä½œæ¬¡æ•°ã€‚æ“ä½œåŒ…æ‹¬å°†ä¸€ä¸ªå­—ç¬¦æ›¿æ¢æˆå¦ä¸€ä¸ªå­—ç¬¦ï¼Œæ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç¼–è¾‘è·ç¦»è¶Šå°ï¼Œä¸¤ä¸ªä¸²çš„ç›¸ä¼¼åº¦è¶Šå¤§ã€‚ï¼ˆcite from <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/ç¼–è¾‘è·ç¦»/8010193?fr=aladdin">baidu baike</a>ï¼‰</p>
<p>æœ€å°ç¼–è¾‘è·ç¦»åœ¨åº”ç”¨ä¸­å¸¸ä½œä¸ºä¸€ç§ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ã€‚ä¾‹å¦‚DNAåˆ†æã€æ‹¼å†™çº é”™ï¼ˆSpell correctionï¼‰ã€å‘½åå®ä½“æŠ½å–ï¼ˆNamed Entity Extractionï¼‰ã€å®ä½“å…±æŒ‡ï¼ˆEntity Conferenceï¼‰ã€è¯†åˆ«å¹³è¡Œç½‘é¡µç­‰ã€‚</p>
<p>è®¡ç®—æŸä¸¤ä¸ªå­—ç¬¦ä¸²çš„ç¼–è¾‘è·ç¦»æ—¶ï¼Œå¯ä»¥åˆ—ä¸‹é¢çš„è¡¨ï¼šï¼ˆå¦‚ apple ä¸ peopleï¼‰</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>p</th>
<th>e</th>
<th>o</th>
<th>p</th>
<th>l</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>p</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>p</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>l</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³éå†ï¼Œå¯¹äºæ¯ä¸€ä¸ªç©ºæ¥è¯´ï¼Œå®ƒçš„å€¼ä¸ºï¼š</p>
<ul>
<li>å·¦è¾¹æ•°å­— +1</li>
<li>ä¸Šé¢æ•°å­— +1</li>
<li>å¦‚å¯¹åº”çš„è¡Œå¤´ä¸åˆ—å¤´çš„å­—æ¯ç›¸ç­‰ï¼Œåˆ™å–å·¦ä¸Šè§’çš„æ•°å­—ï¼›å¦åˆ™å–å·¦ä¸Šè§’æ•°å­— +1</li>
</ul>
<p>è¿™ä¸‰è€…çš„æœ€å°å€¼ã€‚åå¤éå†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>p</th>
<th>e</th>
<th>o</th>
<th>p</th>
<th>l</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>p</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>p</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>l</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>p</th>
<th>e</th>
<th>o</th>
<th>p</th>
<th>l</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>p</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>p</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>l</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>p</th>
<th>e</th>
<th>o</th>
<th>p</th>
<th>l</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>p</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>p</td>
<td>3</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>l</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>p</th>
<th>e</th>
<th>o</th>
<th>p</th>
<th>l</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>p</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>p</td>
<td>3</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>l</td>
<td>4</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>e</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>p</th>
<th>e</th>
<th>o</th>
<th>p</th>
<th>l</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>p</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>p</td>
<td>3</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>l</td>
<td>4</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>e</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>å³ä¸‹è§’æ•°å­—ä¸º 3ï¼Œåˆ™ apple ä¸ people çš„ç¼–è¾‘è·ç¦»ä¸º 3ã€‚</p>
<p>ä»£ç ï¼š<br>æ ¹æ®ä»¥ä¸Šè‡ªç„¶è¯­è¨€çš„æè¿°ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨éå†å†™å‡ºç›¸åº”ä»£ç ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">literation</span>(<span class="params">matrix</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, len(matrix)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>, len(matrix[<span class="number">0</span>])):</span><br><span class="line">            up_num = matrix[i - <span class="number">1</span>][j]</span><br><span class="line">            left_num = matrix[i][j - <span class="number">1</span>]</span><br><span class="line">            left_up_num = matrix[i - <span class="number">1</span>][j - <span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> matrix[<span class="number">0</span>][j] != matrix[i][<span class="number">0</span>]:</span><br><span class="line">                left_up_num += <span class="number">1</span></span><br><span class="line">            matrix[i][j] = min(up_num + <span class="number">1</span>, left_num + <span class="number">1</span>, left_up_num)</span><br><span class="line">            print_matrix(matrix)</span><br><span class="line">    <span class="keyword">return</span> matrix</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>å®Œæ•´ä»£ç æ”¾åœ¨ <a target="_blank" rel="noopener" href="https://github.com/lsvih/algorithm-practice/blob/master/edit-distance/edit-distance.py">github ä¸Š</a></p>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/images/pasted-303.png" alt="upload successful"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2018/01/03/How-to-write-an-introduction-for-a-paper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/03/How-to-write-an-introduction-for-a-paper/" class="post-title-link" itemprop="url">How to write an introduction for a paper</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-01-03 13:27:00" itemprop="dateCreated datePublished" datetime="2018-01-03T13:27:00+08:00">2018-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Paper/" itemprop="url" rel="index"><span itemprop="name">Paper</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>An awesome paper introduction will catch oneâ€™s eyes and it is benefit to organize the rest of paper.</p>
<p>Do a simple introduction of what I did and the things I did will improve which related domainâ€™s work.</p>
<p>For example, the section of introduction can splice into 4 paragraphs:</p>
<p>First paragraph introduce meaning of paper and some related works (as a short literature review);</p>
<p>Second paragraph present my innovation of this paper, such as which newest methods I have using, or which feature no one used;</p>
<p>Third paragraph do a summary for previous;</p>
<p>Fourth paragraph display a summary of results, showing that this paper got an â€˜state-of-the-artâ€™ result comparing to baseline. </p>
<p>Fifth paragraph educe the rest of paper. A canonical â€˜fifth paragraphâ€™ as follow:</p>
<p>The rest of this paper is organized as follows. Section 2 gives an overview of the theory behind tree edit distance algorithms, the basis of our work. Section 3 presents our improved tree structure analysis algorithm, while Section 4 shows the application of this algorithm in the various tasks that comprise our approach. Experimental results demonstrating the effectiveness of our approach are in Section 5. Section 6 discusses related work. Finally, conclusions and directions for future work can be found in Section 7.</p>
<p>Previous paragraph cites: Reis D C, Golgher P B, Silva A S, et al. Automatic web news extraction using tree edit distance[C]// International Conference on World Wide Web. ACM, 2004:502-511.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2017/12/13/%E4%BB%8E-Gzip-%E5%8E%8B%E7%BC%A9-SVG-%E8%AF%B4%E8%B5%B7-%E2%80%94-%E8%AE%BA%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/13/%E4%BB%8E-Gzip-%E5%8E%8B%E7%BC%A9-SVG-%E8%AF%B4%E8%B5%B7-%E2%80%94-%E8%AE%BA%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F/" class="post-title-link" itemprop="url">ä» Gzip å‹ç¼© SVG è¯´èµ· â€” è®ºå¦‚ä½•å‡å°èµ„æºæ–‡ä»¶çš„å¤§å°</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-12-13 12:19:00" itemprop="dateCreated datePublished" datetime="2017-12-13T12:19:00+08:00">2017-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Translate/" itemprop="url" rel="index"><span itemprop="name">Translate</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/images/pasted-289.png" alt="upload successful"></p>
<p>æ–‡ä»¶è¶Šå°ï¼Œæ„å‘³ç€ä¸‹è½½é€Ÿåº¦å°±è¶Šå¿«ã€‚å› æ­¤åœ¨å‘å®¢æˆ·ç«¯å‘é€èµ„æºæ–‡ä»¶å‰ï¼Œä½¿æ–‡ä»¶å˜å¾—æ›´å°æ˜¯ä»¶æœ‰ç›Šçš„äº‹æƒ…ã€‚</p>
<p>å…¶å®ï¼Œç²¾ç®€ä¸å‹ç¼©èµ„æºæ–‡ä»¶ä¸ä»…æ˜¯ä¸€ä»¶å¾ˆæ£’çš„äº‹æƒ…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ¯ä¸€ä½ç°ä»£å¼€å‘è€…åº”è¯¥å°½é‡å»åšçš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œç”¨äºç²¾ç®€çš„å·¥å…·é€šå¸¸æ— æ³•åšåˆ°å®Œç¾ç²¾ç®€ï¼›ç”¨äºå‹ç¼©çš„å‹ç¼©å™¨æ•ˆæœå¥½åä¼šå–å†³äºç”¨äºå‹ç¼©çš„æ•°æ®ã€‚ä¸‹é¢ä»‹ç»ä¸€äº›å°æŠ€å·§ä¸æ–¹æ³•ï¼Œç”¨äºè°ƒæ•´è¿™äº›å·¥å…·ï¼Œä½¿å…¶è¾¾åˆ°æœ€å¥½çš„å·¥ä½œçŠ¶æ€ã€‚</p>
<h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><p>æˆ‘ä»¬å°†ä»¥ä¸€ä¸ªç®€å•çš„ SVG æ–‡ä»¶ä¸ºä¾‹ï¼š</p>
<p><img src="/images/pasted-290.png" alt="upload successful"></p>
<p>è¿™ä¸ª<code>&lt;svg&gt;</code>å›¾åƒçš„å†…å®¹ä¸ºä¸€ä¸ª 10x10 åƒç´ çš„åŒºåŸŸï¼ˆ<code>viewBox</code>ï¼‰ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ª 6x6 çš„æ­£æ–¹å½¢ï¼ˆ<code>&lt;rect&gt;</code>ï¼‰ã€‚åŸå§‹æ–‡ä»¶å¤§å°ä¸º 176 å­—èŠ‚ï¼Œç»è¿‡ gzip å‹ç¼©è¿‡åå¤§å°ä¸º 138 å­—èŠ‚ã€‚</p>
<p>å½“ç„¶è¿™ä¸ªå›¾åƒå¹¶æ²¡æœ‰ä»€ä¹ˆè‰ºæœ¯æ„Ÿï¼Œä½†å®ƒè¶³ä»¥æ»¡è¶³è¿™ç¯‡æ–‡ç« æƒ³è¦è¡¨è¾¾çš„æ„æ€ï¼Œå¹¶ä¸”é˜²æ­¢è¿™ç¯‡æ–‡ç« å˜æˆé•¿ç¯‡å¤§è®ºã€‚</p>
<h3 id="ç¬¬-0-æ­¥ï¼šSvgo"><a href="#ç¬¬-0-æ­¥ï¼šSvgo" class="headerlink" title="ç¬¬ 0 æ­¥ï¼šSvgo"></a>ç¬¬ 0 æ­¥ï¼šSvgo</h3><p>è¿è¡Œ <code>svgo image.svg</code> ç›´æ¥è¿›è¡Œå‹ç¼©ã€‚</p>
<p><img src="/images/pasted-291.png" alt="upload successful"></p>
<p><strong>ï¼ˆä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œä¸ºå…¶æ·»åŠ äº†å›è½¦ä¸ç¼©è¿›ï¼‰</strong></p>
<p>å¯ä»¥æ˜æ˜¾åœ°çœ‹åˆ°ï¼Œ<code>rect</code> è¢«æ›¿æ¢æˆäº† <code>path</code>ã€‚<code>path</code> è·¯å¾„å½¢çŠ¶ç”±å®ƒçš„ <code>d</code> å±æ€§å®šä¹‰ï¼Œåé¢çš„ä¸€ä¸²å‘½ä»¤ç±»ä¼¼äº canvas çš„ draw å‡½æ•°ï¼Œæ§åˆ¶ä¸€æ”¯è™šæ‹Ÿçš„ç¬”ç§»åŠ¨è¿›è¡Œç»˜ç”»ã€‚å‘½ä»¤å¯ä»¥æ˜¯ç»å¯¹ä½ç§»ï¼ˆç§»åŠ¨<strong>åˆ°</strong> x,yï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹ä½ç§»ï¼ˆå‘æŸæ–¹å‘ç§»åŠ¨ x,yï¼‰ã€‚è¯·ä»”ç»†è§‚å¯Ÿå…¶ä¸­çš„ä¸€æ¡è·¯å¾„ï¼š</p>
<p><code>M 0 0</code>ï¼šè·¯å¾„èµ·ç‚¹ä¸ºåæ ‡<code>(0, 0)</code><br><code>h 6</code>ï¼šæ°´å¹³å‘å³ç§»åŠ¨ 6 px<br><code>v 6</code>ï¼šå‚ç›´å‘ä¸‹ç§»åŠ¨ 6 px<br><code>H 0</code>ï¼šæ°´å¹³ç§»åŠ¨è‡³ <code>x = 0</code><br><code>z</code>ï¼šé—­åˆè·¯å¾„ â€” ç§»å›è·¯å¾„çš„èµ·ç‚¹</p>
<p>è¿™ä¸ªè·¯å¾„ç”»å‡ºçš„æ­£æ–¹å½¢æ˜¯å¤šä¹ˆçš„ç²¾ç¡®ï¼è€Œä¸”å®ƒæ¯” <code>rect</code> å…ƒç´ æ›´åŠ çš„ç´§å‡‘ã€‚</p>
<p>å¦å¤–ï¼Œ<code>#f00</code> è¢«æ”¹æˆäº† <code>red</code>ï¼Œè¿™å„¿ä¹Ÿå°‘äº†ä¸€ä¸ªå­—èŠ‚ï¼</p>
<p>ç°åœ¨æ–‡ä»¶å¤§å°ä¸º 135 å­—èŠ‚ï¼Œgzip å‹ç¼©è¿‡åä¸º 126 å­—èŠ‚ã€‚</p>
<h3 id="ç¬¬-1-æ­¥ï¼šè¿›è¡Œæ•´ä½“ç¼©æ”¾"><a href="#ç¬¬-1-æ­¥ï¼šè¿›è¡Œæ•´ä½“ç¼©æ”¾" class="headerlink" title="ç¬¬ 1 æ­¥ï¼šè¿›è¡Œæ•´ä½“ç¼©æ”¾"></a>ç¬¬ 1 æ­¥ï¼šè¿›è¡Œæ•´ä½“ç¼©æ”¾</h3><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œä¸¤ä¸ªè·¯å¾„ä¸­çš„æ‰€æœ‰åæ ‡å‡ä¸ºå¶æ•°ã€‚æˆ‘ä»¬æ˜¯å¦å¯ä»¥æŠŠå®ƒä»¬éƒ½é™¤ä»¥ 2 å‘¢ï¼Ÿ</p>
<p><img src="/images/pasted-292.png" alt="upload successful"></p>
<p>å›¾åƒå’Œä¹‹å‰çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„ï¼Œä½†å®ƒç¼©å°äº†ä¸¤å€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ <code>viewBox</code> è¿›è¡Œç¼©æ”¾ï¼Œä½¿å›¾åƒä¸ä¹‹å‰ä¸€æ ·å¤§ã€‚</p>
<p><img src="/images/pasted-293.png" alt="upload successful"></p>
<p>ç°åœ¨æ–‡ä»¶å¤§å°ä¸º 133 å­—èŠ‚ï¼Œgzip å‹ç¼©è¿‡åä¸º 124 å­—èŠ‚ã€‚</p>
<h3 id="ç¬¬-2-æ­¥ï¼šä½¿ç”¨éé—­åˆè·¯å¾„"><a href="#ç¬¬-2-æ­¥ï¼šä½¿ç”¨éé—­åˆè·¯å¾„" class="headerlink" title="ç¬¬ 2 æ­¥ï¼šä½¿ç”¨éé—­åˆè·¯å¾„"></a>ç¬¬ 2 æ­¥ï¼šä½¿ç”¨éé—­åˆè·¯å¾„</h3><p>å›è¿‡å¤´æ¥çœ‹è·¯å¾„ã€‚ä¸¤ä¸ªè·¯å¾„ä¸­çš„æœ€åä¸€ä¸ªå‘½ä»¤éƒ½æ˜¯ <code>z</code>ï¼Œä¹Ÿå°±æ˜¯â€œé—­åˆè·¯å¾„â€ã€‚ä½†è·¯å¾„åœ¨å¡«å……çš„æ—¶å€™ä¼šè¢«éšå¼åœ°é—­åˆï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ é™¤è¿™äº›å‘½ä»¤ã€‚</p>
<p><img src="/images/pasted-294.png" alt="upload successful"></p>
<p>åˆå°‘äº† 2 å­—èŠ‚ï¼Œç°åœ¨æ–‡ä»¶å¤§å°ä¸º 131 å­—èŠ‚ï¼Œgzip å‹ç¼©è¿‡åä¸º 122 å­—èŠ‚ã€‚ä»å¸¸è¯†ä¸Šè¯´ï¼ŒåŸå§‹å­—èŠ‚æ•°è¶Šå°‘ï¼Œèƒ½å‹ç¼©çš„å¤§å°ä¹Ÿè¶Šå°ã€‚è€Œç°åœ¨æˆ‘ä»¬å·²ç»åœ¨ svgo ä¹‹åèŠ‚çœäº† 4 ä¸ª gzip å­—èŠ‚äº†ã€‚</p>
<p><strong>ä½ å¯èƒ½ä¼šæƒ³ï¼šä¸ºä»€ä¹ˆ svgo ä¸è‡ªåŠ¨è¿›è¡Œè¿™äº›ä¼˜åŒ–å‘¢ï¼ŸåŸå› æ˜¯ç¼©æ”¾å›¾åƒä¸åˆ é™¤å°¾éƒ¨çš„ z å‘½ä»¤æ˜¯ä¸å®‰å…¨çš„ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</strong></p>
<p><img src="/images/pasted-295.png" alt="upload successful"></p>
<p>è¿™æ˜¯ä¸€äº›æœ‰ strokeï¼ˆè·¯å¾„å®½åº¦ï¼‰çš„å›¾å½¢ã€‚ä»å·¦è‡³å³åˆ†åˆ«ä¸ºï¼šåŸå§‹å›¾å½¢ã€ä¸é—­åˆçš„æƒ…å†µã€ä¸é—­åˆä¸”è¿›è¡Œç¼©æ”¾çš„æƒ…å†µã€‚</p>
<p><strong>çº¿å®½å®Œå…¨æ··ä¹±äº†ã€‚åº†å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“è‡ªå·±ä¸éœ€è¦ä½¿ç”¨çº¿å®½ã€‚ä½†æ˜¯ Svgo å¹¶ä¸çŸ¥é“è¿™ä¸ªæƒ…å†µï¼Œå› æ­¤å®ƒå¿…é¡»è¦ä¿è¯å›¾å½¢çš„å®‰å…¨ï¼Œé¿å…ä¸å®‰å…¨çš„å˜æ¢ã€‚</strong></p>
<p>ç°åœ¨çœ‹èµ·æ¥ä¸èƒ½ä»ä»£ç ä¸­åˆ é™¤ä»»ä½•ä¸œè¥¿äº†ã€‚XML è¯­æ³•æ˜¯ä¸¥æ ¼çš„ï¼Œç°åœ¨æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯å¿…é¡»çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„å€¼ä¸èƒ½ä¸åŠ å¼•å·ã€‚</p>
<p>ä½ ä»¥ä¸ºç»“æŸäº†ï¼Ÿå¹¶ä¸ï¼Œè¿™ä»…ä»…æ˜¯ä¸ªå¼€å§‹ã€‚</p>
<h3 id="ç¬¬-3-æ­¥ï¼šå‡å°‘å‡ºç°çš„å­—æ¯"><a href="#ç¬¬-3-æ­¥ï¼šå‡å°‘å‡ºç°çš„å­—æ¯" class="headerlink" title="ç¬¬ 3 æ­¥ï¼šå‡å°‘å‡ºç°çš„å­—æ¯"></a>ç¬¬ 3 æ­¥ï¼šå‡å°‘å‡ºç°çš„å­—æ¯</h3><p>ç°åœ¨ï¼Œè®©æˆ‘æ¥ä»‹ç»ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å·¥å…·ï¼š<a target="_blank" rel="noopener" href="https://encode.ru/threads/1889-gzthermal-pseudo-thermal-view-of-Gzip-Deflate-compression-efficiency">gzthermal</a>ã€‚å®ƒå¯ä»¥åˆ†æéœ€è¦è¿›è¡Œ gzip å‹ç¼©çš„æ–‡ä»¶ï¼Œå¹¶å¯¹è¿›è¡Œç¼–ç çš„åŸå§‹å­—èŠ‚è¿›è¡Œç€è‰²ã€‚æ›´å¥½å‹ç¼©çš„å­—èŠ‚æ˜¯ç»¿è‰²ï¼Œä¸å¥½å‹ç¼©çš„æ•°æ®æ˜¯çº¢è‰²ï¼Œç®€å•æ˜äº†ã€‚</p>
<p><img src="/images/pasted-296.png" alt="upload successful"></p>
<p>è¯·å†æ¬¡å…³æ³¨ <code>d</code> å±æ€§ï¼Œå°¤å…¶æ˜¯è¢«æ ‡æˆçº¢è‰²çš„ M å‘½ä»¤å€¼å¾—æ³¨æ„ã€‚æˆ‘ä»¬ä¸èƒ½åˆ é™¤å®ƒï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨ç›¸å¯¹ä½ç§» <code>m2 2</code> æ¥ä»£æ›¿å®ƒã€‚</p>
<p>åˆå§‹çš„â€œæŒ‡é’ˆâ€ä½ç½®ä¸ºåæ ‡è½´åŸç‚¹<code>(0, 0)</code>ï¼Œå› æ­¤ç§»åŠ¨<strong>åˆ°</strong><code>(2, 2)</code>å’Œä»åŸç‚¹ç§»åŠ¨<code>(2, 2)</code>æ˜¯åŒä¸€ä¸ªæ„æ€ã€‚è®©æˆ‘ä»¬è¯•è¯•ï¼š</p>
<p><img src="/images/pasted-297.png" alt="upload successful"></p>
<p><img src="/images/pasted-298.png" alt="upload successful"></p>
<p>åŸå§‹æ–‡ä»¶ä¾ç„¶æ˜¯ 131 å­—èŠ‚ï¼Œä½†æ˜¯ç»è¿‡ gzip å‹ç¼©è¿‡åå¤§å°ä»…æœ‰ 121 å­—èŠ‚äº†ã€‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯â€¦â€¦</p>
<h4 id="å“ˆå¤«æ›¼æ ‘ï¼ˆHuffman-Treesï¼‰"><a href="#å“ˆå¤«æ›¼æ ‘ï¼ˆHuffman-Treesï¼‰" class="headerlink" title="å“ˆå¤«æ›¼æ ‘ï¼ˆHuffman Treesï¼‰"></a>å“ˆå¤«æ›¼æ ‘ï¼ˆHuffman Treesï¼‰</h4><p>Gzip ä½¿ç”¨çš„æ˜¯ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/DEFLATE">DEFLATE</a> å‹ç¼©ç®—æ³•ï¼Œè€Œ DEFLATE ç®—æ³•æ˜¯ä»¥å“ˆå¤«æ›¼æ ‘ä¸ºåŸºç¡€æ„å»ºçš„ã€‚</p>
<p>å“ˆå¤«æ›¼ç¼–ç çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä½¿ç”¨æ›´å°‘çš„<strong>æ¯”ç‰¹</strong>å¯¹å‡ºç°æ¬¡æ•°æ›´å¤šçš„ç¬¦å·è¿›è¡Œç¼–ç ï¼Œåä¹‹äº¦ç„¶ï¼Œå‡ºç°æ¬¡æ•°å¾ˆå°‘çš„ç¬¦å·éœ€è¦å ç”¨æ›´å¤šçš„æ¯”ç‰¹ã€‚</p>
<p><strong>æ²¡é”™ï¼Œè¿™å„¿è¯´çš„æ˜¯æ¯”ç‰¹ä¸æ˜¯å­—èŠ‚ã€‚DEFATE ç®—æ³•ä¼šå°†ä¸€å­—èŠ‚çš„å­—ç¬¦è§†ä¸ºä¸€ç³»åˆ—çš„æ¯”ç‰¹ï¼Œæ— è®ºä¸€å­—èŠ‚åŒ…å« 7ã€9ã€100 ä¸ªæ¯”ç‰¹ï¼ŒDEFLATE ç®—æ³•éƒ½èƒ½ä¸€è§†åŒä»ã€‚</strong></p>
<p>ä»¥å­—ç¬¦ä¸²â€œTestâ€ä¸ºä¾‹ï¼Œæ ¹æ®å®ƒå‡ºç°çš„å­—æ¯æ¥è¿›è¡Œç¼–ç ï¼š<br><code>00</code> T<br><code>01</code> e<br><code>10</code> s<br><code>11</code> t</p>
<p>å¯¹æ¯ä¸ªç¬¦å·éƒ½è¿›è¡Œè¿‡ç¼–ç çš„å­—ç¬¦ä¸²â€œTestâ€å¯ä»¥è¡¨ç¤ºä¸ºï¼š<code>00011011</code>ï¼Œæ€»å…±å  8 æ¯”ç‰¹ã€‚</p>
<p>ç„¶åæˆ‘ä»¬æŠŠå®ƒå¼€å¤´çš„â€œTâ€æ”¹æˆå°å†™â€œtestâ€ï¼Œå†è¯•ä¸€æ¬¡ï¼š<br><code>0</code> t<br><code>10</code> e<br><code>11</code> s</p>
<p>å­—æ¯ t å‡ºç°äº†æ›´å¤šçš„æ¬¡æ•°ï¼Œå®ƒçš„ç¼–ç ä¹Ÿå˜å¾—æ›´çŸ­ï¼Œä»…ä¸º 1 æ¯”ç‰¹ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ç»è¿‡ç¼–ç åä¸º <code>010110</code>ï¼Œä»…ä¸º 6 æ¯”ç‰¹ï¼</p>
<hr>
<p>åœ¨æˆ‘ä»¬çš„ SVG ä¸­çš„ M å­—æ¯ä¹Ÿä¸€æ ·ã€‚åœ¨å°†å…¶å˜ä¸ºå°å†™ä¹‹åï¼Œæ•´ä¸ªç¼–ç ä¸­éƒ½ä¸åŒ…å«å¤§å†™çš„ M äº†ï¼Œå¯ä»¥å°†å®ƒä»æ ‘ä¸Šç§»é™¤ï¼Œå› æ­¤å¹³å‡ç¼–ç é•¿åº¦å¯ä»¥æ›´çŸ­ã€‚</p>
<p>å½“ä½ ç¼–å†™å¯¹ gzip å‹å¥½çš„ä»£ç æ—¶ï¼Œåº”è¯¥æ›´å¤šåœ°ä½¿ç”¨é‚£äº›ä½¿ç”¨é¢‘ç‡è¾ƒé«˜çš„å­—ç¬¦ã€‚å³ä½¿ä½ ä¸èƒ½å°†ä»£ç é•¿åº¦å‡çŸ­ï¼Œä½†å®ƒç»è¿‡å‹ç¼©åæ¶ˆè€—çš„æ¯”ç‰¹æ•°ä¹Ÿä¼šå˜å°‘ã€‚</p>
<h3 id="ç¬¬-4-æ­¥ï¼šå›é€€å¼•ç”¨ï¼ˆbackreferencesï¼‰"><a href="#ç¬¬-4-æ­¥ï¼šå›é€€å¼•ç”¨ï¼ˆbackreferencesï¼‰" class="headerlink" title="ç¬¬ 4 æ­¥ï¼šå›é€€å¼•ç”¨ï¼ˆbackreferencesï¼‰"></a>ç¬¬ 4 æ­¥ï¼šå›é€€å¼•ç”¨ï¼ˆbackreferencesï¼‰</h3><p>DEFLATE ç®—æ³•è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼šå›é€€å¼•ç”¨ã€‚æŸäº›ç¼–ç ç‚¹ä¸ä¼šç›´æ¥è¿›è¡Œç¼–ç ï¼Œè€Œæ˜¯å‘Šè¯‰è§£ç å™¨å¤åˆ¶ä¸€äº›æœ€è¿‘è§£ç çš„å­—èŠ‚ã€‚</p>
<p>å› æ­¤ï¼Œå®ƒä¸éœ€è¦å¯¹åŸå§‹å­—èŠ‚ä¸€æ¬¡åˆä¸€æ¬¡åœ°è¿›è¡Œç¼–ç ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥å¼•ç”¨ï¼š<br><strong>å‘å‰è¿”å› n ä¸ªå­—èŠ‚ï¼Œå¤åˆ¶ m ä¸ªå­—èŠ‚</strong><br>ä¾‹å¦‚ï¼š</p>
<p><code>Hey diddle diddle, the cat and the fiddle.</code></p>
<p><code>Hey diddle**&lt;7,7&gt;**, the cat and**&lt;12,5&gt;**f**&lt;24,5&gt;**.</code></p>
<p>å·§å¦™çš„æ˜¯ï¼Œgzthermal è¿˜æœ‰ä¸€ç§åªæ˜¾ç¤ºå›é€€å¼•ç”¨çš„ç‰¹æ®Šæ¨¡å¼ã€‚<br><code>gzthermal -z</code> ä¼šæ˜¾ç¤ºä»¥ä¸‹å›¾åƒï¼š</p>
<p><img src="/images/pasted-299.png" alt="upload successful"></p>
<p>æ™®é€šæ–‡æœ¬å­—èŠ‚ä¸ºæ©™è‰²ï¼Œå¯å›é€€å¼•ç”¨çš„å­—èŠ‚ä¸ºè“è‰²ã€‚ä¸‹é¢çš„åŠ¨ç”»æ›´ç›´è§‚ï¼š</p>
<p><img src="https://github.com/subzey/svg-gz-supplement/blob/master/backrefs-animated.gif?raw=true" alt=""></p>
<p>é™¤äº† fill å€¼ã€<code>m</code> å‘½ä»¤å’Œæœ€åçš„ <code>H</code> å‘½ä»¤å¤–ï¼Œç¬¬äºŒæ¡è·¯å¾„å‡ ä¹å…¨éƒ¨éƒ½ä½¿ç”¨äº†å›é€€å¼•ç”¨ã€‚å¯¹äº fill å’Œ m æˆ‘ä»¬æ— èƒ½ä¸ºåŠ›ï¼Œå› ä¸ºç¬¬äºŒä¸ªæ–¹å—çš„ç¡®æœ‰ç€ä¸åŒçš„é¢œè‰²å’Œä½ç½®ã€‚</p>
<p>ä½†æ˜¯å®ƒä»¬çš„å½¢çŠ¶æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬ç°åœ¨å¯¹ gzip æœ‰äº†æ›´åŠ æ¸…æ™°çš„è®¤è¯†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»å¯¹ä½ç§»å‘½ä»¤ <code>H0</code> å’Œ <code>H2</code> éƒ½æ›¿æ¢ä¸ºç›¸å¯¹ä½ç§»å‘½ä»¤ï¼š<code>h-3</code>ã€‚</p>
<p><img src="/images/pasted-300.png" alt="upload successful"></p>
<p><img src="/images/pasted-301.png" alt="upload successful"></p>
<p>ç°åœ¨ï¼Œä¸¤ä¸ªåˆ†å¼€çš„å›é€€å¼•ç”¨åˆä¸ºäº†ä¸€ä¸ªï¼Œæ–‡ä»¶å¤§å°ä¸º 133 å­—èŠ‚ï¼Œgzip åçš„å¤§å°ä¸º 119 å­—èŠ‚ã€‚è™½ç„¶æˆ‘ä»¬åœ¨å‹ç¼©å‰å¢åŠ äº† 2 ä¸ªå­—èŠ‚ï¼Œä½† gzip çš„ç»“æœåˆå‡å°‘äº† 2 ä¸ªå­—èŠ‚ï¼</p>
<p>æˆ‘ä»¬åªéœ€è¦å…³å¿ƒå‹ç¼©åçš„å¤§å°å³å¯ï¼šåœ¨ä¼ é€èµ„æºæ—¶ï¼Œå®¢æˆ·ç«¯ 99.9% ç”¨çš„æ˜¯ gzip æˆ–è€… brotliã€‚é¡ºå¸¦è¯´ä¸€ä¸‹ brotliã€‚</p>
<h3 id="Brotli-å‹ç¼©ç®—æ³•"><a href="#Brotli-å‹ç¼©ç®—æ³•" class="headerlink" title="Brotli å‹ç¼©ç®—æ³•"></a>Brotli å‹ç¼©ç®—æ³•</h3><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Brotli">Brotli</a> æ˜¯äº 2015 å¹´æ¨å‡ºçš„ç”¨äºæ›¿æ¢æµè§ˆå™¨ä¸­ gzipï¼ˆæºè‡ª 1992ï¼‰çš„ç®—æ³•ã€‚ä¸è¿‡å®ƒä¸ gzip åœ¨å¾ˆå¤šæ–¹é¢éƒ½æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼šå®ƒä¹Ÿæ˜¯åŸºäºå“ˆå¤«æ›¼ç¼–ç ä¸å›é€€å¼•ç”¨çš„åŸç†ï¼Œå› æ­¤æˆ‘ä»¬å‰é¢ä¸º gzip æ‰€åšçš„è°ƒæ•´éƒ½å¯ä»¥åŒæ ·åˆ©äº Brotliã€‚æœ€åè®©æˆ‘ä»¬ç”¨ Brotli åº”ç”¨äºå‰é¢çš„æ‰€æœ‰æ­¥éª¤ï¼š</p>
<p>åŸå§‹æ–‡ä»¶å¤§å°ï¼š106 å­—èŠ‚<br>åœ¨ç¬¬ 0 æ­¥ä¹‹åï¼ˆsvgoï¼‰ï¼š104 å­—èŠ‚<br>åœ¨ç¬¬ 1 æ­¥ä¹‹åï¼ˆviewBoxï¼‰ï¼š105 å­—èŠ‚<br>åœ¨ç¬¬ 2 æ­¥ä¹‹åï¼ˆä½¿ç”¨éé—­åˆè·¯å¾„ï¼‰ï¼š113 å­—èŠ‚<br>åœ¨ç¬¬ 3 æ­¥ä¹‹åï¼ˆå°å†™ mï¼‰ï¼š116 å­—èŠ‚<br>åœ¨ç¬¬ 4 æ­¥ä¹‹åï¼ˆç›¸å…³å‘½ä»¤ï¼‰ï¼š102 å­—èŠ‚</p>
<p>å¦‚ä½ æ‰€è§ï¼Œæœ€ç»ˆçš„æ–‡ä»¶æ¯” svgo åçš„æ›´å°ã€‚è¿™å¯ä»¥è¯´æ˜ï¼Œä¹‹å‰æˆ‘ä»¬ä¸º gzip åšçš„é…·ç‚«çš„å·¥ä½œåŒæ ·é€‚ç”¨äº Brotliã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸­é—´æ­¥éª¤çš„æ–‡ä»¶å¤§å°å´æ˜¯æ··ä¹±çš„ï¼ŒBrotli å‹ç¼©åçš„æ–‡ä»¶å˜å¾—æ›´å¤§äº†ã€‚æ¯•ç«Ÿï¼ŒBrotli å¹¶ä¸æ˜¯ gzipï¼Œå®ƒæ˜¯ä¸€ç§å•ç‹¬çš„æ–°ç®—æ³•ã€‚å°½ç®¡ä¸ gzip æœ‰ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†ä»æœ‰æ‰€ä¸åŒã€‚</p>
<p>å…¶ä¸­æœ€å¤§çš„ä¸åŒæ˜¯ï¼ŒBrotli å†…ç½®äº†é¢„å®šä¹‰å­—å…¸ï¼Œåœ¨ç¼–ç æ—¶ä½¿ç”¨å®ƒè¿›è¡Œä¸Šä¸‹æ–‡å¯å‘ã€‚æ­¤å¤–ï¼ŒBrotli çš„æœ€å°å›é€€å¼•ç”¨å¤§å°ä¸º 2 å­—èŠ‚ï¼ˆgzip ä»…èƒ½åˆ›å»º 3 å­—èŠ‚åŠä»¥ä¸Šçš„å›é€€å¼•ç”¨ï¼‰ã€‚</p>
<p>å¯ä»¥è¯´ï¼ŒBrotli æ¯” gzip æ›´åŠ <strong>éš¾ä»¥é¢„æµ‹</strong>ã€‚æˆ‘å¾ˆæƒ³è§£é‡Šä¸€ä¸‹æ˜¯ä»€ä¹ˆå¯¼è‡´äº†â€œå‹ç¼©é€€åŒ–â€ï¼Œå¯æƒœ Brotli å¹¶æ²¡æœ‰ç±»ä¼¼äº gzip çš„ gzthermal å’Œ <a target="_blank" rel="noopener" href="https://encode.ru/threads/1428-defdb-a-tool-to-dump-the-deflate-stream-from-gz-and-png-files">defdb</a> ä¹‹ç±»çš„å·¥å…·ã€‚æˆ‘åªèƒ½é <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7932">å®ƒçš„è§„èŒƒ</a> ä»¥åŠè¯•é”™çš„æ–¹æ³•æ¥è¿›è¡Œè°ƒè¯•ã€‚</p>
<h3 id="è¯•é”™æ³•"><a href="#è¯•é”™æ³•" class="headerlink" title="è¯•é”™æ³•"></a>è¯•é”™æ³•</h3><p>è®©æˆ‘ä»¬å†è¯•ä¸€æ¬¡ã€‚è¿™æ¬¡å°†æ”¹å˜ <code>fill</code> å±æ€§å†…çš„é¢œè‰²ã€‚æ˜¾ç„¶ <code>red</code> æ¯” <code>#f00</code> æ›´çŸ­ï¼Œä½†ä¹Ÿè®¸ Brotli ä¼šç”¨æ›´é•¿çš„å›é€€å¼•ç”¨è¿›è¡Œå‹ç¼©ã€‚</p>
<p><img src="/images/pasted-302.png" alt="upload successful"></p>
<p>gzip å‹ç¼©è¿‡åå¤§å°ä¸º 120 å­—èŠ‚ï¼ŒBrotli å‹ç¼©è¿‡åä¸º 100 å­—èŠ‚ã€‚gzip æµé•¿äº† 1 å­—èŠ‚ï¼ŒBrotli æµçŸ­äº† 2 å­—èŠ‚ã€‚</p>
<p>æ­¤æ—¶ï¼Œå®ƒåœ¨ Brotli ä¸­è¡¨ç°æ›´å¥½ï¼Œåœ¨ gzip ä¸­è¡¨ç°æ›´å·®ã€‚æˆ‘è§‰å¾—ï¼Œè¿™å®Œå…¨æ— ç¢ï¼å› ä¸ºæˆ‘ä»¬å‡ ä¹ä¸å¯èƒ½ä¸€æ¬¡æ€§å°†æ•°æ®é’ˆå¯¹æ‰€æœ‰å‹ç¼©å™¨è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶å¾—åˆ°<strong>æœ€ä½³ç»“æœ</strong>ã€‚è§£å†³å‹ç¼©å™¨é—®é¢˜å°±åƒè½¬ä¸€ä¸ªç³Ÿç³•çš„é­”æ–¹ï¼Œåªèƒ½å°½é‡ä¼˜åŒ–ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸Šé¢æè¿°çš„æ‰€æœ‰çš„è°ƒæ•´æ–¹æ³•éƒ½ä¸ä»…é™äº SVG å‹ç¼©ä¸º gzip çš„æƒ…æ™¯ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥å¸®åŠ©ä½ å†™å‡ºæ›´å…·å¤‡å‹ç¼©æ€§èƒ½çš„ä»£ç çš„å‡†åˆ™ï¼š</p>
<ol>
<li>å‹ç¼©<strong>æ›´å°çš„æºæ•°æ®</strong>å¯èƒ½ä¼šå¾—åˆ°æ›´å°çš„å‹ç¼©æ•°æ®ã€‚</li>
<li><strong>ä¸åŒçš„å­—ç¬¦è¶Šå°‘</strong>å°±æ„å‘³ç€ç†µè¶Šå°‘ã€‚è€Œç†µè¶Šå°ï¼Œå‹ç¼©æ•ˆæœå°±è¶Šå¥½ã€‚</li>
<li>é¢‘ç¹å‡ºç°çš„å­—ç¬¦ä¼šä»¥æ›´å°çš„å­—èŠ‚è¢«å‹ç¼©ã€‚<strong>åˆ é™¤ä¸å¸¸è§å­—ç¬¦</strong>ä»¥åŠ<strong>ä½¿å¸¸è§å­—ç¬¦æ›´å¸¸è§</strong>å¯ä»¥æé«˜å‹ç¼©æ•ˆç‡ã€‚</li>
<li><strong>é•¿æ®µé‡å¤çš„ä»£ç </strong>å¯ä»¥è¢«å‹ç¼©æˆå‡ ä¸ªå­—èŠ‚ã€‚<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%e4%b8%80%e6%ac%a1%e4%b8%94%e4%bb%85%e4%b8%80%e6%ac%a1">DRYï¼ˆâ€œä¸è¦é‡å¤è‡ªå·±â€åŸåˆ™ï¼‰</a>ä¸ä¸€å®šåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œæœ‰æ—¶å€™<strong>é‡å¤è‡ªå·±</strong>åè€Œèƒ½å¾—åˆ°æ›´å¥½çš„ç»“æœã€‚</li>
<li>æœ‰äº›æ—¶å€™æ›´å¤§çš„æºæ•°æ®åè€Œå¯ä»¥å¾—åˆ°æ›´å°çš„å‹ç¼©æ•°æ®ã€‚<strong>å‡å°‘ç†µ</strong>å¯ä»¥è®©å‹ç¼©å™¨æ›´å¥½åœ°ç§»é™¤å†—ä½™çš„ä¿¡æ¯ã€‚</li>
</ol>
<p>ä½ å¯ä»¥åœ¨ <a target="_blank" rel="noopener" href="https://github.com/subzey/svg-gz-supplement/">æ­¤ GitHub repo</a> ä¸­æ‰¾åˆ°ä»¥ä¸Šæ‰€æœ‰èµ„æºã€å‹ç¼©è¿‡çš„å›¾ç‰‡ä»¥åŠå…¶å®ƒèµ„æ–™ã€‚</p>
<p>å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ã€‚ä¸‹æ¬¡æˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•å‹ç¼©æ™®é€š JavaScript ä»£ç ä¸ Webpack bundle ä¸­çš„ JavaScript ä»£ç ã€‚</p>
<blockquote>
<p>æœ¬æ–‡å‘å¸ƒäºæ˜é‡‘ <a target="_blank" rel="noopener" href="https://juejin.im/post/5a30a7fdf265da4309452517">https://juejin.im/post/5a30a7fdf265da4309452517</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2017/12/05/wk-%E9%81%8D%E5%8E%86%E8%A1%8C%E5%8F%96%E5%87%BA%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/05/wk-%E9%81%8D%E5%8E%86%E8%A1%8C%E5%8F%96%E5%87%BA%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">awk éå†è¡Œå–å‡ºæ•°æ®è¿›è¡Œå¤„ç†</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-12-05 17:27:17" itemprop="dateCreated datePublished" datetime="2017-12-05T17:27:17+08:00">2017-12-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tool/" itemprop="url" rel="index"><span itemprop="name">Tool</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat a.txt</span><br></pre></td></tr></table></figure>
<p>123@123 123</p>
<p>234@234 234</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print(&quot;curl -X POST -d \&quot;email=&quot;$1&quot;\&quot;  -d \&quot;password=&quot;$2&quot;\&quot; --user abc:123456 http://baidu.com&quot;)&#125;&#x27;</span> a.txt</span><br></pre></td></tr></table></figure>
<p>curl -X POST -d â€œemail=123â€  -d â€œpassword=123 123â€ â€”user abc:123456 <a target="_blank" rel="noopener" href="http://baidu.com">http://baidu.com</a></p>
<p>curl -X POST -d â€œemail=234â€  -d â€œpassword=234 234â€ â€”user abc:123456 <a target="_blank" rel="noopener" href="http://baidu.com">http://baidu.com</a></p>
<p>æŠŠä¸Šé¢çš„printæ”¹æˆsystemå°±èƒ½æ‰§è¡Œå‘½ä»¤ã€‚</p>
<p>è¯»å–è¡Œçš„é»˜è®¤åˆ†å‰²ç¬¦ä¸ºç©ºæ ¼ï¼Œå¯ç”¨ -F â€œ#â€ è¿›è¡Œä¿®æ”¹ã€‚å¯ç”¨ç®¡é“è¾“å‡ºåˆ°å…¶å®ƒbashå‘½ä»¤æ‰§è¡Œã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2017/12/04/sql%E5%BF%AB%E9%80%9F%E5%8E%BB%E9%87%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/04/sql%E5%BF%AB%E9%80%9F%E5%8E%BB%E9%87%8D/" class="post-title-link" itemprop="url">sqlå¿«é€Ÿå»é‡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-12-04 19:01:36" itemprop="dateCreated datePublished" datetime="2017-12-04T19:01:36+08:00">2017-12-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> consum_record</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    consum_record, </span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            <span class="keyword">min</span>(<span class="keyword">id</span>) <span class="keyword">id</span>,</span><br><span class="line">            user_id,</span><br><span class="line">            monetary,</span><br><span class="line">            consume_time</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            consum_record</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">            user_id,</span><br><span class="line">            monetary,</span><br><span class="line">            consume_time</span><br><span class="line">        <span class="keyword">HAVING</span></span><br><span class="line">            <span class="keyword">count</span>(*) &gt; <span class="number">1</span></span><br><span class="line">    ) t2</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    consum_record.user_id = t2.user_id </span><br><span class="line">    <span class="keyword">and</span> consum_record.monetary = t2.monetary</span><br><span class="line">    <span class="keyword">and</span> consum_record.consume_time  = t2.consume_time</span><br><span class="line"><span class="keyword">AND</span> consum_record.id &gt; t2.id;</span><br></pre></td></tr></table></figure>
<p>æŠ„è‡ª<a target="_blank" rel="noopener" href="https://www.cxiansheng.cn/server/348">https://www.cxiansheng.cn/server/348</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">äº¬ICPå¤‡18029472å·-1 </a>
  </div>

<div class="copyright">
  
  &copy; 2016 â€“ 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lsvih</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div><script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    menuSettings: {
      zoom: "None"
    },
    showMathMenu: false,
    jax: ["input/TeX","output/CommonHTML"],
    extensions: ["tex2jax.js"],
    TeX: {
      extensions: ["AMSmath.js","AMSsymbols.js"],
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [["$", "$"],["\\(", "\\)"]],
      displayMath: [["\\[", "\\]"]]
    }
  });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="//cdn.jsdelivr.net/npm/algoliasearch@4.4.0/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4.7.1/dist/instantsearch.production.min.js"></script><script src="/js/algolia-search.js"></script>













  








  

  

  

</body>
</html>
