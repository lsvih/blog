<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lsvih.com","root":"/","images":"/images","scheme":"Pisces","version":"8.2.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"algolia":{"appID":"6U6P1RGK4F","apiKey":"b14e73cdd627eabe947b5decbe14850f","indexName":"lsvih","hits":{"per_page":10}}};
  </script>
<meta property="og:type" content="website">
<meta property="og:title" content="My note">
<meta property="og:url" content="https://lsvih.com/page/14/index.html">
<meta property="og:site_name" content="My note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="lsvih">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lsvih.com/page/14/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>
<title>My note - lsvih</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142893470-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-142893470-1');
      }
    </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="My note" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">My note</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">lsvih</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
        <li class="menu-item menu-item-about"><a href="https://cv.lsvih.com/" rel="noopener" target="_blank"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lsvih</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">164</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">208</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lsvih" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lsvih" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lsvih@qq.com" title="E-Mail → mailto:lsvih@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/17/%E4%BD%BF%E7%94%A8Python-selenium%E8%BD%BB%E6%9D%BE%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/05/17/%E4%BD%BF%E7%94%A8Python-selenium%E8%BD%BB%E6%9D%BE%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">使用Python selenium轻松实现自动化操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-17 10:17:00" itemprop="dateCreated datePublished" datetime="2016-05-17T10:17:00+08:00">2016-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>命令行输入pip install selenium 安装selenium</p>
<p>测试：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">browser.find_element_by_id(<span class="string">&quot;kw&quot;</span>).send_keys(<span class="string">&quot;selenium&quot;</span>)</span><br><span class="line">browser.find_element_by_id(<span class="string">&quot;su&quot;</span>).click()</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure><br>运行程序，可以看到程序自动打开了Chrome浏览器，进入baidu的网页，在id为kw的框（百度网页中的搜索框）中输入selenium，然后点击了id为su的按钮(百度网页中的搜索按钮)。</p>
<p>经过体验selenium非常好用，准备使用selenium+chrome来自动玩之前做的Flappy Bird。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/17/%E6%94%B9%E8%BF%9BFlappy-Bird%E5%B9%B6%E6%90%AD%E5%BB%BANodeJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E7%9B%B8%E5%85%B3%E6%95%B0%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/05/17/%E6%94%B9%E8%BF%9BFlappy-Bird%E5%B9%B6%E6%90%AD%E5%BB%BANodeJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E7%9B%B8%E5%85%B3%E6%95%B0%E5%80%BC/" class="post-title-link" itemprop="url">改进Flappy Bird并搭建NodeJS服务器接收相关数值</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-17 08:53:00" itemprop="dateCreated datePublished" datetime="2016-05-17T08:53:00+08:00">2016-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>加入了键盘响应事件：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gamestate == <span class="number">1</span> || gamestate == -<span class="number">1</span>) &#123;</span><br><span class="line">	    start()</span><br><span class="line">    &#125;</span><br><span class="line">    tap()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>将图片插入后，页面改成如下：</p>
<video class="edui-upload-video  vjs-default-skin  video-js" controls="" preload="none" width="300" height="496" src="/img/1463475783775457.mp4" data-setup="{}"><source src="/img/1463475783775457.mp4" type="video/mp4"/></video>

<p>希望以某种方式获取鸟与柱子的实时数据。因此使用NodeJS进行获取。</p>
<p>在网页中加入js:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> upload = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	$.get(<span class="string">&quot;http://localhost:8000/?x-distance=&quot;</span> + (<span class="number">300</span> - pillarX - <span class="number">50</span>) + <span class="string">&quot;&amp;y-distance=&quot;</span> + (pillarupH + <span class="number">100</span> - startY))</span><br><span class="line">&#125;, <span class="number">20</span>)</span><br></pre></td></tr></table></figure><br>可以每20毫秒以get的方式请求一次服务器，将相关的数据上传。因为是本机搭建服务器因此无需担心由于网络环境造成的丢包与延迟等情况。</p>
<p>NodeJS代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">    res.end(util.inspect(url.parse(req.url, <span class="literal">true</span>)));</span><br><span class="line">    <span class="keyword">var</span> arg = url.parse(req.url, <span class="literal">true</span>).query; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(arg))</span><br><span class="line">&#125;).listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure>
<p>直接在本机8000端口建立服务器，并获得前端的get请求。</p>
<p>运行效果如下</p>
<video class="edui-upload-video  vjs-default-skin video-js" controls="" preload="none" width="420" height="280" src="/img/1463476317496303.mp4" data-setup="{}"><source src="/img/1463476317496303.mp4" type="video/mp4"/></video>

<p>能获得当前数据信息，之后考虑如何让电脑学会玩这个小游戏</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/16/%E7%BA%AFhtml-js-css%E5%81%9A%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84Flappy-Bird%E5%B0%8F%E6%B8%B8%E6%88%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/05/16/%E7%BA%AFhtml-js-css%E5%81%9A%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84Flappy-Bird%E5%B0%8F%E6%B8%B8%E6%88%8F/" class="post-title-link" itemprop="url">纯html,js,css做最简单的Flappy Bird小游戏</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-16 14:16:00" itemprop="dateCreated datePublished" datetime="2016-05-16T14:16:00+08:00">2016-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Front-End/" itemprop="url" rel="index"><span itemprop="name">Front End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>效果：</p>
<p><img src="/images/pasted-72.png" alt="upload successful"></p>
<p><img src="/images/pasted-73.png" alt="upload successful"></p>
<p><img src="/images/pasted-74.png" alt="upload successful"></p>
<p>主要使用了定时器，做出速度与加速度的效果，并配合改变Bird的角度，达到想要的效果。</p>
<p>检测游戏是否失败靠检测鸟的上下左右点是否在柱子内或者在地图外。</p>
<p>Html:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;start&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;start()&quot;</span>&gt;</span>start<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;startbackground&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;warp&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;tap()&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bird&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;pillar-up&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;pillar-down&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;background&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">	body&#123;</span><br><span class="line">		height: 500px;</span><br><span class="line">		width: 300px;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="css">		<span class="selector-id">#start</span> &#123;</span></span><br><span class="line">			position: fixed;</span><br><span class="line">			z-index: 999;</span><br><span class="line">			top: 250px;</span><br><span class="line">			left: 150px;</span><br><span class="line"><span class="css">			<span class="selector-tag">border</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span><span class="selector-id">#eee</span>;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">background-color</span>: <span class="selector-id">#888</span>;</span></span><br><span class="line">			height: 50px;</span><br><span class="line">			width: 150px;</span><br><span class="line">			margin-left: -75px;</span><br><span class="line">			text-align: center;</span><br><span class="line">			line-height: 50px;</span><br><span class="line">			font-size: 30px;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">		<span class="selector-id">#startbackground</span> &#123;</span></span><br><span class="line">			position: fixed;</span><br><span class="line">			z-index: 888;</span><br><span class="line">			height: 500px;</span><br><span class="line">			width: 300px;</span><br><span class="line">			background-color: black;</span><br><span class="line">			opacity: 0.5;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">		<span class="selector-id">#warp</span> &#123;</span></span><br><span class="line">			position: relative;</span><br><span class="line"><span class="css">			<span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span><span class="selector-id">#000</span>;</span></span><br><span class="line">			height: 500px;</span><br><span class="line">			width: 300px;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">		<span class="selector-id">#bird</span> &#123;</span></span><br><span class="line">			position: absolute;</span><br><span class="line"><span class="css">			<span class="selector-tag">height</span>: 20<span class="selector-tag">px</span>;<span class="comment">/*鸟高 */</span></span></span><br><span class="line"><span class="css">			<span class="selector-tag">width</span>: 30<span class="selector-tag">px</span>;<span class="comment">/*鸟长*/</span></span></span><br><span class="line">			background-color: red;</span><br><span class="line">			top: 100px;</span><br><span class="line">			left: 50px;</span><br><span class="line">			transform: rotate(0deg);</span><br><span class="line">			-ms-transform: rotate(0deg);</span><br><span class="line">			-moz-transform: rotate(0deg);</span><br><span class="line">			-webkit-transform: rotate(0deg);</span><br><span class="line">			-o-transform: rotate(0deg);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">		<span class="selector-id">#pillar-up</span> &#123;</span></span><br><span class="line">			position: absolute;</span><br><span class="line">			height: 0;</span><br><span class="line">			width: 50px;</span><br><span class="line">			background-color: green;</span><br><span class="line">			top: 0;</span><br><span class="line">			right: -50px;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="css">		<span class="selector-id">#pillar-down</span> &#123;</span></span><br><span class="line">			position: absolute;</span><br><span class="line">			height: 0;</span><br><span class="line">			width: 50px;</span><br><span class="line">			background-color: green;</span><br><span class="line">			bottom: 0;</span><br><span class="line">			right: -50px;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> startX = <span class="number">50</span>;<span class="comment">//角色距离左边x坐标</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> startY = <span class="number">100</span>; <span class="comment">//角色开始高度</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> maxTop = <span class="number">480</span>; <span class="comment">//地图高度500 角色碰撞高度20</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> v_y = <span class="number">0</span>; <span class="comment">//向下运动为正，每1个时间单位向下移动v_y个像素</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> v_x = <span class="number">2</span>; <span class="comment">//水平相对运动速度（实际上没有运动）</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> g = <span class="number">0.7</span>; <span class="comment">//重力加速度，每个时间单位速度向下加这么多</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> Bird = <span class="built_in">document</span>.getElementById(<span class="string">&quot;bird&quot;</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> startBtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;start&quot;</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> pillarup = <span class="built_in">document</span>.getElementById(<span class="string">&quot;pillar-up&quot;</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> pillardown = <span class="built_in">document</span>.getElementById(<span class="string">&quot;pillar-down&quot;</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> pillarX = -<span class="number">50</span>; <span class="comment">//柱子初始位置</span></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> gamestate = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> pillarstate = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> scorecount = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> score = <span class="number">0</span>;<span class="comment">//分数</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (gamestate == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="built_in">window</span>.location.reload()</span></span><br><span class="line"><span class="javascript">			&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">				main();</span><br><span class="line"><span class="javascript">				startBtn.style.display = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="javascript">				<span class="built_in">document</span>.getElementById(<span class="string">&quot;startbackground&quot;</span>).style.display = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">tap</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">			v_y = -12;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> birdtimer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">if</span> (startY &gt; maxTop || startY &lt; <span class="number">0</span>) &#123; <span class="comment">//角色碰撞上下边界</span></span></span><br><span class="line">						gameover();</span><br><span class="line">					&#125;</span><br><span class="line"><span class="javascript">					<span class="keyword">if</span> ((pillarX&gt;<span class="number">220</span>&amp;&amp;pillarX&lt;<span class="number">280</span>&amp;&amp;startY&lt;pillarupH)||(pillarX&gt;<span class="number">220</span>&amp;&amp;pillarX&lt;<span class="number">280</span>&amp;&amp;startY&gt;(<span class="number">200</span>+ pillarupH)))&#123;</span></span><br><span class="line">						gameover();</span><br><span class="line">					&#125;</span><br><span class="line">					startY += v_y;</span><br><span class="line">					v_y += g;</span><br><span class="line"><span class="javascript">					deg = <span class="built_in">Math</span>.atan(v_y / v_x) / <span class="number">1.57</span> * <span class="number">60</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">					Bird.style.webkitTransform = <span class="string">&quot;rotate(&quot;</span> + deg + <span class="string">&quot;deg)&quot;</span>;</span></span><br><span class="line"><span class="javascript">					Bird.style.MozTransform = <span class="string">&quot;rotate(&quot;</span> + deg + <span class="string">&quot;deg)&quot;</span>;</span></span><br><span class="line"><span class="javascript">					Bird.style.msTransform = <span class="string">&quot;rotate(&quot;</span> + deg + <span class="string">&quot;deg)&quot;</span>;</span></span><br><span class="line"><span class="javascript">					Bird.style.OTransform = <span class="string">&quot;rotate(&quot;</span> + deg + <span class="string">&quot;deg)&quot;</span>;</span></span><br><span class="line"><span class="javascript">					Bird.style.transform = <span class="string">&quot;rotate(&quot;</span> + deg + <span class="string">&quot;deg)&quot;</span>;</span></span><br><span class="line"><span class="javascript">					Bird.style.top = startY + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line"><span class="javascript">				&#125;, <span class="number">20</span>) <span class="comment">//一次时间单位</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> pillartimer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">if</span> (pillarstate == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">						pillarup.style.right = <span class="string">&quot;-50px&quot;</span>;</span></span><br><span class="line"><span class="javascript">						pillardown.style.right = <span class="string">&quot;-50px&quot;</span>;</span></span><br><span class="line"><span class="javascript">						pillarupH = <span class="number">300</span> * <span class="built_in">Math</span>.random();</span></span><br><span class="line"><span class="javascript">						pillarup.style.height = pillarupH + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line"><span class="javascript">						pillardown.style.height = (<span class="number">300</span> - pillarupH) + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line">						pillarstate = 1;</span><br><span class="line">					&#125;</span><br><span class="line"><span class="javascript">					<span class="keyword">if</span> (pillarX &gt;= <span class="number">350</span>) &#123;</span></span><br><span class="line">						pillarX = -50;</span><br><span class="line">						pillarstate = 0;</span><br><span class="line">						scorecount = 0;</span><br><span class="line">					&#125;</span><br><span class="line"><span class="javascript">					<span class="keyword">if</span>(pillarX &gt;= <span class="number">250</span>&amp;&amp;scorecount == <span class="number">0</span>)&#123;</span></span><br><span class="line">						score++;</span><br><span class="line">						scorecount = 1;</span><br><span class="line">					&#125;</span><br><span class="line">					pillarX += v_x;</span><br><span class="line"><span class="javascript">					pillarup.style.right = pillarX - <span class="number">50</span> + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line"><span class="javascript">					pillardown.style.right = pillarX - <span class="number">50</span> + <span class="string">&quot;px&quot;</span>;</span></span><br><span class="line"><span class="javascript">				&#125;, <span class="number">20</span>) <span class="comment">//一次时间单位</span></span></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span> <span class="title">gameover</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="built_in">clearTimeout</span>(birdtimer);</span></span><br><span class="line"><span class="javascript">				<span class="built_in">clearTimeout</span>(pillartimer);</span></span><br><span class="line"><span class="javascript">				<span class="built_in">document</span>.getElementById(<span class="string">&quot;startbackground&quot;</span>).style.display = <span class="string">&quot;block&quot;</span></span></span><br><span class="line"><span class="javascript">				startBtn.innerText = <span class="string">&#x27;失败，分数为&#x27;</span>+ score +<span class="string">&#x27;，重新开始？&#x27;</span>;</span></span><br><span class="line"><span class="javascript">				startBtn.style.display = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="javascript">				startBtn.style.fontSize = <span class="string">&#x27;11px&#x27;</span>;</span></span><br><span class="line">				gamestate = 1;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/10/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0K-means/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/05/10/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0K-means/" class="post-title-link" itemprop="url">机器学习学习笔记（十二）无监督学习K-means</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-10 14:30:35" itemprop="dateCreated datePublished" datetime="2016-05-10T14:30:35+08:00">2016-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">Machine Learning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>当给出一组未经标记的数据，让程序自己去对其数据结构进行分析与分类（加上标签），就是无监督学习。</p>
<p>例如聚类就是无监督学习中的一个典型例子。</p>
<h3 id="K-means算法"><a href="#K-means算法" class="headerlink" title="K-means算法"></a>K-means算法</h3><p>K-means算法(K均值算法)是现在使用最为广泛的聚类算法。</p>
<p>使用步骤如下：</p>
<p>首先随机选择两个点（分成两个聚类），称其为聚类中心；</p>
<p>K-means是一个迭代算法，它将不断进行簇分配与聚类中心移动。</p>
<p><img src="/images/pasted-63.png" alt="upload successful"></p>
<p>1、簇分配</p>
<p>根据数据集中的点距离哪个聚类中心更近从而将其分为两类，例如：</p>
<p><img src="/images/pasted-64.png" alt="upload successful"></p>
<p>2、移动聚类中心</p>
<p>分别将之前的两个聚类中心移动到它那个聚类的均值处。如图：</p>
<p><img src="/images/pasted-65.png" alt="upload successful"></p>
<p>两个中心都移动到均值处。</p>
<p><img src="/images/pasted-66.png" alt="upload successful"></p>
<p>之后再次重复第一步簇分配，重新根据数据点距离聚类中心的距离重新分类，之后再次移动聚类中心……</p>
<p>一直迭代下去，直到聚类中心不再移动，簇分配也不再变化，此时称此时K-means已经收敛了。</p>
<hr>
<p>以较科学的方式描述K-means</p>
<p><img src="/images/pasted-67.png" alt="upload successful"></p>
<p>K为簇数，即期望将未标记的数据分为几类的值；</p>
<p>具体算法：</p>
<p><img src="/images/pasted-69.png" alt="upload successful"></p>
<p>1、随机初始化K个聚类中心Mu1,Mu2……MuK</p>
<p>重复以下的事情：</p>
<p>2、将x中的每个值根据距离Mu的距离分类（簇分配），距离公式如下：</p>
<script type="math/tex; mode=display">min_k \left | x^{(i)}-\mu_k \right |^2</script><p>3、对于每个聚类中心重新规划在其对应聚类的平均值处。</p>
<hr>
<h3 id="K-means的实际用途"><a href="#K-means的实际用途" class="headerlink" title="K-means的实际用途"></a>K-means的实际用途</h3><p>例如市场细分：</p>
<p><img src="/images/pasted-70.png" alt="upload successful"></p>
<p>对于服装场来说，如果要将调查到的如上数据的人群分为大中小三个聚类，肉眼从图上看无法分开这三种尺寸。</p>
<p>使用K-means可以将其顺利分为3个聚类，</p>
<p><img src="/images/pasted-71.png" alt="upload successful"></p>
<p>由此可以看到K均值的确可以比人更好的解决一些问题。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/03/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89%E8%B0%83%E8%AF%95%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/05/03/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89%E8%B0%83%E8%AF%95%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">机器学习学习笔记（十一）调试算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-03 07:30:00" itemprop="dateCreated datePublished" datetime="2016-05-03T07:30:00+08:00">2016-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">Machine Learning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>当发现测试算法时预测的结果有非常大的误差时,有以下几种方法解决问题:</p>
<ol>
<li><p>使用更大的训练集</p>
</li>
<li><p>使用更少的特征值</p>
</li>
<li><p>使用更多的特征值</p>
</li>
<li><p>使用更高次幂的特征值</p>
</li>
<li><p>减少正则化参数</p>
</li>
<li><p>增加正则化参数</p>
</li>
</ol>
<p>判断如何选择方法不应该”凭感觉”选择,而应该科学地使用机器学习诊断法进行判断,以更省时间,更有意义地改进算法.</p>
<h3 id="过拟合与欠拟合"><a href="#过拟合与欠拟合" class="headerlink" title="过拟合与欠拟合"></a>过拟合与欠拟合</h3><p><img src="/images/pasted-56.png" alt="upload successful"></p>
<p>(图为过拟合)</p>
<p>过拟合与欠拟合都将不能很好的匹配新的数据.</p>
<p>方法:将所有数据分为训练集与测试集.比例可以使用7:3.</p>
<p>当训练集的$J(\theta )$很小,测试集的$J(\theta )$很大时,此时即为过拟合的情况.</p>
<script type="math/tex; mode=display">J_{test}(\theta )=\frac{1}{2m_{test}}\sum_{i=1}^{m_{test}}(h_{\theta}(x_{test}^{i})-y_{test}^{i})^{2}</script><p>以上公式即为线性回归测试集误差计算公式;</p>
<script type="math/tex; mode=display">J_{test}(\theta )=-\frac{1}{m_{test}}\sum_{i=1}^{m_{test}}y_{test}^{i}\log h_{\theta }(x_{test}^{i})+(1-y_{test}^{i})\log h_{\theta }(x_{test}^{i})</script><p>以上公式为逻辑回归测试误差公式;</p>
<p>可以看到其实误差公式与代价函数的计算是一致的.</p>
<p>通过以上计算公式可以量化测试集测试训练集的训练结果.</p>
<hr>
<h3 id="确定多项式的次数"><a href="#确定多项式的次数" class="headerlink" title="确定多项式的次数"></a>确定多项式的次数</h3><p>已经知道,当多项式的次数过高的时候,会发生过拟合现象.如何根据数据来确定多项式次数d呢?</p>
<p>与之前加上验证集不同的是,将数据集分成三部分:训练集,测试集,交叉验证级.</p>
<p>选择不同的多项式次数分别对验证集进行计算,</p>
<script type="math/tex; mode=display">1. h_{\theta }(x)=\theta _{0}+\theta _{1}x\\2. h_{\theta }(x)=\theta _{0}+\theta _{1}x+\theta _{2}x^{2}\\3. h_{\theta }(x)=\theta _{0}+\theta _{1}x+...+\theta _{3}x^{3}\\\vdots \\10. h_{theta }(x)=\theta _{0}+\theta _{1}x+...+\theta _{10}x^{10}</script><p>得到各自的$J_{cv}(\theta )$,由此可以选择出最合适的多项式次数.</p>
<hr>
<p>因此,选择算法使用验证集进行模型选择,使用测试集来评价模型的好坏,这样就能找到合适的模型.</p>
<h2 id="偏差-bias-与方差-variance"><a href="#偏差-bias-与方差-variance" class="headerlink" title="偏差(bias)与方差(variance)"></a>偏差(bias)与方差(variance)</h2><p><img src="/images/pasted-57.png" alt="upload successful"></p>
<p>具体来说,欠拟合是高偏差情况,过拟合是高方差情况.</p>
<p>分别对训练集和验证集的误差情况与多项式次数进行画图</p>
<p><img src="/images/pasted-58.png" alt="upload successful"></p>
<p>可以看到当项数次数过少时,错误相当的大,此时是高偏差情况;当项数次数过多时,训练集的误差变得非常小,呈现出过拟合的情况.但是交叉验证集的错误将急剧上升,此时的情况是高方差.</p>
<p>直接描述就是:训练集误差小验证集误差大时,就是过拟合-高方差情况;</p>
<h3 id="选择合适的正则化参数lambda"><a href="#选择合适的正则化参数lambda" class="headerlink" title="选择合适的正则化参数lambda"></a>选择合适的正则化参数lambda</h3><p>改变lambda时,训练集$J_{train}$与交叉验证集$J_{cv}$都会发生一定的变化.</p>
<p>当参数过多过大时，后面的正则化项的值就会很大，因而导致$ J(\theta )$也变大，从而使这个预测方程得到更多的惩罚，使其像参数变量尽量小的地步靠拢。对正则化过程有影响的是lambda，当lambda数值大的时候，函数收到的惩罚更多，会更快地减少参数数值；当lambda为0的时候，函数则不会对参数进行正则化处理。</p>
<p>如图所示</p>
<p><img src="/images/pasted-59.png" alt="upload successful"></p>
<p>当lambda过大时,会处于高偏差情况,$J_{train}$的值会很大,lambda值过小时会处于过拟合情况.</p>
<p>因此,上图的左端对应着高方差,右端对应着高偏差问题,</p>
<h3 id="学习曲线"><a href="#学习曲线" class="headerlink" title="学习曲线"></a>学习曲线</h3><p>用于判断算法的学习情况.可以判断此时处于高方差高偏差情况以对于算法进行修改.</p>
<p>绘出$J_{train}(\theta )$与$J_{cv}(\theta )$的图像.</p>
<p><img src="/images/pasted-60.png" alt="upload successful"></p>
<p>上图为训练集大小与两个J的对应情况.</p>
<p>当训练集过大时,$J_{train}$越来越难对与过大的训练集做出良好的拟合,因此在图上表现出m越大error越多.</p>
<p>相反,当训练集大的时候,$J_{cv}$更能获得更好的泛化,即对新样品的适应更好,因此可以得到上述曲线.</p>
<p>如果不使用多项式拟合而直接用一条直线,那么数据集的大小再大也于事无补,无法更加接近实际情况.此时$J_{train}$与$J_{cv}$会很接近,</p>
<p><img src="/images/pasted-61.png" alt="upload successful"></p>
<p>这种情况便是高偏差情况.</p>
<p>反之,如果项数很大的话,学习曲线会如图所示:</p>
<p><img src="/images/pasted-62.png" alt="upload successful"></p>
<p>$J_{train}$与$J_{cv}$间会有很大的差距,这种情况是高方差.</p>
<hr>
<hr>
<p>回到最开始的情况</p>
<ol>
<li><p>使用更大的训练集可以对于高方差的情况有所帮助(将学习曲线画出来可以看出)</p>
</li>
<li><p>使用更少的特征值可以修复一定的高方差情况.</p>
</li>
<li><p>使用更多的特征值可以修复高偏差情况</p>
</li>
<li><p>使用更高次幂的特征值可以修复高偏差情况</p>
</li>
<li><p>减少正则化参数可以修复高偏差</p>
</li>
<li><p>增加正则化参数可以修复高方差</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/03/%E7%88%AC%E8%99%ABpython%E8%A7%A3%E6%9E%90json%E4%B8%8Epython%E4%B8%8B%E8%BD%BD%E5%9B%BE%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/05/03/%E7%88%AC%E8%99%ABpython%E8%A7%A3%E6%9E%90json%E4%B8%8Epython%E4%B8%8B%E8%BD%BD%E5%9B%BE%E7%89%87/" class="post-title-link" itemprop="url">爬虫python解析json与python下载图片</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-03 04:24:00" itemprop="dateCreated datePublished" datetime="2016-05-03T04:24:00+08:00">2016-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>目标:<a target="_blank" rel="noopener" href="http://yun.kujiale.com/api/openfps?query=beijing&amp;start=1&amp;num=50">http://yun.kujiale.com/api/openfps?query=beijing&amp;start=1&amp;num=50</a>  中的所有户型数据,将其户型图片下载到本地.</p>
</blockquote>
<p>目标中的数据以json形式存在,因此使用json.loads.</p>
<p>全部代码如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="comment">#encoding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> urllib </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">valifile</span>(<span class="params">name</span>):</span></span><br><span class="line">    rstr = <span class="string">r&quot;[/\:*?&quot;</span>&lt;&gt;|]<span class="string">&quot;  # &#x27;;/:*?&quot;</span>&lt;&gt;|<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">    valiname = re.sub(rstr, &quot;&quot;, name)</span></span><br><span class="line"><span class="string">    return valiname</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def getkjlimages():</span></span><br><span class="line"><span class="string">	for i in range(0,1000000):</span></span><br><span class="line"><span class="string">		print(i)</span></span><br><span class="line"><span class="string">		i = str(i*6)</span></span><br><span class="line">		surl = &#x27;;http://yun.kujiale.com/api/openfps?query=beijing&amp;amp;start=&#x27;;+i+&#x27;;&amp;amp;num=6&#x27;;</span><br><span class="line">		ret=requests.get(url=surl) </span><br><span class="line">		ret.encoding=<span class="string">&#x27;;utf-8&#x27;</span>;</span><br><span class="line">		kjl = json.loads(ret.text)</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">49</span>):</span><br><span class="line">			itmes = kjl[<span class="string">&#x27;;obsExFps&#x27;</span>;][j]</span><br><span class="line">			name = json.dumps(itmes[<span class="string">&#x27;;name&#x27;</span>;])[<span class="number">1</span>:-<span class="number">1</span>].decode(<span class="string">&quot;unicode-escape&quot;</span>)</span><br><span class="line">			src = json.dumps(itmes[<span class="string">&#x27;;pics&#x27;</span>;])[<span class="number">1</span>:-<span class="number">1</span>]</span><br><span class="line">			<span class="comment">##name和src后面加了[1:-1]的原因是json数据中包含了前后两个引号,要将其去掉</span></span><br><span class="line">			print(<span class="string">&#x27;;img_src=&#x27;</span>;+json.dumps(itmes[<span class="string">&#x27;;pics&#x27;</span>;]))</span><br><span class="line">			img = urllib.urlopen(src).read()</span><br><span class="line">			f = file(<span class="string">&#x27;;imgs/&#x27;</span>;+validateTitle(name)+<span class="string">&#x27;;.jpg&#x27;</span>;,<span class="string">&quot;wb&quot;</span>)</span><br><span class="line">			f.write(img)</span><br><span class="line">			f.close</span><br><span class="line">getkjlimages()</span><br></pre></td></tr></table></figure><br>其中,json.dumps出来的字符串为 uxxxx形式,需要用decode(“unicode-escape”)进行转换成中文.另外,由于爬下来的name要直接用于文件名,其中有””等符号,因此需要将name合法化.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">valifile</span>(<span class="params">name</span>):</span></span><br><span class="line">    rstr = <span class="string">r&quot;[/\:*?&quot;</span>&lt;&gt;|]<span class="string">&quot;  # &#x27;;/:*?&quot;</span>&lt;&gt;|<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">    valiname = re.sub(rstr, &quot;&quot;, name)</span></span><br><span class="line"><span class="string">    return valiname</span></span><br></pre></td></tr></table></figure><br>通过以上valifile可以将文件名在windows下合法化.</p>
<p>运行结果:</p>
<p><img src="/images/pasted-55.png" alt="upload successful"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/04/29/requests-pyquery%E7%88%AC%E8%99%AB%E4%BD%93%E9%AA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/04/29/requests-pyquery%E7%88%AC%E8%99%AB%E4%BD%93%E9%AA%8C/" class="post-title-link" itemprop="url">requests+pyquery爬虫体验</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-04-29 08:07:00" itemprop="dateCreated datePublished" datetime="2016-04-29T08:07:00+08:00">2016-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>目标网站:<a target="_blank" rel="noopener" href="http://jc.bjmemc.com.cn/IndexAirReport/AirDailyReport.aspx">http://jc.bjmemc.com.cn/IndexAirReport/AirDailyReport.aspx</a> </p>
<p>需要将所有数据爬下放到数据库中.中途遇到了各种编码问题,因此使用了requests获取页面.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="comment">#encoding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pyq</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">md5</span>(<span class="params">text</span>):</span></span><br><span class="line">    m = hashlib.md5()</span><br><span class="line">    m.update(text.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> m.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getandupload</span>():</span></span><br><span class="line">	conn=MySQLdb.connect(host=<span class="string">&#x27;localhost&#x27;</span>,user=<span class="string">&#x27;root&#x27;</span>,passwd=<span class="string">&#x27;&#x27;</span>,port=<span class="number">3306</span>,charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">	cur=conn.cursor()</span><br><span class="line">	conn.select_db(<span class="string">&#x27;pytest&#x27;</span>)</span><br><span class="line">	ret=requests.get(url=<span class="string">&quot;http://jc.bjmemc.com.cn/IndexAirReport/AirDailyReport.aspx&quot;</span>) </span><br><span class="line">	doc=pyq(ret.text)</span><br><span class="line">	date = re.findall(<span class="string">r&#x27;(w*[0-9]+)w*&#x27;</span>,doc.find(<span class="string">&#x27;#Label0&#x27;</span>).text())</span><br><span class="line">	<span class="comment">#正则,将数字提取出来(为了将yyyy年mm月dd日改成yyyy/mm/dd)</span></span><br><span class="line">	date = date[<span class="number">0</span>]+<span class="string">&#x27;/&#x27;</span>+date[<span class="number">1</span>]+<span class="string">&#x27;/&#x27;</span>+date[<span class="number">2</span>]</span><br><span class="line">	table = pyq(pyq(doc.find(<span class="string">&#x27;#marqueebox&#x27;</span>)).find(<span class="string">&#x27;table&#x27;</span>))</span><br><span class="line">	stations = re.findall(<span class="string">r&#x27;&lt;td style=&quot;width:126px&quot;&gt;(.+?)&lt;/td&gt;&#x27;</span>,table.html())</span><br><span class="line">	aqis = re.findall(<span class="string">r&#x27;&lt;td style=&quot;width:90px&quot;&gt;(.+?)&lt;/td&gt;&#x27;</span>,table.html())</span><br><span class="line">	<span class="comment">#通过正则将html代码中需要的数据提取出来并存在数组中.</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">35</span>):</span><br><span class="line">		value=[md5(date+stations[i][<span class="number">1</span>:]),date,stations[i][<span class="number">1</span>:],aqis[<span class="number">2</span>*i]]</span><br><span class="line">		cur.execute(<span class="string">&#x27;insert ignore into aqi_bjmemc values(%s,%s,%s,%s)&#x27;</span>,value)</span><br><span class="line">	        <span class="comment">#设置了md5id为主键,因此当传重复数据的时候md5id重复,避免了重复上传数据.</span></span><br><span class="line">	conn.commit()</span><br><span class="line">	cur.close()</span><br><span class="line">	conn.close()</span><br><span class="line">getandupload()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/04/27/python%E5%AF%B9%E4%BA%8E%E6%97%B6%E9%97%B4%EF%BC%88hh-mm%EF%BC%89%E8%BF%9B%E8%A1%8C%E5%BE%AA%E7%8E%AF%E9%80%92%E5%A2%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/04/27/python%E5%AF%B9%E4%BA%8E%E6%97%B6%E9%97%B4%EF%BC%88hh-mm%EF%BC%89%E8%BF%9B%E8%A1%8C%E5%BE%AA%E7%8E%AF%E9%80%92%E5%A2%9E/" class="post-title-link" itemprop="url">python对于时间（hh:mm）进行循环递增</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-04-27 02:52:00" itemprop="dateCreated datePublished" datetime="2016-04-27T02:52:00+08:00">2016-04-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>某数据写入数据表时，其中一个字段是time，具体内容是从00:00一直到23:30。因此打算用python对csv文件进行逐行处理，新建time列，其中的数据按照半小时递增。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment">#对于时间进行处理需要引入time</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">importcsv</span>(<span class="params">filename,outfilename</span>):</span></span><br><span class="line">    print(filename)</span><br><span class="line">    filenamerow = filename.split(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">    filenamerow[<span class="number">2</span>] = filenamerow[<span class="number">2</span>][:-<span class="number">4</span>]</span><br><span class="line">    date = filenamerow[<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">type</span> = filenamerow[<span class="number">2</span>]</span><br><span class="line">    lctime = <span class="number">1325347200.0</span></span><br><span class="line">    <span class="comment">#设定一个时间戳，对应的是某一天的00:00</span></span><br><span class="line">    g=file(<span class="built_in">type</span>+ <span class="string">&#x27;-&#x27;</span> +date+ <span class="string">&#x27;.csv&#x27;</span>,<span class="string">&#x27;w+&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        line = f.readline()</span><br><span class="line">        <span class="keyword">while</span> line:</span><br><span class="line">            line = line.replace(<span class="string">&#x27;n&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            line = line.replace(<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            line = line + <span class="string">&#x27;,,&#x27;</span></span><br><span class="line">            row = line.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">            row[<span class="number">2</span>] = row[<span class="number">0</span>]</span><br><span class="line">            x = time.localtime(lctime)</span><br><span class="line">            <span class="comment">#对时间戳进行处理,得到</span></span><br><span class="line">            <span class="comment">#time.struct_time(tm_year=2012, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=6, tm_yday=1, tm_isdst=0)</span></span><br><span class="line">            row[<span class="number">1</span>] = time.strftime(<span class="string">&#x27;%H:%M&#x27;</span>,x)</span><br><span class="line">            <span class="comment">#对以上的时间进行格式化并写入第二列。格式为HH:MM</span></span><br><span class="line">            row[<span class="number">0</span>] = date</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(row)-<span class="number">1</span>):</span><br><span class="line">                row[i] = row[i] + <span class="string">&#x27;,&#x27;</span></span><br><span class="line">            g.writelines(row)</span><br><span class="line">            g.writelines(<span class="string">&#x27;n&#x27;</span>)</span><br><span class="line">            lctime = lctime + <span class="number">1800.0</span></span><br><span class="line">            <span class="comment">#时间戳加上1800，相当于加上了1800s = 30min</span></span><br><span class="line">            line = f.readline()</span><br><span class="line">    g.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ListFiles</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> os.listdir(data_folder):</span><br><span class="line">        <span class="keyword">if</span> i.endswith(<span class="string">&#x27;.csv&#x27;</span>):</span><br><span class="line">            importcsv(i,i)</span><br></pre></td></tr></table></figure><br>python中时间戳都是以s为单位，且格式为<strong>浮点</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/04/21/%E6%8E%A2%E7%A9%B6%E5%87%BD%E6%95%B0%E7%9F%A9%E9%98%B5%E5%8C%96%E8%BF%90%E7%AE%97%E2%80%94%E2%80%94%E9%80%90%E6%AD%A5%E5%88%86%E6%9E%90%E5%AF%B9%E4%BA%8E%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E4%BB%A3%E4%BB%B7%E5%87%BD%E6%95%B0%E7%9A%84%E7%9F%A9%E9%98%B5%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/04/21/%E6%8E%A2%E7%A9%B6%E5%87%BD%E6%95%B0%E7%9F%A9%E9%98%B5%E5%8C%96%E8%BF%90%E7%AE%97%E2%80%94%E2%80%94%E9%80%90%E6%AD%A5%E5%88%86%E6%9E%90%E5%AF%B9%E4%BA%8E%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E4%BB%A3%E4%BB%B7%E5%87%BD%E6%95%B0%E7%9A%84%E7%9F%A9%E9%98%B5%E5%8C%96/" class="post-title-link" itemprop="url">探究函数矩阵化运算——逐步分析对于线性回归代价函数的矩阵化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-04-21 10:36:00" itemprop="dateCreated datePublished" datetime="2016-04-21T10:36:00+08:00">2016-04-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在此之前没有接触过矩阵化运算，因此对于矩阵化运算的过程一头雾水。准备对于线性回归的代价函数进行矩阵化以探究其过程。</p>
<hr>
<p>CostFuction 数学表达式：</p>
<script type="math/tex; mode=display">J(\theta)=\frac{1}{2m}\sum^m_{i=1}(h_\theta(x^{(i)})-y^{(i)})^2</script><p>根据数学式之前以for循环写了算法：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m</span><br><span class="line">J += (theta(<span class="number">1</span>)+ theta(<span class="number">2</span>)*X(<span class="built_in">i</span>,<span class="number">2</span>)-y(<span class="built_in">i</span>))^<span class="number">2</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">J = J/(<span class="number">2</span>*m);</span><br></pre></td></tr></table></figure><br>很明确的循环符合数学式。</p>
<p>尝试对齐进行矩阵化，首先看$h_\theta(x^{(i)})$</p>
<script type="math/tex; mode=display">h_\theta(x)=\theta^T x = \theta_0 + \theta_1 x_1</script><p>对每个x(i)进行运算：</p>
<p><img src="/images/pasted-54.png" alt="upload successful"></p>
<p>对其进行sum与转置操作后可以得到</p>
<script type="math/tex; mode=display">\sum((\theta'.*X)')-y'= \\ [\theta_1 x^{(1)}_1+\theta_2 x^{(1)}_2 -y^{(1)},\theta_1 x^{(2)}_1+\theta_2 x^{(2)}_2 -y^{(2)},...,\theta_1 x^{(m)}_1+\theta_2 x^{(m)}_2 -y^{(m)}]</script><p>因此可以得知代价函数的矩阵化函数式为：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">J = sum((sum((theta&#x27;.*X)&#x27;)-y&#x27;).^<span class="number">2</span>)/(<span class="number">2</span>*m);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/04/21/js%E8%8E%B7%E5%8F%96url%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%A0%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/04/21/js%E8%8E%B7%E5%8F%96url%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E4%BC%A0%E5%80%BC/" class="post-title-link" itemprop="url">js获取url中的参数传值</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-04-21 06:57:00" itemprop="dateCreated datePublished" datetime="2016-04-21T06:57:00+08:00">2016-04-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Front-End/" itemprop="url" rel="index"><span itemprop="name">Front End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>之前页面只需要传一个值，因此用的是比较简单的方法：获取页面url后以等号进行字符串分割，代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="built_in">window</span>.location.search;</span><br><span class="line"><span class="keyword">var</span> loc = url.substring(url.lastIndexOf(<span class="string">&quot;=&quot;</span>) + <span class="number">1</span>, url.length);</span><br></pre></td></tr></table></figure><br>但是这样只能获取最后一个等号所带的值，大多情况无法满足需要。因此需要一个能够获取全部参数部分（“?”之后的部分）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetRequest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> url = location.search; <span class="comment">//获取url中&quot;?&quot;符后的字串   </span></span><br><span class="line">	<span class="keyword">var</span> theRequest = <span class="keyword">new</span> <span class="built_in">Object</span>();<span class="comment">//新建对象</span></span><br><span class="line">	<span class="keyword">if</span> (url.indexOf(<span class="string">&quot;?&quot;</span>) != -<span class="number">1</span>) &#123; <span class="comment">//排除没有参数的情况</span></span><br><span class="line">		<span class="keyword">var</span> str = url.substr(<span class="number">1</span>);<span class="comment">//抽取从第二个字符到结尾的字符子串</span></span><br><span class="line">		strs = str.split(<span class="string">&quot;&amp;&quot;</span>);<span class="comment">//将str以&amp;作为分隔符分成多个部分，以数组形式存在strs里</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; strs.length; i++) &#123;<span class="comment">//遍历strs数组</span></span><br><span class="line">			theRequest[strs[i].split(<span class="string">&quot;=&quot;</span>)[<span class="number">0</span>]] = <span class="built_in">unescape</span>(strs[i].split(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>]);<span class="comment">//使theRsquest[key] = value</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> theRequest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>使用方法：</p>
<p>GetRequest()[key]</p>
<p>例如 访问test.html?id=9&amp;type=cat</p>
<p>在test.html里</p>
<p>GetRequest()[“id”] //9</p>
<p>GetRequest()[“type”] //cat</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备18029472号-1 </a>
  </div>

<div class="copyright">
  &copy; 2016 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lsvih</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div><script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    menuSettings: {
      zoom: "None"
    },
    showMathMenu: false,
    jax: ["input/TeX","output/CommonHTML"],
    extensions: ["tex2jax.js"],
    TeX: {
      extensions: ["AMSmath.js","AMSsymbols.js"],
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [["$", "$"],["\\(", "\\)"]],
      displayMath: [["\\[", "\\]"]]
    }
  });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4.8.3/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4.9.2/dist/instantsearch.production.min.js"></script><script src="/js/algolia-search.js"></script>






  




  


</body>
</html>
