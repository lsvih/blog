<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lsvih.com","root":"/","scheme":"Pisces","version":"8.0.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"algolia":{"appID":"6U6P1RGK4F","apiKey":"b14e73cdd627eabe947b5decbe14850f","indexName":"lsvih","hits":{"per_page":10}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="My note">
<meta property="og:url" content="https://lsvih.com/page/13/index.html">
<meta property="og:site_name" content="My note">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="lsvih">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lsvih.com/page/13/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>My note - lsvih</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142893470-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-142893470-1');
      }
    </script>






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="My note" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">My note</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">lsvih</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="https://cv.lsvih.com/" rel="noopener" target="_blank"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lsvih</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">162</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">205</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lsvih" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lsvih" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lsvih@qq.com" title="E-Mail → mailto:lsvih@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/06/27/%E7%A6%81%E6%AD%A2%E6%89%8B%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8E%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%8E%9F%E7%94%9F%E6%BB%9A%E5%8A%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/27/%E7%A6%81%E6%AD%A2%E6%89%8B%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8E%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%8E%9F%E7%94%9F%E6%BB%9A%E5%8A%A8/" class="post-title-link" itemprop="url">禁止手机浏览器与微信浏览器的原生滚动</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-06-27 11:17:00" itemprop="dateCreated datePublished" datetime="2016-06-27T11:17:00+08:00">2016-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Front-End/" itemprop="url" rel="index"><span itemprop="name">Front End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在微信浏览器中,如果页面内容到头或者到底,手指滑动时会拖动整个页面。如图所示</p>
<p><img src="/images/pasted-85.png" alt="upload successful"></p>
<p>在原生滑动过程中,页面中的所有动画(包括canvas动画、gif动图、css变幻、js计时器)会全部停止,在页面回弹到初始位置时才会继续运行,极大地影响了用户的体验。</p>
<p>因此,在用户有拖动操作时需要将页面的上下原生滑动停止,至少要在用户拖动区域禁止原生滚动事件。</p>
<p>例如我在项目中碰到需要用户左右滑动的操作,而如果用户向左下滑动,则会造成页面先向下滑动后回弹,然后定义的事件才会产生。</p>
<p>因此需要使用preventDefault()来禁止原生touchstart动作。但是如果直接使用event.preventDefault()会使整个页面的滚动事件全部失效,达不到想要的效果,因此对其进行有条件的处理。js代码如下:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* 禁止微信原生上下滚动</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> overscroll = <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">	el.addEventListener(<span class="string">&#x27;touchstart&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	    <span class="keyword">var</span> top = el.scrollTop,</span><br><span class="line">		totalScroll = el.scrollHeight,</span><br><span class="line">		currentScroll = top + el.offsetHeight;</span><br><span class="line">	    <span class="keyword">if</span> (top === <span class="number">0</span>) &#123;</span><br><span class="line">    	el.scrollTop = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentScroll === totalScroll) &#123;</span><br><span class="line">	        el.scrollTop = top - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    el.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (el.offsetHeight &lt; el.scrollHeight)</span><br><span class="line">      evt._isScroller = <span class="literal">true</span>;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br><span class="line">overscroll(<span class="built_in">document</span>.querySelector(<span class="string">&#x27;#scroll&#x27;</span>));<span class="comment">//此处的scroll为需要禁止原生滚动的Object</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!evt._isScroller) &#123;</span><br><span class="line">    evt.preventDefault();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/06/27/%E4%BD%BF%E7%94%A8gulp%E6%9E%84%E5%BB%BA%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/27/%E4%BD%BF%E7%94%A8gulp%E6%9E%84%E5%BB%BA%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/" class="post-title-link" itemprop="url">使用gulp构建前端工程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-06-27 09:05:57" itemprop="dateCreated datePublished" datetime="2016-06-27T09:05:57+08:00">2016-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Front-End/" itemprop="url" rel="index"><span itemprop="name">Front End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>gulp.js 是一个自动化构建工具,基于 Node.js。通过gulp可以省略前端开发中很多重复无意义的步骤,例如js/css的压缩、less/sass的编译等。</p>
<p>在公司的项目中,需要在测试环境中反复调试一些内容(需求要求),而我在js中使用了es6的let声明关键词与严格模式,在测试容器—微信浏览器下无法顺利运行。因此使用gulp重新构建项目,利用其特性实现自动化压缩js/css,编译less,替换js中的let为var等功能。</p>
<p>项目目录结构:<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├─node_modules</span><br><span class="line">├─<span class="keyword">dist</span></span><br><span class="line"><span class="keyword">│ </span>  ├─css</span><br><span class="line">│   ├─fonts</span><br><span class="line">│   ├─images</span><br><span class="line">│   └─<span class="keyword">js</span></span><br><span class="line"><span class="keyword">└─src</span></span><br><span class="line"><span class="keyword"> </span>   ├─css</span><br><span class="line">    ├─fonts</span><br><span class="line">    ├─images</span><br><span class="line">    ├─<span class="keyword">js</span></span><br><span class="line"><span class="keyword"> </span>   └─less</span><br></pre></td></tr></table></figure></p>
<p>dist目录为构建目录,src为工程目录;</p>
<p>首先下载nodejs,其中也包含了npm包管理工具。</p>
<p>切换到项目根目录下,输入:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global gulp</span><br></pre></td></tr></table></figure></p>
<p>全局安装gulp。</p>
<p>输入:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp</span><br></pre></td></tr></table></figure></p>
<p>使其作为项目的开发依赖安装。此时会自动创建目录node_modules;</p>
<p>输入:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-uglify gulp-minify-css gulp-sourcemaps gulp-less gulp-concat gulp-rename gulp-imagemin gulp-replace gulp-htmlmin --save-dev</span><br></pre></td></tr></table></figure></p>
<p>安装项目所需要的插件。</p>
<p>使用到的插件有:</p>
<p>gulp-uglify:js混淆、压缩</p>
<p>gulp-minify-css:css压缩</p>
<p>gulp-sourcemaps:为less插件创建map</p>
<p>gulp-less:编译less文件</p>
<p>gulp-concat:文件合并</p>
<p>gulp-rename:文件重命名</p>
<p>gulp-imagemin:图片压缩</p>
<p>gulp-replace:文本替换(正则式)</p>
<p>gulp-htmlmin:html文件压缩(html中的css与js也会被压缩)</p>
<p>在根目录创建gulpfile.js。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp=<span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);<span class="comment">//创建gulp模块</span></span><br><span class="line"><span class="keyword">var</span> uglify=<span class="built_in">require</span>(<span class="string">&quot;gulp-uglify&quot;</span>);<span class="comment">//创建js混淆压缩模块</span></span><br><span class="line"><span class="keyword">var</span> minify_css=<span class="built_in">require</span>(<span class="string">&quot;gulp-minify-css&quot;</span>);<span class="comment">//创建css混淆压缩模块</span></span><br><span class="line"><span class="keyword">var</span> less=<span class="built_in">require</span>(<span class="string">&#x27;gulp-less&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> gulp_concat=<span class="built_in">require</span>(<span class="string">&#x27;gulp-concat&#x27;</span>);<span class="comment">//创建文件合并模块</span></span><br><span class="line"><span class="keyword">var</span> del=<span class="built_in">require</span>(<span class="string">&#x27;del&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> rename=<span class="built_in">require</span>(<span class="string">&#x27;gulp-rename&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> imagemin=<span class="built_in">require</span>(<span class="string">&#x27;gulp-imagemin&#x27;</span>);<span class="comment">//压缩图片</span></span><br><span class="line"><span class="keyword">var</span> replace=<span class="built_in">require</span>(<span class="string">&#x27;gulp-replace&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin=<span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> sourcemaps=<span class="built_in">require</span>(<span class="string">&#x27;gulp-sourcemaps&#x27;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clean</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Clean:&#x27;</span> + path)</span><br><span class="line">    del(path);</span><br><span class="line">&#125;</span><br><span class="line">gulp.task(<span class="string">&#x27;less&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">&#x27;./src/less/*.less&#x27;</span>)</span><br><span class="line">        .pipe(sourcemaps.init())</span><br><span class="line">        .pipe(less())</span><br><span class="line">        .pipe(sourcemaps.write())</span><br><span class="line">        .pipe(rename(&#123; <span class="attr">suffix</span>: <span class="string">&#x27;.min&#x27;</span> &#125;))</span><br><span class="line">        .pipe(minify_css())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./dist/css&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;css&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">&#x27;./src/css/*.css&#x27;</span>)</span><br><span class="line">   		.pipe(rename(&#123; <span class="attr">suffix</span>: <span class="string">&#x27;.min&#x27;</span> &#125;))</span><br><span class="line">        .pipe(minify_css())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./dist/css&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;javascripts&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.src(<span class="string">&#x27;./src/js/*.js&#x27;</span>)</span><br><span class="line">    .pipe(replace(<span class="string">&#x27;let &#x27;</span>, <span class="string">&#x27;var &#x27;</span>))<span class="comment">//微信不支持let用法因此换成var</span></span><br><span class="line">    .pipe(replace(<span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>, <span class="string">&#x27;&#x27;</span>))<span class="comment">//微信不支持严格模式</span></span><br><span class="line">    .pipe(rename(&#123; <span class="attr">suffix</span>: <span class="string">&#x27;.min&#x27;</span> &#125;))</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./dist/js&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;html&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> options = &#123;</span><br><span class="line">        removeComments: <span class="literal">true</span>,<span class="comment">//清除HTML注释</span></span><br><span class="line">        collapseWhitespace: <span class="literal">true</span>,<span class="comment">//压缩HTML</span></span><br><span class="line">        collapseBooleanAttributes: <span class="literal">true</span>,<span class="comment">//省略布尔属性的值 &lt;input checked=&quot;true&quot;/&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">        removeEmptyAttributes: <span class="literal">true</span>,<span class="comment">//删除所有空格作属性值 &lt;input id=&quot;&quot; /&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">        removeScriptTypeAttributes: <span class="literal">true</span>,<span class="comment">//删除&lt;script&gt;的type=&quot;text/javascript&quot;</span></span><br><span class="line">        removeStyleLinkTypeAttributes: <span class="literal">true</span>,<span class="comment">//删除&lt;style&gt;和&lt;link&gt;的type=&quot;text/css&quot;</span></span><br><span class="line">        minifyJS: <span class="literal">true</span>,<span class="comment">//压缩页面JS</span></span><br><span class="line">        minifyCSS: <span class="literal">true</span><span class="comment">//压缩页面CSS</span></span><br><span class="line">    &#125;;</span><br><span class="line">    gulp.src(<span class="string">&#x27;./src/*.html&#x27;</span>)</span><br><span class="line">    .pipe(replace(<span class="string">&#x27;let &#x27;</span>, <span class="string">&#x27;var &#x27;</span>))<span class="comment">//微信不支持let用法因此换成var</span></span><br><span class="line">    .pipe(replace(<span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>, <span class="string">&#x27;&#x27;</span>))<span class="comment">//微信不支持严格模式</span></span><br><span class="line">    .pipe(replace(<span class="string">&#x27;.css&#x27;</span>, <span class="string">&#x27;.min.css&#x27;</span>))<span class="comment">//将html引用的资源从css与js变成min.css与min.js</span></span><br><span class="line">    .pipe(replace(<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.min.js&#x27;</span>))</span><br><span class="line">    .pipe(htmlmin(options))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./dist/&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;images&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src([<span class="string">&#x27;./src/images/*.*&#x27;</span>,<span class="string">&#x27;./src/images/**/*.*&#x27;</span>])</span><br><span class="line">    .pipe(imagemin())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./dist/images/&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;fonts&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	gulp.src(<span class="string">&#x27;./src/fonts/*.*&#x27;</span>)</span><br><span class="line">	.pipe(gulp.dest(<span class="string">&#x27;./dist/fonts/&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;clean&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    clean(<span class="string">&#x27;./dist/*&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;build&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.run(<span class="string">&#x27;less&#x27;</span>,<span class="string">&#x27;css&#x27;</span>,<span class="string">&#x27;javascripts&#x27;</span>,<span class="string">&#x27;html&#x27;</span>,<span class="string">&#x27;images&#x27;</span>,<span class="string">&#x27;fonts&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Done!&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.run(<span class="string">&#x27;build&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Done!&#x27;</span>)</span><br><span class="line">    gulp.watch([<span class="string">&#x27;./src/less/*.less&#x27;</span>,<span class="string">&#x27;./src/js/*.js&#x27;</span>,<span class="string">&#x27;./src/css/*.css&#x27;</span>,<span class="string">&#x27;./src/*.html&#x27;</span>,<span class="string">&#x27;./src/images/*.*&#x27;</span>,<span class="string">&#x27;./src/images/*/*.*&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gulp.run(<span class="string">&#x27;build&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>与gulp有关的方法主要有以下几种:</p>
<p>gulp.task 定义gulp任务</p>
<p>gulp.run 运行gulp任务</p>
<p>gulp.watch 监控文件变化</p>
<p>gulp.src 输入文件路径</p>
<p>gulp.dest 指定处理完后文件输出的路径</p>
<p>其中参数多是以数组形式输入,例如监控多个目录:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.watch([<span class="string">&#x27;./src/less/*.less&#x27;</span>,<span class="string">&#x27;./src/js/*.js&#x27;</span>,<span class="string">&#x27;./src/css/*.css&#x27;</span>,<span class="string">&#x27;./src/*.html&#x27;</span>,<span class="string">&#x27;./src/images/*.*&#x27;</span>,<span class="string">&#x27;./src/images/*/*.*&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//检测到文件变化时执行的操作</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>gulp.task定义了任务的名称与过程。</p>
<p>例如<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.run(<span class="string">&#x27;build&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Done!&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>即定义了default任务,在执行default任务时,执行build任务并返回“Done”</p>
<p>default任务是默认任务,执行时直接在项目目录执行命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br></pre></td></tr></table></figure></p>
<p>即为进行default任务。</p>
<p>同时也可以通过gulp + 任务名 来运行指定任务,例如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp clean</span><br></pre></td></tr></table></figure></p>
<p>即为运行名称为clean的任务。</p>
<p>在任务中,文件以“流”的形式在任务中流转,使用pipe可对其进行操作;.pipe可对与流通至此管道中的文件流进行相关操作。</p>
<p>例如,输入src/images中的所有图片进行压缩后,输出到dist/images<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;images&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src([<span class="string">&#x27;./src/images/*.*&#x27;</span>,<span class="string">&#x27;./src/images/**/*.*&#x27;</span>])</span><br><span class="line">    .pipe(imagemin())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./dist/images/&#x27;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>gulp.src获取images与images子目录下的所有文件,传入管道中;文件流通过imagemin()管道时,其中的图片被分别压缩,最终输出到dist/images目录中。</p>
<p>掌握gulp基本用法后就能够使用它进行一般的工程化构建了。当需要达到某种对文件流的处理效果时,可以在网上搜索相关插件,使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-xxx --save-dev</span><br></pre></td></tr></table></figure></p>
<p>下载与保存,在gulpfile.js中以var xxx=require(‘gulp-xxx’)形式定义,即可在任务中使用这种插件了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/06/12/%E6%B4%97%E7%89%8C%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/12/%E6%B4%97%E7%89%8C%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">洗牌算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-06-12 12:57:00" itemprop="dateCreated datePublished" datetime="2016-06-12T12:57:00+08:00">2016-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>目的:将排列好的数据重新以随机的方式排列</p>
<p>原理:从数组中随机选出一个元素，放入目标数组中后从原数组中删除这个元素。反复进行这个过程，直到原数组中所有的元素都进入了新的数组。此时目标数组中的元素为随机排列，达到了“洗牌”的效果。</p>
<p>使用Python描述:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shuffle</span>(<span class="params">list</span>):</span>  </span><br><span class="line">  targetlist=[]</span><br><span class="line">  <span class="keyword">while</span> list:   </span><br><span class="line">    i=random.randrange(<span class="number">0</span>,len(list))</span><br><span class="line">    targetlist.append(list[i])    </span><br><span class="line">    list.pop(i)  </span><br><span class="line">  <span class="keyword">return</span> targetlist</span><br></pre></td></tr></table></figure>
<p>random.randrange(0,len(list))为从0到list长度中随机生成一个整数。</p>
<p>targetlist.append(list[i])为将list[i]元素放入targetlist数组中。</p>
<p>list.pop(i)为从list中删除这个元素。</p>
<p>可以通过这个算法实现对训练集与测试集的分配。例如:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shuffle_split_data</span>(<span class="params">X, y</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Shuffles and splits data into 70% training and 30% testing subsets,</span></span><br><span class="line"><span class="string">        then returns the training and testing subsets. &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Shuffle and split the data</span></span><br><span class="line">    split_num = int(<span class="number">0.7</span> * len(X))</span><br><span class="line">    X_t = []</span><br><span class="line">    y_t = []</span><br><span class="line">    X = list(X)</span><br><span class="line">    <span class="keyword">while</span> X:</span><br><span class="line">        p = random.randrange(<span class="number">0</span>, len(X))</span><br><span class="line">        X_t.append(X[p])</span><br><span class="line">        y_t.append(y[p])</span><br><span class="line">        X.pop(p)</span><br><span class="line"></span><br><span class="line">    X_train = X_t[:split_num]</span><br><span class="line">    y_train = y_t[:split_num]</span><br><span class="line">    X_test = X_t[split_num:]</span><br><span class="line">    y_test = y_t[split_num:]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Return the training and testing data subsets</span></span><br><span class="line">    <span class="keyword">return</span> X_train, y_train, X_test, y_test</span><br></pre></td></tr></table></figure></p>
<p>X为输入值，y为输出值，将70%的数据放入训练集，将30%的数据放入测试集</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/06/11/%E4%BD%BF%E7%94%A8Numpy%E4%B8%8EPandas%E8%BF%9B%E8%A1%8C%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/11/%E4%BD%BF%E7%94%A8Numpy%E4%B8%8EPandas%E8%BF%9B%E8%A1%8C%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">使用Numpy与Pandas进行简单数据处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-06-11 08:58:00" itemprop="dateCreated datePublished" datetime="2016-06-11T08:58:00+08:00">2016-06-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">Machine Learning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame, Series</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"></span><br><span class="line">countries = [<span class="string">&#x27;Russian Fed.&#x27;</span>, <span class="string">&#x27;Norway&#x27;</span>, <span class="string">&#x27;Canada&#x27;</span>, <span class="string">&#x27;United States&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Netherlands&#x27;</span>, <span class="string">&#x27;Germany&#x27;</span>, <span class="string">&#x27;Switzerland&#x27;</span>, <span class="string">&#x27;Belarus&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Austria&#x27;</span>, <span class="string">&#x27;France&#x27;</span>, <span class="string">&#x27;Poland&#x27;</span>, <span class="string">&#x27;China&#x27;</span>, <span class="string">&#x27;Korea&#x27;</span>, </span><br><span class="line">            <span class="string">&#x27;Sweden&#x27;</span>, <span class="string">&#x27;Czech Republic&#x27;</span>, <span class="string">&#x27;Slovenia&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Finland&#x27;</span>, <span class="string">&#x27;Great Britain&#x27;</span>, <span class="string">&#x27;Ukraine&#x27;</span>, <span class="string">&#x27;Slovakia&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Italy&#x27;</span>, <span class="string">&#x27;Latvia&#x27;</span>, <span class="string">&#x27;Australia&#x27;</span>, <span class="string">&#x27;Croatia&#x27;</span>, <span class="string">&#x27;Kazakhstan&#x27;</span>]</span><br><span class="line"></span><br><span class="line">gold = [<span class="number">13</span>, <span class="number">11</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">silver = [<span class="number">11</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line">bronze = [<span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>显示奖牌数据:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">olympic_medal_counts_df = DataFrame(</span><br><span class="line">         &#123;<span class="string">&#x27;country_name&#x27;</span>: countries,</span><br><span class="line">          <span class="string">&#x27;gold&#x27;</span>: gold,</span><br><span class="line">          <span class="string">&#x27;silver&#x27;</span>: silver,</span><br><span class="line">          <span class="string">&#x27;bronze&#x27;</span>: bronze&#125;) </span><br><span class="line"><span class="keyword">print</span> olympic_medal_counts_df</span><br><span class="line"></span><br><span class="line">df = olympic_medal_counts_df</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-82.png" alt="upload successful"></p>
<p>计算至少获得一枚金牌的国家所获得铜牌的平均数：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">avg_bronze_at_least_one_gold = numpy.mean(df[df.gold &amp;gt; <span class="number">0</span>].bronze)</span><br><span class="line"><span class="keyword">print</span>  avg_bronze_at_least_one_gold</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;4.2380952381</p>
<p>计算金牌、银牌与铜牌的平均数：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">avg_medal_count=numpy.mean(df[[<span class="string">&#x27;gold&#x27;</span>,<span class="string">&#x27;silver&#x27;</span>,<span class="string">&#x27;bronze&#x27;</span>]])</span><br><span class="line"><span class="keyword">print</span> avg_medal_count</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-83.png" alt="upload successful"></p>
<p>如果收获一枚金牌得4分，一枚银牌得2分，一枚铜牌得1分，计算所有国家的总分数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;points&#x27;</span>] = df[[<span class="string">&#x27;gold&#x27;</span>,<span class="string">&#x27;silver&#x27;</span>,<span class="string">&#x27;bronze&#x27;</span>]].dot([<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>])</span><br><span class="line">olympic_points_df = df[[<span class="string">&#x27;country_name&#x27;</span>,<span class="string">&#x27;points&#x27;</span>]]</span><br><span class="line"><span class="keyword">print</span> olympic_points_df</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-84.png" alt="upload successful"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/06/11/Numpy%E4%B8%8EPandas%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/11/Numpy%E4%B8%8EPandas%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">Numpy与Pandas学习记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-06-11 08:02:00" itemprop="dateCreated datePublished" datetime="2016-06-11T08:02:00+08:00">2016-06-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tool/" itemprop="url" rel="index"><span itemprop="name">Tool</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Numpy为Python下的科学计算库，用于快速处理数据、科学计算等。</p>
<p>pandas 是基于 Numpy 构建的含有更高级数据结构和工具的数据分析包</p>
<hr>
<p>Numpy 库文档：<a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html">https://docs.scipy.org/doc/numpy-dev/user/quickstart.html</a></p>
<p>Pandas 库文档：<a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/version/0.17.0/">http://pandas.pydata.org/pandas-docs/version/0.17.0/</a></p>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<h3 id="Numpy的基本使用"><a href="#Numpy的基本使用" class="headerlink" title="Numpy的基本使用"></a>Numpy的基本使用</h3><h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array = np.array([<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>], float)</span><br><span class="line"><span class="keyword">print</span> array</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;[ 1.  4.  5.  8.]</p>
<p>np.array最后的参数表示数据类型为浮点。因此显示数组时整数后会有一个小数点。</p>
<blockquote>
<p>重建的数组中所有数据必须为相同的数据类型</p>
<p>The array object class is the foundation of Numpy, and Numpy arrays are like lists in Python, except that every thing inside an array must be of the same type, like int or float.</p>
</blockquote>
<h4 id="创建二维数组"><a href="#创建二维数组" class="headerlink" title="创建二维数组"></a>创建二维数组</h4><p>同理：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]], float)  <span class="comment"># a 2D array/Matrix</span></span><br><span class="line"><span class="keyword">print</span> array</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;[[ 1.  2.  3.][ 4.  5.  6.]]</p>
<h4 id="存取元素"><a href="#存取元素" class="headerlink" title="存取元素"></a>存取元素</h4><p>与Python基本用法一致</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array = np.array([<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>], float)</span><br><span class="line"><span class="keyword">print</span> array</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;[ 1.  4.  5.  8.]<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> array[<span class="number">1</span>]<span class="comment">##显示数组中下标为1的数据</span></span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;4.0<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> array[:<span class="number">2</span>]<span class="comment">##显示数组从下标0开始向后的2个数据</span></span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;[ 1.  4.]<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array[<span class="number">1</span>]=<span class="number">5.0</span><span class="comment">##通过下标修改对应数据</span></span><br><span class="line"><span class="keyword">print</span> array[<span class="number">1</span>]</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;5.0</p>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">two_D_array=np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]], float)<span class="comment">##创建2d数组</span></span><br><span class="line"><span class="keyword">print</span> two_D_array</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;[[ 1.  2.  3.][ 4.  5.  6.]]<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> two_D_array[<span class="number">1</span>][<span class="number">1</span>]<span class="comment">##显示下标为1的数据组中的下标为1的数据</span></span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;5.0<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> two_D_array[<span class="number">1</span>, :]<span class="comment">##显示下标为1的数据组中所有数据</span></span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;[ 4.  5.  6.]<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> two_D_array[:, <span class="number">2</span>]<span class="comment">##显示所有数据组中的下标为2的数据</span></span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;[ 3.  6.]</p>
<h4 id="数组运算"><a href="#数组运算" class="headerlink" title="数组运算"></a>数组运算</h4><p>数组间的四则运算<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], float)</span><br><span class="line">array_2 = np.array([<span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>], float)</span><br></pre></td></tr></table></figure><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> array_1 + array_2</span><br><span class="line"><span class="keyword">print</span> array_1 - array_2</span><br><span class="line"><span class="keyword">print</span> array_1 * array_2</span><br><span class="line"><span class="keyword">print</span> array_1 / array_2</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;[ 6.  4.  9.] </p>
<p>output&gt;&gt;[-4.  0. -3.]</p>
<p>output&gt;&gt;[ 5.   4.  18.]</p>
<p>output&gt;&gt;[ 0.2  1.  0.5]</p>
<p>二维数组间的四则运算<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_1 = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], float)</span><br><span class="line">array_2 = np.array([[<span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>]], float)</span><br></pre></td></tr></table></figure><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> array_1 + array_2</span><br><span class="line"><span class="keyword">print</span> array_1 - array_2</span><br><span class="line"><span class="keyword">print</span> array_1 * array_2</span><br><span class="line"><span class="keyword">print</span> array_1 / array_2</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;[[ 6.   8.][ 10.  12.]] </p>
<p>output&gt;&gt;[[-4. -4.][-4. -4.]]</p>
<p>output&gt;&gt;[[ 5.  12.][ 21.  32.]]</p>
<p>output&gt;&gt;[[ 0.2   0.33333333][ 0.42857143  0.5]]</p>
<h4 id="数据快速处理"><a href="#数据快速处理" class="headerlink" title="数据快速处理"></a>数据快速处理</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], float)</span><br><span class="line">array_2 = np.array([[<span class="number">6</span>], [<span class="number">7</span>], [<span class="number">8</span>]], float)</span><br></pre></td></tr></table></figure>
<p>求和：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> np.sum(array_1)</span><br><span class="line"><span class="keyword">print</span> np.sum(array_2)</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;6.0</p>
<p>output&gt;&gt;21.0</p>
<p>求均值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> np.mean(array_1)</span><br><span class="line"><span class="keyword">print</span> np.mean(array_2)</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;2.0</p>
<p>output&gt;&gt;7.0</p>
<p>求方差：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> np.var(array_1)</span><br><span class="line"><span class="keyword">print</span> np.var(array_2)</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;0.666666666667</p>
<p>output&gt;&gt;0.666666666667</p>
<p>求标准差：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> np.std(array_1)</span><br><span class="line"><span class="keyword">print</span> np.std(array_2)</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;0.816496580928</p>
<p>output&gt;&gt;0.816496580928</p>
<p>求内积：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> np.dot(array_1, array_2)</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;[ 44.]</p>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>
<h3 id="Pandas的基本使用"><a href="#Pandas的基本使用" class="headerlink" title="Pandas的基本使用"></a>Pandas的基本使用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">series = pd.Series([<span class="string">&#x27;Dave&#x27;</span>, <span class="string">&#x27;Cheng-Han&#x27;</span>, <span class="string">&#x27;Udacity&#x27;</span>, <span class="number">42</span>, <span class="number">-1789710578</span>])</span><br><span class="line"><span class="keyword">print</span> series</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>index</th>
<th>column</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Dave</td>
</tr>
<tr>
<td>1</td>
<td>Cheng-Han</td>
</tr>
<tr>
<td>2</td>
<td>Udacity</td>
</tr>
<tr>
<td>3</td>
<td>42</td>
</tr>
<tr>
<td>4</td>
<td>-1789710578</td>
</tr>
</tbody>
</table>
</div>
<p>dtype: object</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##通过Python字典对象创建一个数据系列，自动使用递增整型作为索引。</span></span><br><span class="line">series = pd.Series([<span class="string">&#x27;Dave&#x27;</span>, <span class="string">&#x27;Cheng-Han&#x27;</span>, <span class="number">359</span>, <span class="number">9001</span>],</span><br><span class="line">                     index=[<span class="string">&#x27;Instructor&#x27;</span>, <span class="string">&#x27;Curriculum Manager&#x27;</span>,</span><br><span class="line">                            <span class="string">&#x27;Course Number&#x27;</span>, <span class="string">&#x27;Power Level&#x27;</span>])</span><br><span class="line"><span class="keyword">print</span> series</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>column0</th>
<th>column1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Instructor</td>
<td>Dave</td>
</tr>
<tr>
<td>Curriculum Manager</td>
<td>Cheng-Han</td>
</tr>
<tr>
<td>Course Number</td>
<td>359</td>
</tr>
<tr>
<td>Power Level</td>
<td>9001</td>
</tr>
</tbody>
</table>
</div>
<p>dtype: object</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##为数据添加了索引，此时可以通过索引来选择数据：</span></span><br><span class="line"><span class="keyword">print</span> series[<span class="string">&#x27;Instructor&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;Dave<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> series[[<span class="string">&#x27;Instructor&#x27;</span>, <span class="string">&#x27;Curriculum Manager&#x27;</span>, <span class="string">&#x27;Course Number&#x27;</span>]]</span><br></pre></td></tr></table></figure></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>column0</th>
<th>column1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Instructor</td>
<td>Dave</td>
</tr>
<tr>
<td>Curriculum Manager</td>
<td>Cheng-Han</td>
</tr>
<tr>
<td>Course Number</td>
<td>359</td>
</tr>
</tbody>
</table>
</div>
<p>dtype: object</p>
<p>通过bool来显示数据是否满足筛选条件：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cuteness = pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], index=[<span class="string">&#x27;Cockroach&#x27;</span>, <span class="string">&#x27;Fish&#x27;</span>, <span class="string">&#x27;Mini Pig&#x27;</span>,</span><br><span class="line">                          <span class="string">&#x27;Puppy&#x27;</span>, <span class="string">&#x27;Kitten&#x27;</span>])</span><br></pre></td></tr></table></figure><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> cuteness &gt; <span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>column0</th>
<th>column1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cockroach</td>
<td>False</td>
</tr>
<tr>
<td>Fish</td>
<td>False</td>
</tr>
<tr>
<td>Mini Pig</td>
<td>False</td>
</tr>
<tr>
<td>Puppy</td>
<td>True</td>
</tr>
<tr>
<td>Kitten</td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
<p>dtype: bool</p>
<p>只显示满足条件的数据：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> cuteness[cuteness &gt; <span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>column0</th>
<th>column1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Puppy</td>
<td>True</td>
</tr>
<tr>
<td>Kitten</td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
<p>dtype: int64</p>
<p>使用数据框架：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">&#x27;year&#x27;</span>: [<span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2012</span>, <span class="number">2011</span>, <span class="number">2012</span>, <span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2012</span>],</span><br><span class="line">     <span class="string">&#x27;team&#x27;</span>: [<span class="string">&#x27;Bears&#x27;</span>, <span class="string">&#x27;Bears&#x27;</span>, <span class="string">&#x27;Bears&#x27;</span>, <span class="string">&#x27;Packers&#x27;</span>, <span class="string">&#x27;Packers&#x27;</span>, <span class="string">&#x27;Lions&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;Lions&#x27;</span>, <span class="string">&#x27;Lions&#x27;</span>],</span><br><span class="line">     <span class="string">&#x27;wins&#x27;</span>: [<span class="number">11</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">11</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">4</span>],</span><br><span class="line">     <span class="string">&#x27;losses&#x27;</span>: [<span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">12</span>]&#125;</span><br><span class="line">football = pd.DataFrame(data)</span><br><span class="line"><span class="keyword">print</span> football</span><br></pre></td></tr></table></figure><br>output&gt;&gt;</p>
<p><img src="/images/pasted-77.png" alt="upload successful"></p>
<p>显示数据框架各列数据格式：</p>
<h2 id="to-get-the-datatype-for-each-column"><a href="#to-get-the-datatype-for-each-column" class="headerlink" title="to get the datatype for each column"></a>to get the datatype for each column</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football.dtypes</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;</p>
<p>losses     int64 </p>
<p>team      object </p>
<p>wins       int64 </p>
<p>year       int64 </p>
<p>dtype: object</p>
<p>对数据列进行快速统计与汇总：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## useful for seeing basic statistics of the dataframe&#x27;s numerical columns</span></span><br><span class="line"><span class="keyword">print</span> football.describe()</span><br></pre></td></tr></table></figure>
<p>output&gt;&gt;</p>
<pre><code> losses        wins       year 
</code></pre><p>count   8.000000   8.000000     8.000000##总数</p>
<p>mean    6.625000   9.375000  2011.125000##均值</p>
<p>std     3.377975   3.377975    0.834523##标准差</p>
<p>min     1.000000   4.000000  2010.000000##最小值</p>
<p>25%     5.000000   7.500000  2010.750000</p>
<p>50%     6.000000  10.000000  2011.000000 </p>
<p>75%     8.500000  11.000000  2012.000000 </p>
<p>max    12.000000  15.000000  2012.000000##最大值</p>
<p>显示前5行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football.head()</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-78.png" alt="upload successful"></p>
<p>显示后5行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football.tail()</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-79.png" alt="upload successful"></p>
<p>通过索引来访问对应列<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football[<span class="string">&#x27;year&#x27;</span>]<span class="comment">##显示year这一列</span></span><br><span class="line"><span class="comment">##也可用print football.year</span></span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p>0    2010<br>1    2011<br>2    2012<br>3    2011<br>4    2012<br>5    2010<br>6    2011<br>7    2012<br>Name: year, dtype: int64</p>
<p>显示year wins losses三列<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football[[<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;wins&#x27;</span>, <span class="string">&#x27;losses&#x27;</span>]]</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p>  year  wins  losses<br>0  2010    11       5<br>1  2011     8       8<br>2  2012    10       6<br>3  2011    15       1<br>4  2012    11       5<br>5  2010     6      10<br>6  2011    10       6<br>7  2012     4      12</p>
<p>显示第[0]行数据<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football.loc[[<span class="number">0</span>]]</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;<br>  losses   team  wins  year<br>0       5  Bears    11  2010</p>
<p>显示从第[3]行到第[5]行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football[<span class="number">3</span>:<span class="number">5</span>]</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p>  losses     team  wins  year<br>3       1  Packers    15  2011<br>4       5  Packers    11  2012</p>
<p>显示wins中大于10的行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football[football.wins &gt; <span class="number">10</span>]</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-80.png" alt="upload successful"></p>
<p>显示wins大于10且team为Packers的行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> football[(football.wins &gt; <span class="number">10</span>) &amp;amp; (football.team == <span class="string">&quot;Packers&quot;</span>)]</span><br></pre></td></tr></table></figure></p>
<p>output&gt;&gt;</p>
<p><img src="/images/pasted-81.png" alt="upload successful"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/30/mui%E4%B8%A4%E4%B8%AAwebview%E9%97%B4%E4%BC%A0%E8%BE%93%E6%95%B0%E6%8D%AE-%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/05/30/mui%E4%B8%A4%E4%B8%AAwebview%E9%97%B4%E4%BC%A0%E8%BE%93%E6%95%B0%E6%8D%AE-%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">mui两个webview间传输数据(调用函数)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-30 11:08:00" itemprop="dateCreated datePublished" datetime="2016-05-30T11:08:00+08:00">2016-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Front-End/" itemprop="url" rel="index"><span itemprop="name">Front End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>传出值页面：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> todo_page= plus.webview.currentWebview().opener();<span class="comment">//父页面，也可以是别的webviewObject</span></span><br><span class="line">mui.fire(todo_page,<span class="string">&quot;id&quot;</span>,&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure></p>
<p>收到值/执行函数页面<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;price&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.detail.price);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>得到:1</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/25/Python%E5%AF%B9%E5%8F%A5%E5%AD%90%E4%B8%AD%E7%9A%84%E5%8D%95%E8%AF%8D%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/05/25/Python%E5%AF%B9%E5%8F%A5%E5%AD%90%E4%B8%AD%E7%9A%84%E5%8D%95%E8%AF%8D%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">Python对句子中的单词出现次数排序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-25 03:26:00" itemprop="dateCreated datePublished" datetime="2016-05-25T03:26:00+08:00">2016-05-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>出现次数相同的单词按照单词字母排序<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;Count words.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_words</span>(<span class="params">s, n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the n most frequently occuring words in s.&quot;&quot;&quot;</span></span><br><span class="line">    words = s.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> Count the number of occurences of each word in s</span></span><br><span class="line">    counters = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">in</span> counters:</span><br><span class="line">            counters[word] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            counters[word] = <span class="number">1</span></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> Sort the occurences in descending order (alphabetically in case of ties)</span></span><br><span class="line">    top = sorted(counters.iteritems(), key=<span class="keyword">lambda</span> d:(-d[<span class="number">1</span>],d[<span class="number">0</span>]))</span><br><span class="line">    <span class="comment">##lambda中&quot;-&quot;为反序，意思是先把单词出现次数从大到小排列，</span></span><br><span class="line">    <span class="comment">##然后再以单词的字母从小到大排列</span></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> Return the top n words as a list of tuples (&lt;word&gt;, &lt;count&gt;)</span></span><br><span class="line">    top_n = top[:n]<span class="comment">##返回前n个单词</span></span><br><span class="line">    <span class="keyword">return</span> top_n</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_run</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Test count_words() with some inputs.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">print</span> count_words(<span class="string">&quot;cat bat mat cat bat cat&quot;</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">print</span> count_words(<span class="string">&quot;betty bought a bit of butter but the butter was bitter&quot;</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    test_run()</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/18/JS%E5%86%99%E4%B8%80%E9%81%8DK-means/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/05/18/JS%E5%86%99%E4%B8%80%E9%81%8DK-means/" class="post-title-link" itemprop="url">JS写一遍K-means</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-18 06:54:00" itemprop="dateCreated datePublished" datetime="2016-05-18T06:54:00+08:00">2016-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">Machine Learning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>数据可视化用的highcharts.</p>
<p>运行结果:</p>
<p><img src="/images/pasted-75.png" alt="upload successful"></p>
<p>在html头部加上highcharts的cdn<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.hcharts.cn/highcharts/highcharts.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>数据如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        name: &#x27;Female&#x27;,</span><br><span class="line">        color: &#x27;rgba(223,83,83,.5)&#x27;,</span><br><span class="line">        data: [[161.2, 51.6],[167.5, 59.0],[159.5, 49.2],</span><br><span class="line">        [157.0, 63.0],[155.8, 53.6]...]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &#x27;Male&#x27;,</span><br><span class="line">        color: &#x27;rgba(119,152,191,.5)&#x27;,</span><br><span class="line">        data:  [[174.0, 65.6],[175.3, 71.8],[193.5, 80.7],</span><br><span class="line">        [186.5, 72.6],[187.2, 78.8]...]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>共有507个样本的身高与体重数据，标签分为男女。</p>
<p>====代码====<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Dot_1, Dot_2, temp_group_1, temp_group_2 = <span class="keyword">new</span> <span class="built_in">Array</span>;</span><br><span class="line"><span class="keyword">var</span> temp_data</span><br><span class="line"><span class="keyword">var</span> dataTotel = hasntlabel_data.length;</span><br><span class="line"><span class="keyword">var</span> TempDot = [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">random_dot();</span><br><span class="line">initgroup();</span><br><span class="line">k_means()</span><br><span class="line"><span class="comment">//主要代码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123; <span class="comment">//初始化</span></span><br><span class="line">  group_1 = [];</span><br><span class="line">  group_2 = [];</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;init&quot;</span>) <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dataTotel; i++) &#123;</span><br><span class="line">    distance(Dot_1,hasntlabel_data[i])&gt;distance(Dot_2,hasntlabel_data[i])?</span><br><span class="line">    group_2.push(hasntlabel_data[i]):group_1.push(hasntlabel_data[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">random_dot</span>(<span class="params"></span>) </span>&#123; <span class="comment">//随机定两个点</span></span><br><span class="line">  Dot_1=[<span class="built_in">Math</span>.random()*<span class="number">7</span>,<span class="built_in">Math</span>.random()*<span class="number">7</span>]Dot_2=[<span class="built_in">Math</span>.random()*<span class="number">7</span>,<span class="built_in">Math</span>.random()*<span class="number">7</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">k_means</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(group_1.length + <span class="string">&#x27;,&#x27;</span> + group_2.length);</span><br><span class="line">  <span class="keyword">if</span> (!group_1.length || !group_2.length) &#123;</span><br><span class="line">    random_dot();</span><br><span class="line">    init();</span><br><span class="line">    k_means()</span><br><span class="line">  &#125;</span><br><span class="line">  data_1_x_sum = <span class="number">0</span>;</span><br><span class="line">  data_1_y_sum = <span class="number">0</span>;</span><br><span class="line">  data_2_x_sum = <span class="number">0</span>;</span><br><span class="line">  data_2_y_sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; group_1.length; i++) &#123;</span><br><span class="line">    data_1_x_sum += group_1[i][<span class="number">0</span>];</span><br><span class="line">    data_1_y_sum += group_1[i][<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; group_2.length; i++) &#123;</span><br><span class="line">    data_2_x_sum += group_2[i][<span class="number">0</span>];</span><br><span class="line">    data_2_y_sum += group_2[i][<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  TempDot[<span class="number">0</span>] = Dot_1;</span><br><span class="line">  TempDot[<span class="number">1</span>] = Dot_2;</span><br><span class="line">  Dot_1 = [(data_1_x_sum / group_1.length), (data_1_y_sum / group_1.length)];</span><br><span class="line">  Dot_2 = [(data_2_x_sum / group_2.length), (data_2_y_sum / group_2.length)];</span><br><span class="line">  <span class="keyword">if</span>(Dot_1[<span class="number">0</span>]==TempDot[<span class="number">0</span>][<span class="number">0</span>]&amp;&amp;Dot_1[<span class="number">1</span>]==TempDot[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">  &amp;&amp;Dot_2[<span class="number">0</span>]==TempDot[<span class="number">1</span>][<span class="number">0</span>]&amp;&amp;Dot_2[<span class="number">1</span>]==TempDot[<span class="number">1</span>][<span class="number">1</span>])&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  group_1 = [];</span><br><span class="line">  group_2 = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dataTotel; i++) &#123;</span><br><span class="line">    distance(Dot_1,hasntlabel_data[i])&gt;distance(Dot_2,hasntlabel_data[i])</span><br><span class="line">    ?group_2.push(hasntlabel_data[i]):group_1.push(hasntlabel_data[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  k_means()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">distance</span>(<span class="params">e, f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow((f[<span class="number">0</span>] - e[<span class="number">0</span>]), <span class="number">2</span>) + <span class="built_in">Math</span>.pow((f[<span class="number">1</span>] - e[<span class="number">1</span>]), <span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<p>当多次运行代码时，可以看到不同的结果</p>
<p><img src="/images/pasted-76.png" alt="upload successful"></p>
<p>对于K-means来说初始点对于结果的影响大，</p>
<p>且收敛太慢，算法复杂度高O(nkt)，结果不一定是全局最优，只能保证局部最优。</p>
<p>之后会学习与使用K-means++之类的增强的算法来进行聚类分析。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/17/%E4%BD%BF%E7%94%A8Python-selenium%E8%BD%BB%E6%9D%BE%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/05/17/%E4%BD%BF%E7%94%A8Python-selenium%E8%BD%BB%E6%9D%BE%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">使用Python selenium轻松实现自动化操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-17 10:17:00" itemprop="dateCreated datePublished" datetime="2016-05-17T10:17:00+08:00">2016-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>命令行输入pip install selenium 安装selenium</p>
<p>测试：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">browser.find_element_by_id(<span class="string">&quot;kw&quot;</span>).send_keys(<span class="string">&quot;selenium&quot;</span>)</span><br><span class="line">browser.find_element_by_id(<span class="string">&quot;su&quot;</span>).click()</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure></p>
<p>运行程序，可以看到程序自动打开了Chrome浏览器，进入baidu的网页，在id为kw的框（百度网页中的搜索框）中输入selenium，然后点击了id为su的按钮(百度网页中的搜索按钮)。</p>
<p>经过体验selenium非常好用，准备使用selenium+chrome来自动玩之前做的Flappy Bird。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lsvih.com/2016/05/17/%E6%94%B9%E8%BF%9BFlappy-Bird%E5%B9%B6%E6%90%AD%E5%BB%BANodeJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E7%9B%B8%E5%85%B3%E6%95%B0%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lsvih">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My note">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/05/17/%E6%94%B9%E8%BF%9BFlappy-Bird%E5%B9%B6%E6%90%AD%E5%BB%BANodeJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E7%9B%B8%E5%85%B3%E6%95%B0%E5%80%BC/" class="post-title-link" itemprop="url">改进Flappy Bird并搭建NodeJS服务器接收相关数值</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-05-17 08:53:00" itemprop="dateCreated datePublished" datetime="2016-05-17T08:53:00+08:00">2016-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Back-End/" itemprop="url" rel="index"><span itemprop="name">Back End</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>加入了键盘响应事件：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gamestate == <span class="number">1</span> || gamestate == <span class="number">-1</span>) &#123;</span><br><span class="line">	    start()</span><br><span class="line">    &#125;</span><br><span class="line">    tap()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>将图片插入后，页面改成如下：</p>
<video class="edui-upload-video  vjs-default-skin  video-js" controls="" preload="none" width="300" height="496" src="/img/1463475783775457.mp4" data-setup="{}"><source src="/img/1463475783775457.mp4" type="video/mp4"/></video>

<p>希望以某种方式获取鸟与柱子的实时数据。因此使用NodeJS进行获取。</p>
<p>在网页中加入js:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> upload = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	$.get(<span class="string">&quot;http://localhost:8000/?x-distance=&quot;</span> + (<span class="number">300</span> - pillarX - <span class="number">50</span>) + <span class="string">&quot;&amp;y-distance=&quot;</span> + (pillarupH + <span class="number">100</span> - startY))</span><br><span class="line">&#125;, <span class="number">20</span>)</span><br></pre></td></tr></table></figure></p>
<p>可以每20毫秒以get的方式请求一次服务器，将相关的数据上传。因为是本机搭建服务器因此无需担心由于网络环境造成的丢包与延迟等情况。</p>
<p>NodeJS代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">    res.end(util.inspect(url.parse(req.url, <span class="literal">true</span>)));</span><br><span class="line">    <span class="keyword">var</span> arg = url.parse(req.url, <span class="literal">true</span>).query; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(arg))</span><br><span class="line">&#125;).listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure>
<p>直接在本机8000端口建立服务器，并获得前端的get请求。</p>
<p>运行效果如下</p>
<video class="edui-upload-video  vjs-default-skin video-js" controls="" preload="none" width="420" height="280" src="/img/1463476317496303.mp4" data-setup="{}"><source src="/img/1463476317496303.mp4" type="video/mp4"/></video>

<p>能获得当前数据信息，之后考虑如何让电脑学会玩这个小游戏</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备18029472号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lsvih</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div><script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    menuSettings: {
      zoom: "None"
    },
    showMathMenu: false,
    jax: ["input/TeX","output/CommonHTML"],
    extensions: ["tex2jax.js"],
    TeX: {
      extensions: ["AMSmath.js","AMSsymbols.js"],
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [["$", "$"],["\\(", "\\)"]],
      displayMath: [["\\[", "\\]"]]
    }
  });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="//cdn.jsdelivr.net/npm/algoliasearch@4.4.0/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4.7.1/dist/instantsearch.production.min.js"></script><script src="/js/algolia-search.js"></script>













  








  

  

  

</body>
</html>
